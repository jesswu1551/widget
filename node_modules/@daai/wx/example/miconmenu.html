<!doctype html>
<html lang="en" data-framework="es6">
<head>
  <meta charset="utf-8">
  <title>Wx • IconMenu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link href="./css/wx.css" rel="stylesheet">
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }

    textarea:focus, input:focus {
      outline: none;
    }

    ::-webkit-scrollbar {
      width: 7px;
      margin-right: 2px;
    }

    ::-webkit-scrollbar-thumb,
    ::-webkit-scrollbar-thumb:horizontal {
      background-color: #dee2e6;
      outline: 0 solid #687685;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-track,
    ::-webkit-scrollbar-track:horizontal {
      box-shadow: none;
    }

    /* custom contextMenu item icon */
    .context-menu-insert-icon {
      background-image: url(../site/img/menu/insert.svg), url(../example/img/menu/insert.svg);
    }

    .context-menu-delete-icon {
      background-image: url(../site/img/menu/delete.svg), url(../example/img/menu/delete.svg);
    }

    .context-menu-copy-icon {
      background-image: url(../site/img/menu/copy.svg), url(../example/img/menu/copy.svg);
    }

    .context-menu-paste-icon {
      background-image: url(../site/img/menu/paste.svg), url(../example/img/menu/paste.svg);
    }

    /* disabled style */
    .context-menu-disabled .context-menu-insert-icon {
      background-image: url(../site/img/menu/disabled/insert-disabled.svg), url(../example/img/menu/disabled/insert-disabled.svg);
    }

    .context-menu-disabled .context-menu-delete-icon {
      background-image: url(../site/img/menu/disabled/delete-disabled.svg), url(../example/img/menu/disabled/delete-disabled.svg);
    }

    .context-menu-disabled .context-menu-copy-icon {
      background-image: url(../site/img/menu/disabled/copy-disabled.svg), url(../example/img/menu/disabled/copy-disabled.svg);
    }

    .context-menu-disabled .context-menu-paste-icon {
      background-image: url(../site/img/menu/disabled/paste-disabled.svg), url(../example/img/menu/disabled/paste-disabled.svg);
    }

    .tooltip { pointer-events: none; }

    /* menu tool icon button style */
    .miconmenu-filter-img {
      background-image: url(../site/img/tool/search.svg), url(../example/img/tool/search.svg);
    }

    .miconmenu-config-img {
      background-image: url(../site/img/tool/config.svg), url(../example/img/tool/config.svg);
    }

    .miconmenu-insert-img {
      background-image: url(../site/img/tool/insert.svg), url(../example/img/tool/insert.svg);
    }

    .miconmenu-sort-img,
    .miconmenu-sort-img.sort-default {
      background-image: url(../site/img/tool/sort-default.svg), url(../example/img/tool/sort-default.svg);
    }
    .miconmenu-sort-img.sort-asc {
      background-image: url(../site/img/tool/sort-asc.svg), url(../example/img/tool/sort-asc.svg);
    }
    .miconmenu-sort-img.sort-desc {
      background-image: url(../site/img/tool/sort-desc.svg), url(../example/img/tool/sort-desc.svg);
    }

    .miconmenu-reload-img {
      background-image: url(../site/img/tool/refresh.svg), url(../example/img/tool/refresh.svg);
    }
  </style>
</head>

<body style="line-height: 1.5; font-family: 'Microsoft JhengHei', 'SimHei', 'STHeiti'; font-size: .8rem; cursor: default;">
  <div style="width: 300px; float: left;">
    <div style="margin-bottom: 20px;">
      <button id="clear-menu1">Clear 1</button>
      <button id="update-menu1">Update 1</button>
      <br>
      <button id="update-menu11">Update 1-1</button>
      <button id="update-menu12">Update 1-2</button>
      <button id="update-context">Update context menu</button>
      <br>
      <button id="clear-menu2">Clear 2</button>
      <button id="update-menu2">Update 2</button>
    </div>

    <div style="width: 250px; position: relative;">
      <div class="miconmenu-container miconmenu-collapse" id="example1" style="height: 150px;"></div>
      <div class="miconmenu-container" id="example2" style="height: 350px;"></div>
    </div>
  </div>

</body>

<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
<script src="./js/umd/wx.js"></script>
<script>
  $(document).ready(function () {
    let option1 = {
      label: 'Example1', select: true, draggable: true, dragstart: 'dragStart',
      tool: [
        { name: 'filter', active: true, iconType: 'icon', icon: 'fa fa-search', title: true, placeholder: '請輸入 ...' },
        { name: 'insert', active: true, iconType: 'icon', icon: 'fa fa-plus' },
        { name: 'reload', active: true, iconType: 'icon', icon: 'fa fa-sync-alt' },
        { name: 'sort', active: true, iconType: 'icon', icon: 'fa fa-exchange-alt rotate', orderBy: 'default' },
        // { name: 'sort', active: true, iconType: 'icon', icon: 'fa fa-sort-amount-down-alt', orderBy: 'asc' },
        // { name: 'sort', active: true, iconType: 'icon', icon: 'fa fa-sort-amount-down', orderBy: 'desc' },
        // { name: 'sort', active: true, iconType: 'icon', icon: 'fa fa-sort-alpha-down', orderBy: 'asc' },
      ],
      activeType: 'disabled', // 'visible' or 'disabled'
      item: [
        {
          id: 'ex1-item0001', label: 'Item0001', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            {
              mid: 'insert-group', label: 'Add', type: 'insert', active: true,
              menu: [
                { mid: 'insert-copy', label: 'Copy', type: 'copy', active: true },
                { mid: 'insert-paste', label: 'Paste', type: 'paste', active: false },
              ]
            },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'rename', label: 'Rename', type: 'rename', active: true },
            { mid: 'convert', label: 'Convert', type: 'convert', active: true },
            { mid: 'setting', label: 'Setting', type: 'setting', active: true },
            { mid: 'export', label: 'Export', type: 'export', active: true },
            {
              mid: 'info', label: 'Information', type: 'info', active: true,
              menu: [
                {
                  mid: 'info-group', label: 'Info', type: 'info', active: true,
                  menu: [
                    { mid: 'info-info_group-info', label: 'Information', type: 'info', active: false },
                    { mid: 'info-info_group-info2', label: 'Information2', type: 'info', active: true },
                  ]
                },
                {
                  mid: 'info-group2', label: 'Info2', type: 'info', active: true,
                  menu: [
                    { mid: 'info-info_group2-info', label: 'Information', type: 'info', active: true },
                  ]
                },
              ]
            }
          ]
        },
        {
          id: 'ex1-item0002', label: 'Item0002', type: 'item', selected: true, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0003', label: 'Item0003', type: 'item', selected: false, icon: 'pipeline.png',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0004', label: 'Item0004 test item name is too long', type: 'item', selected: false, icon: 'pipeline.png', rtooltip: 'testtesttesttesttesttesttestt<br>esttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttestteesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttestteststtesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttesttest',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0005', label: 'Item0005', type: 'item', selected: false, icon: 'pipeline.png',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0006', label: 'Item0006', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0007', label: 'Item0007', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0008', label: 'Item0008', type: 'item', selected: false, icon: 'pipeline.png',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        },
        {
          id: 'ex1-item0009', label: 'Item0009', type: 'item', selected: false, icon: 'pipeline.png',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        }],
      srcpath: './img/',
      onAction: menu1Callback,
    };

    let option11 = {
      label: 'Example1', select: true, draggable: true, dragstart: 'dragStart',
      tool: [
        { name: 'filter', active: false, iconType: 'icon', icon: 'fa fa-search', title: true, placeholder: '請輸入 ...' },
        { name: 'insert', active: false, iconType: 'icon', icon: 'fa fa-plus' },
        { name: 'reload', active: true, iconType: 'icon', icon: 'fa fa-sync-alt' },
        { name: 'sort', active: false, iconType: 'icon', icon: 'fa fa-exchange-alt rotate', orderBy: 'default' },
      ],
      activeType: 'disabled', // 'visible' or 'disabled'
      item: [
        {
          id: 'ex1-item0001', label: 'Item0001', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'rename', label: 'Rename', type: 'rename', active: true },
          ]
        },
        {
          id: 'ex1-item0002', label: 'Item0002', type: 'item', selected: true, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false },
          ]
        }],
      srcpath: './img/',
      onAction: menu1Callback,
    };


    let option12 = {
      label: 'Example1', select: true, draggable: true, dragstart: 'dragStart',
      tool: [
        { name: 'filter', active: false, iconType: 'icon', icon: 'fa fa-search', title: true, placeholder: '請輸入 ...' },
        { name: 'insert', active: false, iconType: 'icon', icon: 'fa fa-plus' },
        { name: 'reload', active: true, iconType: 'icon', icon: 'fa fa-sync-alt' },
        { name: 'sort', active: false, iconType: 'icon', icon: 'fa fa-exchange-alt rotate', orderBy: 'default' },
      ],
      activeType: 'disabled', // 'visible' or 'disabled'
      item: [
        {
          id: 'ex1-item0001', label: 'Item0001', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'delete', label: '刪除', type: 'delete', active: true },
            { mid: 'copy', label: '複製', type: 'copy', active: true },
            { mid: 'rename', label: '重新命名', type: 'rename', active: true },
          ]
        },
        {
          id: 'ex1-item0002', label: 'Item0002', type: 'item', selected: true, icon: 'pipeline.png', tooltip: 'test',
          menu: [
            { mid: 'insert', label: '新增', type: 'insert', active: true },
            { mid: 'delete', label: '刪除', type: 'delete', active: true },
            { mid: 'copy', label: '複製', type: 'copy', active: true },
            { mid: 'paste', label: '貼上', type: 'paste', active: false },
          ]
        }],
      srcpath: './img/',
      onAction: menu1Callback,
    };


    let option2 = {
      label: 'Example2', select: true, draggable: false, dragstart: 'dragStart',
      tool: [
        { name: 'filter', active: true, iconType: 'img', className: '', title: true, placeholder: '請輸入 ...' },
        { name: 'insert', active: true, iconType: 'img', className: 'custom-class miconmenu-insert-img' },
        { name: 'reload', active: true, iconType: 'img', className: '' },
        { name: 'sort', active: true, iconType: 'img', orderBy: 'default' },
      ],
      activeType: 'disabled', // 'visible' or 'disabled'
      item: [{
        id: 'group1', label: 'Group', type: 'branch', selected: false,
        menu: [
          { mid: 'group1-insert', label: 'Add', type: 'insert', active: true },
          { mid: 'group1-delete', label: 'Delete', type: 'delete', active: true },
          { mid: 'group1-copy', label: 'Copy', type: 'copy', active: true },
        ],
        subitems: [{
          id: 'ex2-item0001', label: 'Item000193432492384023fsdfd', type: 'branch', selected: false, tooltip: 'test',
          menu: [
            {
              mid: 'insert', label: 'Add', type: 'insert', active: true,
              menu: [
                { mid: 'insert-insert', label: 'Add', type: 'insert', active: true },
                { mid: 'insert-delete', label: 'Delete', type: 'delete', active: true },
                { mid: 'insert-copy', label: 'Copy', type: 'copy', active: true },
                { mid: 'insert-info', label: 'Information', type: 'info', active: true },
              ]
            },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'rename', label: 'Rename', type: 'rename', active: true },
            { mid: 'convert', label: 'Convert', type: 'convert', active: true },
            { mid: 'setting', label: 'Setting', type: 'setting', active: true },
            { mid: 'export', label: 'Export', type: 'export', active: true },
            { mid: 'info', label: 'Information', type: 'info', active: true }
          ],
          subitems: [{
            id: 'ex2-item0001001', label: 'Item0001-001', type: 'item', selected: false, icon: '',
            menu: [
              {
                mid: 'insert', label: 'Add', type: 'insert', active: true,
                menu: [
                  { mid: 'insert-insert', label: 'Add', type: 'insert', active: true },
                  { mid: 'insert-delete', label: 'Delete', type: 'delete', active: true },
                ]
              },
              { mid: 'delete', label: 'Delete', type: 'delete', active: true },
              { mid: 'copy', label: 'Copy', type: 'copy', active: true },
              { mid: 'info', label: 'Information', type: 'info', active: true }
            ],
          }]
        }, {
          id: 'ex2-item0002', label: 'Item0002', type: 'item', selected: false, tooltip: 'test', icon: '',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            {
              mid: 'copy', label: 'Copy', type: 'copy', active: true,
              menu: [
                { mid: 'copy-rename', label: 'Rename', type: 'rename', active: false },
                { mid: 'copy-info', label: 'Information', type: 'info', active: true },
              ]
            },
            {
              mid: 'paste', label: 'Paste', type: 'paste', active: false,
              menu: [
                { mid: 'paste-setting', label: 'Setting', type: 'setting', active: true },
                { mid: 'paste-export', label: 'Export', type: 'export', active: true },
                { mid: 'paste-info', label: 'Information', type: 'info', active: true },
              ]
            }
          ]
        }, {
          id: 'ex2-item0003', label: 'Item0003', type: 'item', selected: false, icon: '',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false }]
        }]
      },
      {
        id: 'group2', label: 'Group2', type: 'branch', menu: null, selected: false,
        menu: [
          { mid: 'group1-insert', label: 'Add', type: 'insert', active: true },
          { mid: 'group1-delete', label: 'Delete', type: 'delete', active: true },
          { mid: 'group1-copy', label: 'Copy', type: 'copy', active: true },
        ],
        subitems: [{
          id: 'ex2-item0004', label: 'Item0001', type: 'branch', selected: false,
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false }],
          subitems: [{
            id: 'ex2-item0004001', label: 'Item0004-001', type: 'item', selected: false, icon: '',
            menu: [
              { mid: 'insert', label: 'Add', type: 'insert', active: true },
              { mid: 'delete', label: 'Delete', type: 'delete', active: true },
              { mid: 'copy', label: 'Copy', type: 'copy', active: true },
              { mid: 'paste', label: 'Paste', type: 'paste', active: false }]
          }]
        }, {
          id: 'ex2-item0005', label: 'Item0002', type: 'item', selected: false, icon: '',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: true },
            { mid: 'delete', label: 'Delete', type: 'delete', active: true },
            { mid: 'copy', label: 'Copy', type: 'copy', active: true },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false }]
        }]
      },
      {
        id: 'item0006', label: 'Item0006', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
        menu: [
          { mid: 'insert', label: 'Add', type: 'insert', active: true },
          { mid: 'delete', label: 'Delete', type: 'delete', active: true },
          { mid: 'copy', label: 'Copy', type: 'copy', active: true },
          { mid: 'paste', label: 'Paste', type: 'paste', active: false },
        ]
      },
      {
        id: 'item0007', label: 'Item0007', type: 'item', selected: false, icon: 'pipeline.png', tooltip: 'test',
        menu: [
          { mid: 'insert', label: 'Add', type: 'insert', active: true },
          { mid: 'delete', label: 'Delete', type: 'delete', active: true },
          { mid: 'copy', label: 'Copy', type: 'copy', active: true },
          { mid: 'paste', label: 'Paste', type: 'paste', active: false },
        ]
      },
      {
        id: 'item0008', label: 'Item0008', type: 'item', selected: false, icon: 'pipeline.png',
        menu: [
          { mid: 'insert', label: 'Add', type: 'insert', active: true },
          { mid: 'delete', label: 'Delete', type: 'delete', active: true },
          { mid: 'copy', label: 'Copy', type: 'copy', active: true },
          { mid: 'paste', label: 'Paste', type: 'paste', active: false },
        ]
      },
      {
        id: 'group3', label: 'Group3', type: 'branch', menu: null, selected: false,
        subitems: [{
          id: 'ex2-item0006', label: 'Item0001', type: 'item', selected: false, tooltip: 'test',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: false },
            { mid: 'delete', label: 'Delete', type: 'delete', active: false },
            { mid: 'copy', label: 'Copy', type: 'copy', active: false },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false }]
        }, {
          id: 'ex2-item0007', label: 'Item0002', type: 'item', selected: false, tooltip: 'test',
          menu: [
            { mid: 'insert', label: 'Add', type: 'insert', active: false },
            { mid: 'delete', label: 'Delete', type: 'delete', active: false },
            { mid: 'copy', label: 'Copy', type: 'copy', active: false },
            { mid: 'paste', label: 'Paste', type: 'paste', active: false }]
        }],
      },
      {
        id: 'item0009', label: 'Item0009', type: 'item', selected: false, icon: 'pipeline.png',
        menu: [
          { mid: 'insert', label: 'Add', type: 'insert', active: true },
          { mid: 'delete', label: 'Delete', type: 'delete', active: true },
          { mid: 'copy', label: 'Copy', type: 'copy', active: true },
          { mid: 'paste', label: 'Paste', type: 'paste', active: false },
        ]
      }],
      onAction: function (item, data) {
        console.log(item, data);
        if (item === 'selectcontext') {
          if (data.type === 'copy') {
            $('#example2 .miconmenu-item-btn').attr('data-paste', true);
            // $(`#${data.id}-btn`).attr('data-paste', true);
          } else if (data.type === 'paste') {
            $('#example2 .miconmenu-item-btn').attr('data-paste', false);
            // $(`#${data.id}-btn`).attr('data-paste', true);
          }
        } else if (item === 'selectmenu') {
          if (data.type === 'sort') {
            let sortObj = { className: '', orderBy: '' };
            if (data.orderBy === 'default') {
              // regroup data...
              sortObj.className = 'miconmenu-sort-img sort-asc';
              sortObj.orderBy = 'asc';
            } else if (data.orderBy === 'asc') {
              // regroup data...
              sortObj.className = 'miconmenu-sort-img sort-desc';
              sortObj.orderBy = 'desc';
            } else if (data.orderBy === 'desc') {
              // regroup data...
              sortObj.className = 'miconmenu-sort-img sort-default';
              sortObj.orderBy = 'default';
            }
            let tools = [
              { name: 'filter', active: true, iconType: 'img', className: '', title: true, placeholder: '請輸入 ...' },
              { name: 'insert', active: true, iconType: 'img', className: 'custom-class miconmenu-insert-img' },
              { name: 'reload', active: true, iconType: 'img' },
              { name: 'sort', active: true, iconType: 'img', orderBy: sortObj.orderBy, className: sortObj.className },
            ]

            Object.assign(option2.tool, tools);
            miconmenu2.update(option2);
          }
        }
      },
      srcpath: './img/',
    };

    let miconmenu1 = new wx.mIconMenu('#example1', {});
    // $('#example1').on('selectitem selectmenu selectcontext', function (e) {
    //   console.log(e.detail);
    // });

    function menu1Callback(item, data) {
      console.log(item, data);
      if (item === 'selectcontext') {
        if (data.type === 'copy') {
          // $('#example1 .miconmenu-item-btn').attr('data-paste', true);
          $(`#${data.id}-btn`).attr('data-paste', true);
        } else if (data.type === 'paste') {
          // $('#example1 .miconmenu-item-btn').attr('data-paste', false);
          $(`#${data.id}-btn`).attr('data-paste', false);
        }
      } else if (item === 'selectmenu') {
        if (data.type === 'sort') {
          let sortObj = { icon: '', orderBy: '' };
          if (data.orderBy === 'default') {
            // regroup data...
            sortObj.icon = 'fa fa-sort-amount-down-alt';
            sortObj.orderBy = 'asc';
          } else if (data.orderBy === 'asc') {
            // regroup data...
            sortObj.icon = 'fa fa-sort-amount-down';
            sortObj.orderBy = 'desc';
          } else if (data.orderBy === 'desc') {
            // regroup data...
            sortObj.icon = 'fa fa-exchange-alt rotate';
            sortObj.orderBy = 'default';
          }
          let tools = [
            { name: 'filter', active: true, iconType: 'icon', icon: 'fa fa-search', title: true, placeholder: '請輸入 ...' },
            { name: 'insert', active: true, iconType: 'icon', icon: 'fa fa-plus' },
            { name: 'reload', active: true, iconType: 'icon', icon: 'fa fa-sync-alt' },
            { name: 'sort', active: true, iconType: 'icon', icon: sortObj.icon, orderBy: sortObj.orderBy },
            // { name: 'sort', active: true, iconType: 'icon', icon: 'fa fa-sort-amount-down-alt', orderBy: 'asc' },
            // { name: 'sort', active: true, iconType: 'icon', icon: 'fa fa-sort-amount-down', orderBy: 'desc' },
          ]
          Object.assign(option1.tool, tools);
          miconmenu1.update(option1);
        }
      }
    }

    let miconmenu2 = new wx.mIconMenu('#example2', {});

    $('#clear-menu1').on('click', function (e) {
      miconmenu1.clear();
    });
    $('#update-menu1').on('click', function (e) {
      miconmenu1.clear();
      miconmenu1.update(option1);
    });
    $('#update-menu11').on('click', function (e) {
      miconmenu1.clear();
      miconmenu1.update(option11);
    });
    $('#update-menu12').on('click', function (e) {
      miconmenu1.clear();
      miconmenu1.update(option12);
    });

    $('#update-context').on('click', function (e) {
      miconmenu1.updateContextMenu('paste', true);
      miconmenu1.updateContextMenu('copy', false);
    });
    $('#clear-menu2').on('click', function (e) {
      miconmenu2.clear();
    });
    $('#update-menu2').on('click', function (e) {
      miconmenu2.clear();
      miconmenu2.update(option2);
    });

  });
</script>
</html>
