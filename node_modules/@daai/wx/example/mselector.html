<!doctype html>
<html lang="en" data-framework="es6">
  <head>
    <meta charset="utf-8">
    <title>Wx • Selector</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css">
    <link href="./css/wx.css" rel="stylesheet">
  </head>
  <body>
    <div>
      <div style="margin-bottom: 20px;">
        <button id="clear-selector1">Clear 1</button>
        <button id="update-selector1">Update 1</button>
        <button id="get-selector1">Get Item 1</button>
        <button id="clear-selector2">Clear 2</button>
        <button id="update-selector2">Update 2</button>
      </div>
    </div>
    <div class="mselector-container" id="mselector1" style="min-height: 50px;" data-col=""></div>
    <br>
    <div class="mselector-container" id="mselector2" style="min-height: 50px;" data-col=""></div>
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"></script>
    <script src="./js/umd/wx.js"></script>
  </body>
  <script>
  $(document).ready(function () {

    function groupData(list) {
      let opt = [];
      for (let i = 0, len = list.length; i < len; i++) {
        opt.push({ label: list[i], value: list[i] })
      }
      return opt;
    }

    let leftopts = ['jid', 'parameter', 'created_time', 'score1', 'sign1', 'score2', 'sign2', 'distinct_value', 'same_direction', 'opp_direction'];
    let rightopts = ['jid2', 'parameter2', 'created_time2', 'score2', 'sign2', 'score2', 'sign2', 'distinct_value2', 'same_direction2', 'opp_direction2'];
    let options = {
      item: [{ left_value: '', left_label: '-', right_value: '', right_label: '-' }],
      item_min: 1,
      item_max: 3,
      left: groupData(leftopts),
      right: groupData(rightopts),
      // string: { Left: '左資料表', Right: '右資料表' }
    };
    let selector1 = new wx.mSelector('#mselector1', options);
    let selector2 = new wx.mSelector('#mselector2', options);
    $('#clear-selector1').on('click', function (e) {
      selector1.clear();
    });
    $('#update-selector1').on('click', function (e) {
      let options = {
        item: [{
          left_value: 'item3', left_label: 'item3', right_value: 'itemD', right_label: 'itemD'
        }, {
          left_value: 'item1', left_label: 'item1', right_value: 'itemE', right_label: 'itemE'
        }
        ],
        item_min: 1,
        item_max: 3,
        left: groupData(['item1', 'item2', 'item3', 'item4', 'item5']),
        right: groupData(['itemA', 'itemB', 'itemC', 'itemD', 'itemE']),
      };
      selector1.update(options);
    });
    $('#get-selector1').on('click', function (e) {
      let setting = selector1.getItems();
      console.log(setting);

      selector2.update({ item: setting });
    });
    $('#clear-selector2').on('click', function (e) {
      selector2.clear();
    });
    $('#update-selector2').on('click', function (e) {
      let options = {
        item: [{
          left_value: 'jid', left_label: 'jid', right_value: 'created_time2', right_label: 'created_time2'
        }, {
          left_value: 'sign2', left_label: 'sign2', right_value: 'parameter2', right_label: 'parameter2'
        }],
      };
      selector2.update(options);
    });
  })
  </script>
</html>
