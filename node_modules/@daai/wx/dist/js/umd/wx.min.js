!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).wx={},t.jQuery)}(this,(function(t,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=i(e),s=function(t,e){var i,s;this.VERSION="1.0.0",this.input=t,this.plugin_count=t,this.current_plugin=t,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.old_min_interval=null,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.no_diapason=!1,this.has_tab_index=!0,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,e=e||{},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),s=Math.max(0,16-(n-t)),a=window.setTimeout((function(){e(n+s)}),s);return t=n+s,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),this.base_html='<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>',this.single_html='<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>',this.double_html='<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>',this.disable_html='<span class="irs-disable-mask"></span>',this.$cache={win:n.default(window),body:n.default(document.body),input:n.default(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.is_old_ie=(i=navigator.userAgent,s=/msie\s\d+/i,i.search(s)>0&&s.exec(i).toString().split(" ")[1]<9&&(n.default("html").addClass("lt-ie9"),!0)),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,i=[].slice;if("function"!=typeof e)throw new TypeError;var n=i.call(arguments,1),s=function s(){if(this instanceof s){var a=function(){};a.prototype=e.prototype;var o=new a,l=e.apply(o,n.concat(i.call(arguments)));return Object(l)===l?l:o}return e.apply(t,n.concat(i.call(arguments)))};return s}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var a=+e||0;if(Math.abs(a)===1/0&&(a=0),a>=s)return-1;for(i=Math.max(a>=0?a:s-Math.abs(a),0);i<s;){if(i in n&&n[i]===t)return i;i++}return-1}),this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var a,o,l,r=this.$cache.input,c=r.prop("value");for(l in a={skin:"meadow",type:"double",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" â€” ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null},"INPUT"!==r[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",r[0]),(o={skin:r.data("skin"),type:r.data("type"),min:r.data("min"),max:r.data("max"),from:r.data("from"),to:r.data("to"),step:r.data("step"),min_interval:r.data("minInterval"),max_interval:r.data("maxInterval"),drag_interval:r.data("dragInterval"),values:r.data("values"),from_fixed:r.data("fromFixed"),from_min:r.data("fromMin"),from_max:r.data("fromMax"),from_shadow:r.data("fromShadow"),to_fixed:r.data("toFixed"),to_min:r.data("toMin"),to_max:r.data("toMax"),to_shadow:r.data("toShadow"),prettify_enabled:r.data("prettifyEnabled"),prettify_separator:r.data("prettifySeparator"),force_edges:r.data("forceEdges"),keyboard:r.data("keyboard"),grid:r.data("grid"),grid_margin:r.data("gridMargin"),grid_num:r.data("gridNum"),grid_snap:r.data("gridSnap"),hide_min_max:r.data("hideMinMax"),hide_from_to:r.data("hideFromTo"),prefix:r.data("prefix"),postfix:r.data("postfix"),max_postfix:r.data("maxPostfix"),decorate_both:r.data("decorateBoth"),values_separator:r.data("valuesSeparator"),input_values_separator:r.data("inputValuesSeparator"),disable:r.data("disable"),block:r.data("block"),extra_classes:r.data("extraClasses")}).values=o.values&&o.values.split(","),o)o.hasOwnProperty(l)&&(void 0!==o[l]&&""!==o[l]||delete o[l]);void 0!==c&&""!==c&&((c=c.split(o.input_values_separator||e.input_values_separator||";"))[0]&&c[0]==+c[0]&&(c[0]=+c[0]),c[1]&&c[1]==+c[1]&&(c[1]=+c[1]),e&&e.values&&e.values.length?(a.from=c[0]&&e.values.indexOf(c[0]),a.to=c[1]&&e.values.indexOf(c[1])):(a.from=c[0]&&+c[0],a.to=c[1]&&+c[1])),n.default.extend(a,e),n.default.extend(a,o),this.options=a,this.update_check={},this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()};s.prototype={init:function(t){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var t='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(t),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html(this.base_html),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append(this.single_html),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append(this.double_html),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents()),this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.min,e=this.options.max,i=this.options.from,n=this.options.to;i>t&&n===e?this.$cache.s_from.addClass("type_last"):n<e&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake),this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append(this.disable_html),this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask"),this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),this.is_old_ie&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),this.is_old_ie&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(t){var e,i;this.target||(e=(i="single"===this.options.type?this.$cache.single:this.$cache.from).offset().left,e+=i.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:e}))},pointerMove:function(t){if(this.dragging){var e=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;this.coords.x_pointer=e-this.coords.x_gap,this.calc()}},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,this.is_old_ie&&n.default("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(n.default.contains(this.$cache.cont[0],t.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===t&&this.setTempMinInterval(),t||(t=this.target||"from"),this.current_plugin=this.plugin_count,this.target=t,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=i-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),this.is_old_ie&&n.default("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var e=this.coords.p_pointer,i=(this.options.max-this.options.min)/100;i=this.options.step/i,t?e+=i:e-=i,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*e),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");if(this.options.values.length)this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]));else{var t=this._prettify(this.options.min),e=this._prettify(this.options.max);this.result.min_pretty=t,this.result.max_pretty=e,this.$cache.min.html(this.decorate(t,this.options.min)),this.$cache.max.html(this.decorate(e,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){if(this.options&&(this.calc_count++,(10===this.calc_count||t)&&(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();var e=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,e=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,e=this.getHandleX(),this.options.drag_interval?this.target="both_one":this.target=this.chooseHandle(e)),this.target){case"base":var i=(this.options.max-this.options.min)/100,n=(this.result.from-this.options.min)/i,s=(this.result.to-this.options.min)/i;this.coords.p_single_real=this.toFixed(n),this.coords.p_from_real=this.toFixed(n),this.coords.p_to_real=this.toFixed(s),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(e),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(e),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(e),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;e=this.toFixed(e+.001*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(e)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(e)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var a=this.convertToRealPercent(e),o=this.result.from_percent,l=this.result.to_percent-o,r=l/2,c=a-r,u=a+r;c<0&&(u=(c=0)+l),u>100&&(c=(u=100)-l),this.coords.p_from_real=this.calcWithStep(c),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(u),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,e=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return e<0?e=0:e>t&&(e=t),e},calcHandlePercent:function(){"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":t>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake)):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake)))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw)&&(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%",this.$cache.single[0].style.left=this.labels.p_single_left+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",(this.old_from!==this.result.from||this.force_redraw)&&(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),(this.old_to!==this.result.to||this.force_redraw)&&(this.$cache.to[0].style.left=this.labels.p_to_left+"%"),this.$cache.single[0].style.left=this.labels.p_single_left+"%"),this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){if(this.options){var t,e,i,n,s,a=this.options.values.length,o=this.options.p_values;if(!this.options.hide_from_to)if("single"===this.options.type)a?(t=this.decorate(o[this.result.from]),this.$cache.single.html(t)):(n=this._prettify(this.result.from),t=this.decorate(n,this.result.from),this.$cache.single.html(t)),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible";else{a?(this.options.decorate_both?(t=this.decorate(o[this.result.from]),t+=this.options.values_separator,t+=this.decorate(o[this.result.to])):t=this.decorate(o[this.result.from]+this.options.values_separator+o[this.result.to]),e=this.decorate(o[this.result.from]),i=this.decorate(o[this.result.to]),this.$cache.single.html(t),this.$cache.from.html(e),this.$cache.to.html(i)):(n=this._prettify(this.result.from),s=this._prettify(this.result.to),this.options.decorate_both?(t=this.decorate(n,this.result.from),t+=this.options.values_separator,t+=this.decorate(s,this.result.to)):t=this.decorate(n+this.options.values_separator+s,this.result.to),e=this.decorate(n,this.result.from),i=this.decorate(s,this.result.to),this.$cache.single.html(t),this.$cache.from.html(e),this.$cache.to.html(i)),this.calcLabels();var l=Math.min(this.labels.p_single_left,this.labels.p_from_left),r=this.labels.p_single_left+this.labels.p_single_fake,c=this.labels.p_to_left+this.labels.p_to_fake,u=Math.max(r,c);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",u=c):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",u=Math.max(r,c))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),l<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",u>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var t,e,i,n,s=this.options,a=this.$cache,o="number"==typeof s.from_min&&!isNaN(s.from_min),l="number"==typeof s.from_max&&!isNaN(s.from_max),r="number"==typeof s.to_min&&!isNaN(s.to_min),c="number"==typeof s.to_max&&!isNaN(s.to_max);"single"===s.type?s.from_shadow&&(o||l)?(t=this.convertToPercent(o?s.from_min:s.min),e=this.convertToPercent(l?s.from_max:s.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,a.shad_single[0].style.display="block",a.shad_single[0].style.left=t+"%",a.shad_single[0].style.width=e+"%"):a.shad_single[0].style.display="none":(s.from_shadow&&(o||l)?(t=this.convertToPercent(o?s.from_min:s.min),e=this.convertToPercent(l?s.from_max:s.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,a.shad_from[0].style.display="block",a.shad_from[0].style.left=t+"%",a.shad_from[0].style.width=e+"%"):a.shad_from[0].style.display="none",s.to_shadow&&(r||c)?(i=this.convertToPercent(r?s.to_min:s.min),n=this.convertToPercent(c?s.to_max:s.max)-i,i=this.toFixed(i-this.coords.p_handle/100*i),n=this.toFixed(n-this.coords.p_handle/100*n),i+=this.coords.p_handle/2,a.shad_to[0].style.display="block",a.shad_to[0].style.left=i+"%",a.shad_to[0].style.width=n+"%"):a.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput(),this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput(),this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput(),this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput(),this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input"),this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex"),this.has_tab_index=!this.has_tab_index},convertToPercent:function(t,e){var i,n=this.options.max-this.options.min,s=n/100;return n?(i=(e?t:t-this.options.min)/s,this.toFixed(i)):(this.no_diapason=!0,0)},convertToValue:function(t){var e,i,n=this.options.min,s=this.options.max,a=n.toString().split(".")[1],o=s.toString().split(".")[1],l=0,r=0;if(0===t)return this.options.min;if(100===t)return this.options.max;a&&(l=e=a.length),o&&(l=i=o.length),e&&i&&(l=e>=i?e:i),n<0&&(n=+(n+(r=Math.abs(n))).toFixed(l),s=+(s+r).toFixed(l));var c,u=(s-n)/100*t+n,d=this.options.step.toString().split(".")[1];return d?u=+u.toFixed(d.length):(u/=this.options.step,u=+(u*=this.options.step).toFixed(0)),r&&(u-=r),(c=d?+u.toFixed(d.length):this.toFixed(u))<this.options.min?c=this.options.min:c>this.options.max&&(c=this.options.max),c},calcWithStep:function(t){var e=Math.round(t/this.coords.p_step)*this.coords.p_step;return e>100&&(e=100),100===t&&(e=100),this.toFixed(e)},checkMinInterval:function(t,e,i){var n,s,a=this.options;return a.min_interval?(n=this.convertToValue(t),s=this.convertToValue(e),"from"===i?s-n<a.min_interval&&(n=s-a.min_interval):n-s<a.min_interval&&(n=s+a.min_interval),this.convertToPercent(n)):t},checkMaxInterval:function(t,e,i){var n,s,a=this.options;return a.max_interval?(n=this.convertToValue(t),s=this.convertToValue(e),"from"===i?s-n>a.max_interval&&(n=s-a.max_interval):n-s>a.max_interval&&(n=s+a.max_interval),this.convertToPercent(n)):t},checkDiapason:function(t,e,i){var n=this.convertToValue(t),s=this.options;return"number"!=typeof e&&(e=s.min),"number"!=typeof i&&(i=s.max),n<e&&(n=e),n>i&&(n=i),this.convertToPercent(n)},toFixed:function(t){return+(t=t.toFixed(20))},_prettify:function(t){return this.options.prettify_enabled?this.options.prettify&&"function"==typeof this.options.prettify?this.options.prettify(t):this.prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,e){return this.options.force_edges?(t<0?t=0:t>100-e&&(t=100-e),this.toFixed(t)):this.toFixed(t)},validate:function(){var t,e,i=this.options,n=this.result,s=i.values,a=s.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<i.min&&(i.max=i.min),a)for(i.p_values=[],i.min=0,i.max=a-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,e=0;e<a;e++)t=+s[e],isNaN(t)?t=s[e]:(s[e]=t,t=this._prettify(t)),i.p_values.push(t);("number"!=typeof i.from||isNaN(i.from))&&(i.from=i.min),("number"!=typeof i.to||isNaN(i.to))&&(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max),i.to<i.min&&(i.to=i.min),i.to>i.max&&(i.to=i.max),this.update_check.from&&(this.update_check.from!==i.from&&i.from>i.to&&(i.from=i.to),this.update_check.to!==i.to&&i.to<i.from&&(i.to=i.from)),i.from>i.to&&(i.from=i.to),i.to<i.from&&(i.to=i.from)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min),"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max),"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min),"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max),n&&(n.min!==i.min&&(n.min=i.min),n.max!==i.max&&(n.max=i.max),(n.from<n.min||n.from>n.max)&&(n.from=i.from),(n.to<n.min||n.to>n.max)&&(n.to=i.to)),("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0),("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0),i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min),i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(t,e){var i="",n=this.options;return n.prefix&&(i+=n.prefix),i+=t,n.max_postfix&&(n.values.length&&t===n.p_values[n.max]||e===n.max)&&(i+=n.max_postfix,n.postfix&&(i+=" ")),n.postfix&&(i+=n.postfix),i},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.result.from_pretty=this._prettify(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.result.to_pretty=this._prettify(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,e,i,n,s,a,o=this.options,l=o.max-o.min,r=o.grid_num,c=0,u=4,d="";for(this.calcGridMargin(),o.grid_snap&&(r=l/o.step),r>50&&(r=50),i=this.toFixed(100/r),r>4&&(u=3),r>7&&(u=2),r>14&&(u=1),r>28&&(u=0),t=0;t<r+1;t++){for(n=u,(c=this.toFixed(i*t))>100&&(c=100),this.coords.big[t]=c,s=(c-i*(t-1))/(n+1),e=1;e<=n&&0!==c;e++)d+='<span class="irs-grid-pol small" style="left: '+this.toFixed(c-s*e)+'%"></span>';d+='<span class="irs-grid-pol" style="left: '+c+'%"></span>',a=this.convertToValue(c),d+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+c+'%">'+(a=o.values.length?o.p_values[a]:this._prettify(a))+"</span>"}this.coords.big_num=Math.ceil(r+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(d),this.cacheGridLabels()}},cacheGridLabels:function(){var t,e,i=this.coords.big_num;for(e=0;e<i;e++)t=this.$cache.grid.find(".js-grid-text-"+e),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){var t,e,i=[],n=[],s=this.coords.big_num;for(t=0;t<s;t++)this.coords.big_w[t]=this.$cache.grid_labels[t].outerWidth(!1),this.coords.big_p[t]=this.toFixed(this.coords.big_w[t]/this.coords.w_rs*100),this.coords.big_x[t]=this.toFixed(this.coords.big_p[t]/2),i[t]=this.toFixed(this.coords.big[t]-this.coords.big_x[t]),n[t]=this.toFixed(i[t]+this.coords.big_p[t]);for(this.options.force_edges&&(i[0]<-this.coords.grid_gap&&(i[0]=-this.coords.grid_gap,n[0]=this.toFixed(i[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),n[s-1]>100+this.coords.grid_gap&&(n[s-1]=100+this.coords.grid_gap,i[s-1]=this.toFixed(n[s-1]-this.coords.big_p[s-1]),this.coords.big_x[s-1]=this.toFixed(this.coords.big_p[s-1]-this.coords.grid_gap))),this.calcGridCollision(2,i,n),this.calcGridCollision(4,i,n),t=0;t<s;t++)e=this.$cache.grid_labels[t][0],this.coords.big_x[t]!==Number.POSITIVE_INFINITY&&(e.style.marginLeft=-this.coords.big_x[t]+"%")},calcGridCollision:function(t,e,i){var n,s,a,o=this.coords.big_num;for(n=0;n<o&&!((s=n+t/2)>=o);n+=t)a=this.$cache.grid_labels[s][0],i[n]<=e[s]?a.style.visibility="visible":a.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=n.default.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),n.default.data(this.input,"mSlider",null),this.remove(),this.input=null,this.options=null)}};var a=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.defaults={item:[{operator:"",operator_index:0,value:""}],operator_order:["-",">","<","==",">=","<=","!="],item_min:1,item_max:3,numerical:!0,limit:{min:-1/0,max:1/0}},this.string={Operator:"Operator",Value:"Value"},e.string&&(this.string=e.string),this.options=Object.assign({item:[{operator:"",operator_index:0,value:""}],operator_order:["-",">","<","==",">=","<=","!="],item_min:1,item_max:3,numerical:!0,limit:{min:-1/0,max:1/0}},e),this.$element.on("click",".moperator-btn.addbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.addItem(t.currentTarget)}),this)),this.$element.on("click",".moperator-btn.delbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.deleteItem(t.currentTarget)}),this)),this.$element.on("change",".moperator-input",n.default.proxy((function(t){this.options.numerical&&this.verifyValueRule(t.currentTarget)}),this)),this.populate()};a.prototype={clear:function(){this.options={item:[{operator:"",operator_index:0,value:""}],operator_order:["-",">","<","==",">=","<=","!="],item_min:1,item_max:3,numerical:!0,limit:{min:-1/0,max:1/0}},this.populate()},destroy:function(){this.$element.find("table.moperator").off(),this.$element.find("table.moperator").remove(),this.$element.data("daai.operationtable"),this.$element.removeData("daai.operationtable"),this.$element.data("daai.operationtable"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({item:[{operator:"",operator_index:0,value:""}],operator_order:this.options.operator_order,item_min:1,item_max:3,numerical:!0,limit:{min:-1/0,max:1/0}},t),this.populate()},resetTable:function(){this.options.item=[{operator:"",operator_index:0,value:""}];var t=this.render();this.$element.html(t),this.itemBannedAction()},populate:function(){var t=this.render();this.$element.html(t),this.itemBannedAction()},render:function(){for(var t=this.options,e=0,i=t.item.length;e<i;e++){var n=t.operator_order.indexOf(t.item[e].operator);t.item[e].operator_index=-1==n?0:n}var s="";s+='<table class="moperator" id="'+this.uiid+'">',s+='  <thead class="moperator-header">',s+="    <tr>",s+='      <td class="moperator-title moperator-title-left" id="'+this.uiid+'-title-left">'+this.string.Operator+"</td>",s+='      <td class="moperator-title moperator-title-right" id="'+this.uiid+'-title-right">'+this.string.Value+"</td>",s+="      <td></td>",s+="    </tr>",s+="  </thead>",s+='  <tbody class="moperator-body">';for(var a=0,o=t.item.length>t.item_max?t.item_max:t.item.length;a<o;a++){s+='<tr class="moperator-item '+this.uiid+'-item" data-item="'+a+'">',s+='  <td class="moperator-td">',s+='    <select class="moperator-select '+this.uiid+'-select" data-item="'+a+'">';for(var l=0,r=t.operator_order.length;l<r;l+=1)s+='      <option value="'+l+'" '+(t.item[a].operator_index==l?" selected":"")+">"+t.operator_order[l]+"</option>";s+="    </select>",s+="  </td>",s+='  <td class="moperator-td">',t.numerical?s+='    <input class="moperator-input '+this.uiid+'-input" type="text" value="'+t.item[a].value+'" data-item="'+a+'" data-previous="'+(t.item[a].previous_value?t.item[a].previous_value:"")+'" data-min="'+(t.limit.min?t.limit.min:-1/0)+'" data-max="'+(t.limit.max?t.limit.max:1/0)+'">':s+='    <input class="moperator-input '+this.uiid+'-input" type="text" value="'+t.item[a].value+'" data-item="'+a+'">',s+="  </td>",s+='  <td class="moperator-td moperator-btns">',s+='    <span class="moperator-btn addbtn" data-item="'+a+'"><i class="fas fa-plus"></i></span>',s+='    <span class="moperator-btn delbtn" data-item="'+a+'"><i class="fas fa-minus"></i></span>',s+="  </td>",s+="</tr>"}return s+="  </tbody>",s+="</table>"},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();n.default(t).hasClass("addbtn")&&i.length<this.options.item_max&&i.splice(e+1,0,{operator:"",operator_index:0,value:""}),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction()},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();n.default(t).hasClass("delbtn")&&i.length>this.options.item_min&&i.splice(e,1),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction()},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({operator:"",operator_index:0,value:"",previous_value:""})})),t.sort((function(t,e){return t.item>e.item?1:-1})),n.default("."+this.uiid+"-select").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).find("option:selected").text();t[i].operator=s})),n.default("."+this.uiid+"-input").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).val(),a=n.default(this).attr("data-previous");t[i].value=s,t[i].previous_value=a})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=[],n=0,s=t.length;n<s;n++){e.push({operator:"",operator_index:0,value:""});var a=this.options.operator_order.indexOf(t[n].operator);e[n].operator_index=-1==a?0:a,e[n].operator=t[n].operator,e[n].value=t[n].value}for(var o=0,l=e.length;o<l;o++)"-"==e[o].operator&&""==e[o].value||i.push({operator:e[o].operator,operator_index:e[o].operator_index,value:e[o].value});return i},itemBannedAction:function(){(!this.options.item||this.options.item.length<1)&&(this.options.item=[]),this.options.item.length<=this.options.item_min?n.default("#"+this.uiid).find(".moperator-btn.delbtn").addClass("banned-action"):this.options.item.length>=this.options.item_max&&n.default("#"+this.uiid).find(".moperator-btn.addbtn").addClass("banned-action")},verifyValueRule:function(t){var e=Number(n.default(t).val()),i=Number(n.default(t).attr("data-min")),s=Number(n.default(t).attr("data-max")),a=n.default(t).attr("data-previous");e=parseInt(e),!isNaN(Number(e))&&e>=i&&e<=s?n.default(t).attr("data-previous",e):n.default(t).val(a)}};var o=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.defaults={item_min:1,item_max:3,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],left:[{value:"",label:"-"}],right:[{value:"",label:"-"}]},this.string={Left:"Left Table",Right:"Right Table"},e.string&&(this.string=e.string),this.options=Object.assign({item_min:1,item_max:3,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],left:[{value:"",label:"-"}],right:[{value:"",label:"-"}]},e),this.$element.on("click",".addbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.addItem(t.currentTarget)}),this)),this.$element.on("click",".delbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.deleteItem(t.currentTarget)}),this)),this.populate()};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}o.prototype={clear:function(){this.options={item_min:1,item_max:3,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],left:this.options.left,right:this.options.right},this.populate()},destroy:function(){this.$element.find("table.mselector").off(),this.$element.find("table.mselector").remove(),this.$element.data("daai.mselector"),this.$element.removeData("daai.mselector"),this.$element.data("daai.mselector"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({item_min:1,item_max:3,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],left:this.options.left,right:this.options.right},t),this.populate()},populate:function(){if(0!=this.options.item.length){for(var t=[],e=0,i=this.options.item.length;e<i;e++)this.options.item[e].hasOwnProperty("left_value")&&this.options.item[e].hasOwnProperty("left_label")&&this.options.item[e].hasOwnProperty("right_value")&&this.options.item[e].hasOwnProperty("right_label")&&t.push(this.options.item[e]);this.options.item=t}0==this.options.item.length&&(this.options.item=[{left_value:"",left_label:"-",right_value:"",right_label:"-"}]);var n=this.render();this.$element.html(n),this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="mselector" id="'+this.uiid+'-table">',e+='  <thead class="mselector-header">',e+="    <tr>",e+='      <td class="mselector-title mselector-title-left" id="'+this.uiid+'-title-left">'+this.string.Left+"</td>",e+='      <td class="mselector-title mselector-title-right" id="'+this.uiid+'-title-right">'+this.string.Right+"</td>",e+="      <td></td>",e+="    </tr>",e+="  </thead>",e+='  <tbody class="mselector-body">';for(var i=[],n=[],s=0,a=t.item.length>t.item_max?t.item_max:t.item.length;s<a;s++){var o=this.genList(t.item[s].left_value,i,t.left),l=this.genList(t.item[s].right_value,n,t.right);e+='    <tr class="mselector-item '+this.uiid+'-item" data-item="'+s+'">',e+='      <td class="mselector-td">',e+='        <select class="mselector-select mselector-left '+this.uiid+'-select" data-item="'+s+'">',e+='          <option value="">-</option>',e+=o,e+="        </select>",e+="      </td>",e+='      <td class="mselector-td">',e+='        <select class="mselector-select mselector-right '+this.uiid+'-select" data-item="'+s+'">',e+='          <option value="">-</option>',e+=l,e+="        </select>",e+="      </td>",e+='      <td class="mselector-td mselector-btns">',e+='        <span class="mselector-btn addbtn" data-item="'+s+'"><i class="fas fa-plus"></i></span>',e+='        <span class="mselector-btn delbtn" data-item="'+s+'"><i class="fas fa-minus"></i></span>',e+="      </td>",e+="    </tr>",i.push(t.item[s].left_value),n.push(t.item[s].right_value)}return e+="  </tbody>",e+="</table>"},genList:function(t,e,i){for(var n="",s=0,a="",o="",l=i.length;s<l;s++,a="",o=""){o=i[s].value==t?" selected ":"";for(var r=0,c=e.length;r<c;r++)if(i[s].value==e[r]){a=" hidden ";break}""==i[s].value&&"-"==i[s].label||(n+='<option value="'+i[s].value+'"'+o+a+">"+i[s].label+"</option>")}return n},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();i.length<this.options.item_max&&""!==i[e].left_value&&""!==i[e].right_value&&i.splice(e+1,0,{left_value:"",left_label:"-",right_value:"",right_label:"-"}),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction()},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();i.length>this.options.item_min&&i.splice(e,1),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction()},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({left_value:"",left_label:"",right_value:"",right_label:""})})),n.default("."+this.uiid+"-select.mselector-left").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).find("option:selected").val(),a=n.default(this).find("option:selected").text();t[i].left_value=s,t[i].left_label=a})),n.default("."+this.uiid+"-select.mselector-right").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).find("option:selected").val(),a=n.default(this).find("option:selected").text();t[i].right_value=s,t[i].right_label=a})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""===t[i].left_value&&"-"===t[i].left_label&&""===t[i].right_value&&"-"===t[i].right_label||e.push({left_value:t[i].left_value,left_label:t[i].left_label,right_value:t[i].right_value,right_label:t[i].right_label});return e},itemBannedAction:function(){(!this.options.item||this.options.item.length<1)&&(this.options.item=[]),this.options.item.length<=this.options.item_min?n.default("#"+this.uiid).find(".mselector-btn.delbtn").addClass("mselector-banned-action"):this.options.item.length>=this.options.item_max&&n.default("#"+this.uiid).find(".mselector-btn.addbtn").addClass("mselector-banned-action"),n.default("."+this.uiid+"-item:not(:last-child)").each((function(t,e){n.default(this).find(".mselector-select").addClass("mselector-banned-action"),n.default(this).find(".mselector-btn.addbtn").addClass("mselector-banned-action")}))}};var c=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={min:e,max:i},this.occupation=[],this.availability=[{min:e,max:i}]}var e,i,n;return e=t,i=[{key:"setOccupation",value:function(t){var e=this;return this.occupation.length=0,t.forEach((function(t){t.hasOwnProperty("min")&&t.hasOwnProperty("max")&&t.min<=t.max&&t.min>=e.options.min&&t.min<=e.options.max&&t.max>=e.options.min&&t.max<=e.options.max&&e.occupation.push({min:t.min,max:t.max})})),this.occupation.sort((function(t,e){return t.min>e.min?1:-1})),this._updateAvailability(),this}},{key:"getOccupation",value:function(){return this.occupation}},{key:"setAvailability",value:function(t){var e=this;return this.availability.length=0,t.forEach((function(t){t.hasOwnProperty("min")&&t.hasOwnProperty("max")&&t.min<=t.max&&t.min>=e.options.min&&t.min<=e.options.max&&t.max>=e.options.min&&t.max<=e.options.max&&e.availability.push({min:t.min,max:t.max})})),this.availability.sort((function(t,e){return t.min>e.min?1:-1})),this._updateOccupation(),this}},{key:"getAvailability",value:function(t){return this.availability}},{key:"matchSegment",value:function(t,e){if(this._segInSegment(e,this.availability))return e;if(t.min!=e.min){var i=this._isPtInSegment(e.min,this.availability,!0,!0),n=this._isPtInSegment(e.max,this.availability,!0,!0);if(i){var s=this._ptInSegment(e.min,this.availability,!0,!1);if(s)return this._segInSegment({min:e.min,max:s.max},this.availability,!0)?{min:e.min,max:s.max}:s}else if(n){var a=this._ptInSegment(e.max,this.availability,!1,!0);if(a)return this._segInSegment({min:a.min,max:e.max},this.availability,!0)?{min:a.min,max:e.max}:a}}else{var o=this._isPtInSegment(e.min,this.availability,!0,!0);if(this._isPtInSegment(e.max,this.availability,!0,!0)){var l=this._ptInSegment(e.max,this.availability,!1,!0);if(l)return this._segInSegment({min:l.min,max:e.max},this.availability,!0)?{min:l.min,max:e.max}:l}else if(o){var r=this._ptInSegment(e.min,this.availability,!0,!1);if(r)return this._segInSegment({min:e.min,max:r.max},this.availability,!0)?{min:e.min,max:r.max}:r}}return this.availability.length>0?this.availability[0]:t}},{key:"_updateAvailability",value:function(){this.availability.length=0;for(var t=this.options.min,e=0,i=this.occupation.length;e<i;e++)t<this.occupation[e].min&&this.availability.push({min:t,max:this.occupation[e].min}),t=this.occupation[e].max;t<this.options.max&&this.availability.push({min:t,max:this.options.max})}},{key:"_updateOccupation",value:function(){this.occupation.length=0;for(var t=this.options.min,e=0,i=this.availability.length;e<i;e++)t<this.availability[e].min&&this.occupation.push({min:t,max:this.availability[e].min}),t=this.availability[e].max;t<this.options.max&&this.occupation.push({min:t,max:this.options.max})}},{key:"_segInSegment",value:function(t,e){for(var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0,s=e.length;n<s;n++)if(i&&t.min>=e[n].min&&t.min<=e[n].max&&t.max>=e[n].min&&t.max<=e[n].max||!i&&t.min>e[n].min&&t.min<e[n].max&&t.max>e[n].min&&t.max<e[n].max)return e[n];return null}},{key:"_ptInSegment",value:function(t,e){for(var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=0,a=e.length;s<a;s++)if(i&&t>=e[s].min&&n&&t<=e[s].max||!i&&t>e[s].min&&n&&t<=e[s].max||i&&t>=e[s].min&&!n&&t<e[s].max||!i&&t>e[s].min&&!n&&t<e[s].max)return{min:e[s].min,max:e[s].max};return null}},{key:"_isPtInSegment",value:function(t,e){for(var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=0,a=e.length;s<a;s++)if(i&&t>=e[s].min&&n&&t<=e[s].max||!i&&t>e[s].min&&n&&t<=e[s].max||i&&t>=e[s].min&&!n&&t<e[s].max||!i&&t>e[s].min&&!n&&t<e[s].max)return!0;return!1}}],i&&l(e.prototype,i),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u=function(t,e){this.$element=n.default(t),this.defaults={item_min:1,item_max:3,item:[{name:"",from:0,to:100}],replace:!1,limit:{min:0,max:100}},this.options=Object.assign({item_min:1,item_max:3,item:[{name:"",from:0,to:100}],replace:!1,limit:{min:0,max:100}},e),this.uiid=this.$element.attr("id"),this.sliders=[],this.onSilderFinishCb=this.onSilderFinish.bind(this),this.seg=new c(this.options.limit.min,this.options.limit.max),this.$element.on("click",".addbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.addItem(t.currentTarget)}),this)),this.$element.on("click",".delbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.deleteItem(t.currentTarget)}),this)),this.$element.on("input",".msliders-input",n.default.proxy((function(t){t.stopImmediatePropagation(),n.default(t.currentTarget).next().hide()}),this)),this.populate()};u.prototype={clear:function(){this.options={item_min:1,item_max:3,item:[{name:"",from:0,to:100}],replace:!1,limit:{min:0,max:100}},this.setSlider(),this.itemBannedAction()},destroy:function(){return this.$element.find("div.msliders-item").remove(),this.$element.data("daai.msliders"),this.$element.removeData("daai.msliders"),this.$element.data("daai.msliders"),this.$element.off(),this.$element[0].outerHTML},update:function(t){this.options=Object.assign({item_min:1,item_max:3,item:[{name:"",from:0,to:100}],replace:!1,limit:{min:0,max:100}},t),this.setSlider(),this.itemBannedAction()},populate:function(){var t=this.render();this.$element.html(t),this.setSlider(),this.itemBannedAction()},render:function(){for(var t=this.options,e="",i=0,n=t.item_max;i<n;i++){var s=t.item[i]?' data-min="'+t.limit.min+'" data-max="'+t.limit.max+'" ':' style="display: none;" ',a=t.item[i]?t.item[i].name:"";e+='<div class="msliders-item" data-item="'+i+'" id="'+this.uiid+"-item"+i+'"'+s+">",e+='  <div class="msliders-header">',e+='    <span class="msliders-title">Name</span>',e+='    <input class="msliders-input" type="text" value="'+a+'"><i class="fas fa-exclamation-circle msliders-icon" style="display: none;"></i>',e+='    <div class="msliders-btns">',e+='      <span class="msliders-btn addbtn" data-curr="'+this.uiid+"-item"+i+'" data-next="'+this.uiid+"-item"+(i+1)+'"><i class="fas fa-plus"></i></span>',e+='      <span class="msliders-btn delbtn" data-curr="'+this.uiid+"-item"+i+'" data-prev="'+this.uiid+"-item"+(i-1)+'"><i class="fas fa-minus"></i></span>',e+="    </div>",e+="  </div>",e+='  <div class="msliders-body">',e+='    <input class="msliders-slider" id="'+this.uiid+"-slider"+i+'" type="text" data-item="'+i+'" data-prev-start="0" data-prev-end="0">',e+="  </div>",e+="</div>"}return e},setSlider:function(){for(var t={},e=0,i=this.options.item_max;e<i;e++)t={min:this.options.limit.min,max:this.options.limit.max,from:this.options.item[e]?this.options.item[e].from:0,to:this.options.item[e]?this.options.item[e].to:0,type:"double",hide_min_max:!0,keyboard:!0,step:1,prefix:"",force_edges:!0,grid_num:10,grid:!0,onFinish:this.onSilderFinishCb},this.sliders[e]?this.sliders[e].update(t):this.sliders[e]=new s("#"+this.uiid+"-slider"+e,t,0),n.default("#"+this.uiid+"-slider"+e).attr("data-prev-start",t.from).attr("data-prev-end",t.to),n.default("#"+this.uiid+"-item"+e).removeClass("item-sep").removeAttr("style").hide(),n.default("#"+this.uiid+"-item"+e).find(".msliders-btn").removeAttr("style");for(var a=0,o=this.options.item.length;a<o;a++)n.default("#"+this.uiid+"-item"+a).find(".msliders-input").val(this.options.item[a].name),a<o-1?(n.default("#"+this.uiid+"-item"+a).show().css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),n.default("#"+this.uiid+"-item"+a).find(".addbtn, .delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"})):a==o-1?(n.default("#"+this.uiid+"-item"+a).show().css({cursor:"auto","pointer-events":"auto",opacity:"1"}),n.default("#"+this.uiid+"-item"+a).find(".addbtn, .delbtn").removeAttr("style")):a>o-1&&n.default("#"+this.uiid+"-item"+a).hide();var l=this.verifySegment();this.options.replace||(!l||l.length<1)&&n.default("#"+this.uiid+"-item0").find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"})},onSilderFinish:function(t){if(this.options.replace)this.itemBannedAction();else{var e={min:parseInt(n.default("#"+t.input[0].id).attr("data-prev-start")),max:parseInt(n.default("#"+t.input[0].id).attr("data-prev-end"))},i={min:t.from,max:t.to},s=[],a=parseInt(n.default("#"+t.input[0].id).attr("data-item"));if(a<1)s=[];else for(var o=0,l=a;o<l;o++){var r=this.sliders[o];s.push({min:r.result.from,max:r.result.to})}var c=this.seg.setOccupation(s).matchSegment(e,i);if(c.min!=t.from||c.max!=t.to){n.default("#"+t.input[0].id).attr("data-prev-start",c.min).attr("data-prev-end",c.max);var u=n.default("#"+t.input[0].id).attr("data-item");this.sliders[u].update({from:c.min,to:c.max})}var d=this.verifySegment();!d||d.length<1?n.default("#"+this.uiid+"-item"+a).find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}):n.default("#"+this.uiid+"-item"+a).find(".addbtn").css({cursor:"auto","pointer-events":"auto",opacity:"1"}),this.itemBannedAction()}},addItem:function(t){var e=n.default(t).attr("data-curr"),i=n.default(t).attr("data-next"),s=n.default("#"+e).find(".msliders-input").val();s?n.default("#"+e).find(".msliders-icon").hide():n.default("#"+e).find(".msliders-icon").show(),n.default("#"+i).find(".msliders-icon").hide(),n.default("#"+i).find(".msliders-item").removeAttr("style"),n.default("#"+i).find(".msliders-input").val("");var a=n.default("#"+i).attr("data-item"),o=this.sliders[a],l=this.verifySegment();if(this.options.replace)s&&(n.default("#"+e).addClass("item-sep").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),n.default("#"+e).find(".addbtn, .delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),o.update({from:l.length>0?l[0].min:0,to:l.length>0?l[0].max:100}),n.default("#"+i).find(".msliders-slider").attr("data-prev-start",0).attr("data-prev-end",100),n.default("#"+i).show());else{s&&l.length>0&&(n.default("#"+e).addClass("item-sep").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),n.default("#"+e).find(".addbtn, .delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"1"}),o.update({from:l[0].min,to:l[0].max}),n.default("#"+i).find(".msliders-slider").attr("data-prev-start",l[0].min).attr("data-prev-end",l[0].max),n.default("#"+i).show());var r=this.verifySegment();!r||r.length<1?n.default("#"+i).find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}):n.default("#"+i).find(".addbtn").css({cursor:"auto","pointer-events":"auto",opacity:"0.3"})}this.itemBannedAction()},deleteItem:function(t){var e=n.default(t).attr("data-curr"),i=n.default(t).attr("data-prev"),s=n.default("#"+e).attr("data-item"),a=this.sliders[s];n.default("#"+i).removeClass("item-sep").css({cursor:"auto","pointer-events":"auto",opacity:"1"}),n.default("#"+e).hide(),a.update({from:this.options.limit.min,to:this.options.limit.max}),n.default("#"+i).find(".addbtn, .delbtn").removeAttr("style"),n.default("#"+e).find(".msliders-input").val(""),this.itemBannedAction()},getItems:function(){for(var t=[],e=0,i=this.options.item_max;e<i;e++)if("none"!=n.default("#"+this.uiid+"-item"+e).css("display")){t.push({name:"",from:"",to:""});var s=n.default("#"+this.uiid+"-item"+e).attr("data-item"),a=n.default("#"+this.uiid+"-item"+e).find(".msliders-input").val(),o=this.sliders[s];t[s].name=a,t[s].from=o.result.from,t[s].to=o.result.to}return t},itemBannedAction:function(){var t=n.default("#"+this.uiid).find(".msliders-item:visible").length,e=this.options;n.default("#"+this.uiid).find(".msliders-item").each((function(i){"none"!=n.default(this).css("display")&&(t<=e.item_min&&n.default(this).find(".delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),t>=e.item_max&&n.default(this).find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}))}))},verifySegment:function(){for(var t=[],e=0,i=this.options.item_max;e<i;e++)if("none"!=n.default("#"+this.uiid+"-item"+e).css("display")){var s=n.default("#"+this.uiid+"-item"+e).attr("data-item"),a=this.sliders[s];t.push({min:a.result.from,max:a.result.to})}return this.seg.setOccupation(t).getAvailability()},verifyInputName:function(){var t=!0;return n.default("#"+this.uiid).find(".msliders-item").each((function(e){"none"!=n.default(this).css("display")&&(n.default(this).find(".msliders-input").val()||(t=!1,n.default(this).find(".msliders-icon").show()))})),t}};var d=function(){this.createPosition=function(t){t.ui=t.ui||{},t.ui.version="1.12.0",
/*!
      * jQuery UI Position 1.12.0
      * http://jqueryui.com
      *
      * Copyright jQuery Foundation and other contributors
      * Released under the MIT license.
      * http://jquery.org/license
      *
      * http://api.jqueryui.com/position/
      */
function(){var e,i,n=Math.max,s=Math.abs,a=Math.round,o=/left|center|right/,l=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;function h(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function m(e,i){return parseInt(t.css(e,i),10)||0}function p(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}i=function(){var e=t("<div>").css("position","absolute").appendTo("body").offset({top:1.5,left:1.5}),n=1.5===e.offset().top;return e.remove(),i=function(){return n},n},t.position={scrollbarWidth:function(){if(void 0!==e)return e;var i,n,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return t("body").append(s),i=a.offsetWidth,s.css("overflow","scroll"),i===(n=a.offsetWidth)&&(n=s[0].clientWidth),s.remove(),e=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:!n&&!s?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);e=t.extend({},e);var u,f,g,v,b,_,x=t(e.of),y=t.position.getWithinInfo(e.within),$=t.position.getScrollInfo(y),w=(e.collision||"flip").split(" "),C={};return _=p(x),x[0].preventDefault&&(e.at="left top"),f=_.width,g=_.height,v=_.offset,b=t.extend({},v),t.each(["my","at"],(function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",t=r.exec(n[0]),i=r.exec(n[1]),C[this]=[t?t[0]:0,i?i[0]:0],e[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?b.left+=f:"center"===e.at[0]&&(b.left+=f/2),"bottom"===e.at[1]?b.top+=g:"center"===e.at[1]&&(b.top+=g/2),u=h(C.at,f,g),b.left+=u[0],b.top+=u[1],this.each((function(){var o,l,r=t(this),c=r.outerWidth(),d=r.outerHeight(),p=m(this,"marginLeft"),_=m(this,"marginTop"),k=c+p+m(this,"marginRight")+$.width,I=d+_+m(this,"marginBottom")+$.height,M=t.extend({},b),T=h(C.my,r.outerWidth(),r.outerHeight());"right"===e.my[0]?M.left-=c:"center"===e.my[0]&&(M.left-=c/2),"bottom"===e.my[1]?M.top-=d:"center"===e.my[1]&&(M.top-=d/2),M.left+=T[0],M.top+=T[1],i()||(M.left=a(M.left),M.top=a(M.top)),o={marginLeft:p,marginTop:_},t.each(["left","top"],(function(i,n){t.ui.position[w[i]]&&t.ui.position[w[i]][n](M,{targetWidth:f,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:o,collisionWidth:k,collisionHeight:I,offset:[u[0]+T[0],u[1]+T[1]],my:e.my,at:e.at,within:y,elem:r})})),e.using&&(l=function(t){var i=v.left-M.left,a=i+f-c,o=v.top-M.top,l=o+g-d,u={target:{element:x,left:v.left,top:v.top,width:f,height:g},element:{element:r,left:M.left,top:M.top,width:c,height:d},horizontal:a<0?"left":i>0?"right":"center",vertical:l<0?"top":o>0?"bottom":"middle"};f<c&&s(i+a)<f&&(u.horizontal="center"),g<d&&s(o+l)<g&&(u.vertical="middle"),n(s(i),s(a))>n(s(o),s(l))?u.important="horizontal":u.important="vertical",e.using.call(this,t,u)}),r.offset(t.extend(M,{using:l}))}))},t.ui.position={fit:{left:function(t,e){var i,s=e.within,a=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,l=t.left-e.collisionPosition.marginLeft,r=a-l,c=l+e.collisionWidth-o-a;e.collisionWidth>o?r>0&&c<=0?(i=t.left+r+e.collisionWidth-o-a,t.left+=r-i):t.left=c>0&&r<=0?a:r>c?a+o-e.collisionWidth:a:r>0?t.left+=r:c>0?t.left-=c:t.left=n(t.left-l,t.left)},top:function(t,e){var i,s=e.within,a=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,l=t.top-e.collisionPosition.marginTop,r=a-l,c=l+e.collisionHeight-o-a;e.collisionHeight>o?r>0&&c<=0?(i=t.top+r+e.collisionHeight-o-a,t.top+=r-i):t.top=c>0&&r<=0?a:r>c?a+o-e.collisionHeight:a:r>0?t.top+=r:c>0?t.top-=c:t.top=n(t.top-l,t.top)}},flip:{left:function(t,e){var i,n,a=e.within,o=a.offset.left+a.scrollLeft,l=a.width,r=a.isWindow?a.scrollLeft:a.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-r,d=c+e.collisionWidth-l-r,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,m="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];u<0?((i=t.left+h+m+p+e.collisionWidth-l-o)<0||i<s(u))&&(t.left+=h+m+p):d>0&&((n=t.left-e.collisionPosition.marginLeft+h+m+p-r)>0||s(n)<d)&&(t.left+=h+m+p)},top:function(t,e){var i,n,a=e.within,o=a.offset.top+a.scrollTop,l=a.height,r=a.isWindow?a.scrollTop:a.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-r,d=c+e.collisionHeight-l-r,h="top"===e.my[1],m=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((n=t.top+m+p+f+e.collisionHeight-l-o)<0||n<s(u))&&(t.top+=m+p+f):d>0&&((i=t.top-e.collisionPosition.marginTop+m+p+f-r)>0||s(i)<d)&&(t.top+=m+p+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position}},h=function(){this.createContextMenu=function(t){var e;t.support.htmlMenuitem="HTMLMenuItemElement"in window,t.support.htmlCommand="HTMLCommandElement"in window,t.support.eventSelectstart="onselectstart"in document.documentElement,t.ui&&t.widget||(t.cleanData=(e=t.cleanData,function(i){var n,s,a;for(a=0;null!=i[a];a++){s=i[a];try{(n=t._data(s,"events"))&&n.remove&&t(s).triggerHandler("remove")}catch(t){}}e(i)}));var i=null,n=!1,s=t(window),a=0,o={},l={},r={},c={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var i=this.offset();i.top+=this.outerHeight(),i.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(i)}},position:function(t,e,i){var n;if(e||i){if("maintain"===e&&"maintain"===i)n=t.$menu.position();else{var a=t.$menu.offsetParent().offset();n={top:i-a.top,left:e-a.left}}var o=s.scrollTop()+s.height(),l=s.scrollLeft()+s.width(),r=t.$menu.outerHeight(),c=t.$menu.outerWidth();n.top+r>o&&(n.top-=r),n.top<0&&(n.top=0),n.left+c>l&&(n.left-=c),n.left<0&&(n.left=0),t.$menu.css(n)}else t.determinePosition.call(this,t.$menu)},positionSubmenu:function(e){if(void 0!==e)if(t.ui&&t.ui.position)e.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:-9,left:this.outerWidth()-5};e.css(i)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{preShow:t.noop,show:t.noop,hide:t.noop,activated:t.noop},callback:null,items:{}},u={timer:null,pageX:null,pageY:null},d={abortevent:function(t){t.preventDefault(),t.stopImmediatePropagation()},contextmenu:function(e){var n=t(this);if(!1!==e.data.events.preShow(n,e)&&("right"===e.data.trigger&&(e.preventDefault(),e.stopImmediatePropagation()),!("right"!==e.data.trigger&&"demand"!==e.data.trigger&&e.originalEvent||!(void 0===e.mouseButton||!e.data||"left"===e.data.trigger&&0===e.mouseButton||"right"===e.data.trigger&&2===e.mouseButton)||n.hasClass("context-menu-active")||n.hasClass("context-menu-disabled")))){if(i=n,e.data.build){var s=e.data.build(i,e);if(!1===s)return;if(e.data=t.extend(!0,{},c,e.data,s||{}),!e.data.items||t.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");e.data.$trigger=i,h.create(e.data)}h.show.call(n,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var n=t(this);i&&i.length&&!i.is(n)&&i.data("contextMenu").$menu.trigger("contextmenu:hide"),2===e.button&&(i=n.data("contextMenuActive",!0))},mouseup:function(e){var n=t(this);n.data("contextMenuActive")&&i&&i.length&&i.is(n)&&!n.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),i=n,n.trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))),n.removeData("contextMenuActive")},mouseenter:function(e){var n=t(this),s=t(e.relatedTarget),a=t(document);s.is(".context-menu-list")||s.closest(".context-menu-list").length||i&&i.length||(u.pageX=e.pageX,u.pageY=e.pageY,u.data=e.data,a.on("mousemove.contextMenuShow",d.mousemove),u.timer=setTimeout((function(){u.timer=null,a.off("mousemove.contextMenuShow"),i=n,n.trigger(t.Event("contextmenu",{data:u.data,pageX:u.pageX,pageY:u.pageY}))}),e.data.delay))},mousemove:function(t){u.pageX=t.pageX,u.pageY=t.pageY},mouseleave:function(e){var i=t(e.relatedTarget);if(!i.is(".context-menu-list")&&!i.closest(".context-menu-list").length){try{clearTimeout(u.timer)}catch(e){}u.timer=null}},layerClick:function(e){var i,n,a=t(this).data("contextMenuRoot"),o=e.button,l=e.pageX,r=e.pageY,c=void 0===l;e.preventDefault(),setTimeout((function(){if(c)null!=a&&null!==a.$menu&&void 0!==a.$menu&&a.$menu.trigger("contextmenu:hide");else{var u,d="left"===a.trigger&&0===o||"right"===a.trigger&&2===o;if(document.elementFromPoint&&a.$layer){if(a.$layer.hide(),null!==(i=document.elementFromPoint(l-s.scrollLeft(),r-s.scrollTop()))&&i.isContentEditable){var h=document.createRange(),m=window.getSelection();h.selectNode(i),h.collapse(!0),m.removeAllRanges(),m.addRange(h)}t(i).trigger(e),a.$layer.show()}if(a.hideOnSecondTrigger&&d&&null!==a.$menu&&void 0!==a.$menu)a.$menu.trigger("contextmenu:hide");else{if(a.reposition&&d)if(document.elementFromPoint){if(a.$trigger.is(i))return void a.position.call(a.$trigger,a,l,r)}else if(n=a.$trigger.offset(),u=t(window),n.top+=u.scrollTop(),n.top<=e.pageY&&(n.left+=u.scrollLeft(),n.left<=e.pageX&&(n.bottom=n.top+a.$trigger.outerHeight(),n.bottom>=e.pageY&&(n.right=n.left+a.$trigger.outerWidth(),n.right>=e.pageX))))return void a.position.call(a.$trigger,a,l,r);i&&d&&a.$trigger.one("contextmenu:hidden",(function(){t(i).contextMenu({x:l,y:r,button:o})})),null!=a&&null!==a.$menu&&void 0!==a.$menu&&a.$menu.trigger("contextmenu:hide")}}}),50)},keyStop:function(t,e){e.isInput||t.preventDefault(),t.stopPropagation()},key:function(t){var e={};i&&(e=i.data("contextMenu")||{}),void 0===e.zIndex&&(e.zIndex=0);var n=0;if(function t(e){""!==e.style.zIndex?n=e.style.zIndex:null!==e.offsetParent&&void 0!==e.offsetParent?t(e.offsetParent):null!==e.parentElement&&void 0!==e.parentElement&&t(e.parentElement)}(t.target),!(e.$menu&&parseInt(n,10)>parseInt(e.$menu.css("zIndex"),10))){switch(t.keyCode){case 9:case 38:if(d.keyStop(t,e),e.isInput){if(9===t.keyCode&&t.shiftKey)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void(null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("prevcommand"));if(38===t.keyCode&&"checkbox"===e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault()}else if(9!==t.keyCode||t.shiftKey)return void(null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("prevcommand"));break;case 40:if(d.keyStop(t,e),!e.isInput)return void(null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("nextcommand"));if(9===t.keyCode)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void(null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("nextcommand"));if(40===t.keyCode&&"checkbox"===e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault();break;case 37:if(d.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){var s=e.$selected.parent().parent();return e.$selected.trigger("contextmenu:blur"),void(e.$selected=s)}break;case 39:if(d.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;var a=e.$selected.data("contextMenu")||{};if(a.$menu&&e.$selected.hasClass("context-menu-submenu"))return e.$selected=null,a.$selected=null,void a.$menu.trigger("nextcommand");break;case 35:case 36:return e.$selected&&e.$selected.find("input, textarea, select").length?void 0:((e.$selected&&e.$selected.parent()||e.$menu).children(":not(."+e.classNames.disabled+", ."+e.classNames.notSelectable+")")[36===t.keyCode?"first":"last"]().trigger("contextmenu:focus"),void t.preventDefault());case 13:if(d.keyStop(t,e),e.isInput){if(e.$selected&&!e.$selected.is("textarea, select"))return void t.preventDefault();break}return void(void 0!==e.$selected&&null!==e.$selected&&e.$selected.trigger("mouseup"));case 32:case 33:case 34:return void d.keyStop(t,e);case 27:return d.keyStop(t,e),void(null!==e.$menu&&void 0!==e.$menu&&e.$menu.trigger("contextmenu:hide"));default:var o=String.fromCharCode(t.keyCode).toUpperCase();if(e.accesskeys&&e.accesskeys[o])return void e.accesskeys[o].$node.trigger(e.accesskeys[o].$menu?"contextmenu:focus":"mouseup")}t.stopPropagation(),void 0!==e.$selected&&null!==e.$selected&&e.$selected.trigger(t)}},prevItem:function(e){e.stopPropagation();var i=t(this).data("contextMenu")||{},n=t(this).data("contextMenuRoot")||{};if(i.$selected){var s=i.$selected;(i=i.$selected.parent().data("contextMenu")||{}).$selected=s}for(var a=i.$menu.children(),o=i.$selected&&i.$selected.prev().length?i.$selected.prev():a.last(),l=o;o.hasClass(n.classNames.disabled)||o.hasClass(n.classNames.notSelectable)||o.is(":hidden");)if((o=o.prev().length?o.prev():a.last()).is(l))return;i.$selected&&d.itemMouseleave.call(i.$selected.get(0),e),d.itemMouseenter.call(o.get(0),e);var r=o.find("input, textarea, select");r.length&&r.focus()},nextItem:function(e){e.stopPropagation();var i=t(this).data("contextMenu")||{},n=t(this).data("contextMenuRoot")||{};if(i.$selected){var s=i.$selected;(i=i.$selected.parent().data("contextMenu")||{}).$selected=s}for(var a=i.$menu.children(),o=i.$selected&&i.$selected.next().length?i.$selected.next():a.first(),l=o;o.hasClass(n.classNames.disabled)||o.hasClass(n.classNames.notSelectable)||o.is(":hidden");)if((o=o.next().length?o.next():a.first()).is(l))return;i.$selected&&d.itemMouseleave.call(i.$selected.get(0),e),d.itemMouseenter.call(o.get(0),e);var r=o.find("input, textarea, select");r.length&&r.focus()},focusInput:function(){var e=t(this).closest(".context-menu-item"),i=e.data(),n=i.contextMenu,s=i.contextMenuRoot;s.$selected=n.$selected=e,s.isInput=n.isInput=!0},blurInput:function(){var e=t(this).closest(".context-menu-item").data(),i=e.contextMenu;e.contextMenuRoot.isInput=i.isInput=!1},menuMouseenter:function(){t(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(e){var i=t(this).data().contextMenuRoot;i.$layer&&i.$layer.is(e.relatedTarget)&&(i.hovering=!1)},itemMouseenter:function(e){var i=t(this),n=i.data(),s=n.contextMenu,a=n.contextMenuRoot;a.hovering=!0,e&&a.$layer&&a.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation()),(s.$menu?s:a).$menu.children("."+a.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"),i.hasClass(a.classNames.disabled)||i.hasClass(a.classNames.notSelectable)?s.$selected=null:i.trigger("contextmenu:focus")},itemMouseleave:function(e){var i=t(this),n=i.data(),s=n.contextMenu,a=n.contextMenuRoot;if(a!==s&&a.$layer&&a.$layer.is(e.relatedTarget))return void 0!==a.$selected&&null!==a.$selected&&a.$selected.trigger("contextmenu:blur"),e.preventDefault(),e.stopImmediatePropagation(),void(a.$selected=s.$selected=s.$node);s&&s.$menu&&s.$menu.hasClass("context-menu-visible")||i.trigger("contextmenu:blur")},itemClick:function(e){var i,n=t(this),s=n.data(),a=s.contextMenu,o=s.contextMenuRoot,l=s.contextMenuKey;if(!(!a.items[l]||n.is("."+o.classNames.disabled+", .context-menu-separator, ."+o.classNames.notSelectable)||n.is(".context-menu-submenu")&&!1===o.selectableSubMenu)){if(e.preventDefault(),e.stopImmediatePropagation(),t.isFunction(a.callbacks[l])&&Object.prototype.hasOwnProperty.call(a.callbacks,l))i=a.callbacks[l];else{if(!t.isFunction(o.callback))return;i=o.callback}!1!==i.call(o.$trigger,l,o,e)?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&h.update.call(o.$trigger,o)}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(e,i){var n=t(this).data("contextMenuRoot");h.hide.call(n.$trigger,n,i&&i.force)},focusItem:function(e){e.stopPropagation();var i=t(this),n=i.data(),s=n.contextMenu,a=n.contextMenuRoot;i.hasClass(a.classNames.disabled)||i.hasClass(a.classNames.notSelectable)||(i.addClass([a.classNames.hover,a.classNames.visible].join(" ")).parent().find(".context-menu-item").not(i).removeClass(a.classNames.visible).filter("."+a.classNames.hover).trigger("contextmenu:blur"),s.$selected=a.$selected=i,s&&s.$node&&s.$node.hasClass("context-menu-submenu")&&s.$node.addClass(a.classNames.hover),s.$node&&a.positionSubmenu.call(s.$node,s.$menu))},blurItem:function(e){e.stopPropagation();var i=t(this),n=i.data(),s=n.contextMenu,a=n.contextMenuRoot;s.autoHide&&i.removeClass(a.classNames.visible),i.removeClass(a.classNames.hover),s.$selected=null}},h={show:function(e,n,s){var a=t(this),o={};if(t("#context-menu-layer").trigger("mousedown"),e.$trigger=a,!1!==e.events.show.call(a,e))if(!1!==h.update.call(a,e)){if(e.position.call(a,e,n,s),e.zIndex){var l=e.zIndex;"function"==typeof e.zIndex&&(l=e.zIndex.call(a,e)),o.zIndex=function(t){for(var e=0,i=t;e=Math.max(e,parseInt(i.css("z-index"),10)||0),(i=i.parent())&&i.length&&!("html body".indexOf(i.prop("nodeName").toLowerCase())>-1););return e}(a)+l}h.layer.call(e.$menu,e,o.zIndex),e.$menu.find("ul").css("zIndex",o.zIndex+1),e.$menu.css(o)[e.animation.show](e.animation.duration,(function(){a.trigger("contextmenu:visible"),h.activated(e),e.events.activated(e)})),a.data("contextMenu",e).addClass("context-menu-active"),t(document).off("keydown.contextMenu").on("keydown.contextMenu",d.key),e.autoHide&&t(document).on("mousemove.contextMenuAutoHide",(function(t){var i=a.offset();i.right=i.left+a.outerWidth(),i.bottom=i.top+a.outerHeight(),!e.$layer||e.hovering||t.pageX>=i.left&&t.pageX<=i.right&&t.pageY>=i.top&&t.pageY<=i.bottom||setTimeout((function(){e.hovering||null===e.$menu||void 0===e.$menu||e.$menu.trigger("contextmenu:hide")}),50)}))}else i=null;else i=null},hide:function(e,n){var s=t(this);if(e||(e=s.data("contextMenu")||{}),n||!e.events||!1!==e.events.hide.call(s,e)){if(s.removeData("contextMenu").removeClass("context-menu-active"),e.$layer){setTimeout((a=e.$layer,function(){a.remove()}),10);try{delete e.$layer}catch(t){e.$layer=null}}var a;i=null,e.$menu.find("."+e.classNames.hover).trigger("contextmenu:blur"),e.$selected=null,e.$menu.find("."+e.classNames.visible).removeClass(e.classNames.visible),t(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),e.$menu&&e.$menu[e.animation.hide](e.animation.duration,(function(){e.build&&(e.$menu.remove(),t.each(e,(function(t){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:e[t]=void 0;try{delete e[t]}catch(t){}return!0}}))),setTimeout((function(){s.trigger("contextmenu:hidden")}),10)}))}},create:function(e,i){function n(e){var i=t("<span></span>");if(e._accesskey)e._beforeAccesskey&&i.append(document.createTextNode(e._beforeAccesskey)),t("<span></span>").addClass("context-menu-accesskey").text(e._accesskey).appendTo(i),e._afterAccesskey&&i.append(document.createTextNode(e._afterAccesskey));else if(e.isHtmlName){if(void 0!==e.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");i.html(e.name)}else i.text(e.name);return i}void 0===i&&(i=e),e.$menu=t('<ul class="context-menu-list"></ul>').addClass(e.className||"").data({contextMenu:e,contextMenuRoot:i}),e.dataAttr&&t.each(e.dataAttr,(function(t,i){e.$menu.attr("data-"+e.key,i)})),t.each(["callbacks","commands","inputs"],(function(t,n){e[n]={},i[n]||(i[n]={})})),i.accesskeys||(i.accesskeys={}),t.each(e.items,(function(s,a){var o=t('<li class="context-menu-item"></li>').addClass(a.className||""),l=null,c=null;if(o.on("click",t.noop),"string"!=typeof a&&"cm_separator"!==a.type||(a={type:"cm_seperator"}),a.$node=o.data({contextMenu:e,contextMenuRoot:i,contextMenuKey:s}),void 0!==a.accesskey)for(var u,m=function(t){for(var e,i=t.split(/\s+/),n=[],s=0;e=i[s];s++)e=e.charAt(0).toUpperCase(),n.push(e);return n}(a.accesskey),p=0;u=m[p];p++)if(!i.accesskeys[u]){i.accesskeys[u]=a;var f=a.name.match(new RegExp("^(.*?)("+u+")(.*)$","i"));f&&(a._beforeAccesskey=f[1],a._accesskey=f[2],a._afterAccesskey=f[3]);break}if(a.type&&r[a.type])r[a.type].call(o,a,e,i),t.each([e,i],(function(i,n){n.commands[s]=a,!t.isFunction(a.callback)||void 0!==n.callbacks[s]&&void 0!==e.type||(n.callbacks[s]=a.callback)}));else{switch("cm_seperator"===a.type?o.addClass("context-menu-separator "+i.classNames.notSelectable):"html"===a.type?o.addClass("context-menu-html "+i.classNames.notSelectable):"sub"!==a.type&&a.type?(l=t("<label></label>").appendTo(o),n(a).appendTo(l),o.addClass("context-menu-input"),e.hasTypes=!0,t.each([e,i],(function(t,e){e.commands[s]=a,e.inputs[s]=a}))):a.items&&(a.type="sub"),a.type){case"cm_seperator":break;case"text":c=t('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+s).val(a.value||"").appendTo(l);break;case"textarea":c=t('<textarea name=""></textarea>').attr("name","context-menu-input-"+s).val(a.value||"").appendTo(l),a.height&&c.height(a.height);break;case"checkbox":c=t('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+s).val(a.value||"").prop("checked",!!a.selected).prependTo(l);break;case"radio":c=t('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+a.radio).val(a.value||"").prop("checked",!!a.selected).prependTo(l);break;case"select":c=t('<select name=""></select>').attr("name","context-menu-input-"+s).appendTo(l),a.options&&(t.each(a.options,(function(e,i){t("<option></option>").val(e).text(i).appendTo(c)})),c.val(a.selected));break;case"sub":n(a).appendTo(o),a.appendTo=a.$node,o.data("contextMenu",a).addClass("context-menu-submenu"),a.callback=null,"function"==typeof a.items.then?h.processPromises(a,i,a.items):h.create(a,i);break;case"html":t(a.html).appendTo(o);break;default:t.each([e,i],(function(i,n){n.commands[s]=a,!t.isFunction(a.callback)||void 0!==n.callbacks[s]&&void 0!==e.type||(n.callbacks[s]=a.callback)})),n(a).appendTo(o)}a.type&&"sub"!==a.type&&"html"!==a.type&&"cm_seperator"!==a.type&&(c.on("focus",d.focusInput).on("blur",d.blurInput),a.events&&c.on(a.events,e)),a.icon&&(t.isFunction(a.icon)?a._icon=a.icon.call(this,this,o,s,a):"string"!=typeof a.icon||"fab "!==a.icon.substring(0,4)&&"fas "!==a.icon.substring(0,4)&&"fad "!==a.icon.substring(0,4)&&"far "!==a.icon.substring(0,4)&&"fal "!==a.icon.substring(0,4)?"string"==typeof a.icon&&"fa-"===a.icon.substring(0,3)?a._icon=i.classNames.icon+" "+i.classNames.icon+"--fa fa "+a.icon:a._icon=i.classNames.icon+" "+i.classNames.icon+"-"+a.icon:(o.addClass(i.classNames.icon+" "+i.classNames.icon+"--fa5"),a._icon=t('<i class="'+a.icon+'"></i>')),"string"==typeof a._icon?o.addClass(a._icon):o.prepend(a._icon))}a.$input=c,a.$label=l,o.appendTo(e.$menu),!e.hasTypes&&t.support.eventSelectstart&&o.on("selectstart.disableTextSelect",d.abortevent)})),e.$node||e.$menu.css("display","none").addClass("context-menu-root"),e.$menu.appendTo(e.appendTo||document.body)},resize:function(e,i){var n;e.css({position:"absolute",display:"block"}),e.data("width",(n=e.get(0)).getBoundingClientRect?Math.ceil(n.getBoundingClientRect().width):e.outerWidth()+1),e.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),e.find("> li > ul").each((function(){h.resize(t(this),!0)})),i||e.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth((function(){return t(this).data("width")}))},update:function(e,i){var n=this;void 0===i&&(i=e,h.resize(e.$menu));var s=!1;return e.$menu.children().each((function(){var a,o=t(this),l=o.data("contextMenuKey"),r=e.items[l],c=t.isFunction(r.disabled)&&r.disabled.call(n,l,i)||!0===r.disabled;if((a=t.isFunction(r.visible)?r.visible.call(n,l,i):void 0===r.visible||!0===r.visible)&&(s=!0),o[a?"show":"hide"](),o[c?"addClass":"removeClass"](i.classNames.disabled),t.isFunction(r.icon)){o.removeClass(r._icon);var u=r.icon.call(this,n,o,l,r);"string"==typeof u?o.addClass(u):o.prepend(u)}if(r.type)switch(o.find("input, select, textarea").prop("disabled",c),r.type){case"text":case"textarea":r.$input.val(r.value||"");break;case"checkbox":case"radio":r.$input.val(r.value||"").prop("checked",!!r.selected);break;case"select":r.$input.val((0===r.selected?"0":r.selected)||"")}r.$menu&&(h.update.call(n,r,i)&&(s=!0))})),s},layer:function(e,i){var n=e.$layer=t('<div id="context-menu-layer"></div>').css({height:s.height(),width:s.width(),display:"block",position:"fixed","z-index":i-1,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",e).appendTo(document.body).on("contextmenu",d.abortevent).on("mousedown",d.layerClick);return void 0===document.body.style.maxWidth&&n.css({position:"absolute",height:t(document).height()}),n},processPromises:function(t,e,i){function n(t,e,i){void 0===i?(i={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof i&&(i={error:{name:i}}),s(t,e,i)}function s(t,e,i){void 0!==e.$menu&&e.$menu.is(":visible")&&(t.$node.removeClass(e.classNames.iconLoadingClass),t.items=i,h.create(t,e,!0),h.update(t,e),e.positionSubmenu.call(t.$node,t.$menu))}t.$node.addClass(e.classNames.iconLoadingClass),i.then(function(t,e,i){void 0===i&&n(void 0),s(t,e,i)}.bind(this,t,e),n.bind(this,t,e))},activated:function(e){var i=e.$menu,n=i.offset(),s=t(window).height(),a=t(window).scrollTop(),o=i.height();o>s?i.css({height:s+"px","overflow-x":"hidden","overflow-y":"auto",top:a+"px"}):(n.top<a||n.top+o>a+s)&&i.css({top:a+"px"})}};function m(e){return e.id&&t('label[for="'+e.id+'"]').val()||e.name}function p(e,i,n){return n||(n=0),i.each((function(){var i,s,a=t(this),o=this,l=this.nodeName.toLowerCase();switch("label"===l&&a.find("input, textarea, select").length&&(i=a.text(),l=(o=(a=a.children().first()).get(0)).nodeName.toLowerCase()),l){case"menu":s={name:a.attr("label"),items:{}},n=p(s.items,a.children(),n);break;case"a":case"button":s={name:a.text(),disabled:!!a.attr("disabled"),callback:function(){a.get(0).click()}};break;case"menuitem":case"command":switch(a.attr("type")){case void 0:case"command":case"menuitem":s={name:a.attr("label"),disabled:!!a.attr("disabled"),icon:a.attr("icon"),callback:function(){a.get(0).click()}};break;case"checkbox":s={type:"checkbox",disabled:!!a.attr("disabled"),name:a.attr("label"),selected:!!a.attr("checked")};break;case"radio":s={type:"radio",disabled:!!a.attr("disabled"),name:a.attr("label"),radio:a.attr("radiogroup"),value:a.attr("id"),selected:!!a.attr("checked")};break;default:s=void 0}break;case"hr":s="-------";break;case"input":switch(a.attr("type")){case"text":s={type:"text",name:i||m(o),disabled:!!a.attr("disabled"),value:a.val()};break;case"checkbox":s={type:"checkbox",name:i||m(o),disabled:!!a.attr("disabled"),selected:!!a.attr("checked")};break;case"radio":s={type:"radio",name:i||m(o),disabled:!!a.attr("disabled"),radio:!!a.attr("name"),value:a.val(),selected:!!a.attr("checked")};break;default:s=void 0}break;case"select":s={type:"select",name:i||m(o),disabled:!!a.attr("disabled"),selected:a.val(),options:{}},a.children().each((function(){s.options[this.value]=t(this).text()}));break;case"textarea":s={type:"textarea",name:i||m(o),disabled:!!a.attr("disabled"),value:a.val()};break;case"label":break;default:s={type:"html",html:a.clone(!0)}}s&&(n++,e["key"+n]=s)})),n}t.fn.contextMenu=function(e){var i=this,n=e;if(this.length>0)if(void 0===e)this.first().trigger("contextmenu");else if(void 0!==e.x&&void 0!==e.y)this.first().trigger(t.Event("contextmenu",{pageX:e.x,pageY:e.y,mouseButton:e.button}));else if("hide"===e){var s=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;s&&s.trigger("contextmenu:hide")}else"destroy"===e?t.contextMenu("destroy",{context:this}):t.isPlainObject(e)?(e.context=this,t.contextMenu("create",e)):e?this.removeClass("context-menu-disabled"):e||this.addClass("context-menu-disabled");else t.each(l,(function(){this.selector===i.selector&&(n.data=this,t.extend(n.data,{trigger:"demand"}))})),d.contextmenu.call(n.target,n);return this},t.contextMenu=function(e,i){"string"!=typeof e&&(i=e,e="create"),"string"==typeof i?i={selector:i}:void 0===i&&(i={});var s=t.extend(!0,{},c,i||{}),r=t(document),u=r,m=!1;switch(s.context&&s.context.length?(u=t(s.context).first(),s.context=u.get(0),m=!t(s.context).is(document)):s.context=document,e){case"update":if(m)h.update(u);else for(var p in l)l.hasOwnProperty(p)&&h.update(l[p]);break;case"create":if(!s.selector)throw new Error("No selector specified");if(s.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+s.selector+'" as it contains a reserved className');if(!s.build&&(!s.items||t.isEmptyObject(s.items)))throw new Error("No Items specified");if(a++,s.ns=".contextMenu"+a,m||(o[s.selector]=s.ns),l[s.ns]=s,s.trigger||(s.trigger="right"),!n){var f="click"===s.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",g={"contextmenu:focus.contextMenu":d.focusItem,"contextmenu:blur.contextMenu":d.blurItem,"contextmenu.contextMenu":d.abortevent,"mouseenter.contextMenu":d.itemMouseenter,"mouseleave.contextMenu":d.itemMouseleave};g[f]=d.itemClick,r.on({"contextmenu:hide.contextMenu":d.hideMenu,"prevcommand.contextMenu":d.prevItem,"nextcommand.contextMenu":d.nextItem,"contextmenu.contextMenu":d.abortevent,"mouseenter.contextMenu":d.menuMouseenter,"mouseleave.contextMenu":d.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",d.inputClick).on(g,".context-menu-item"),n=!0}switch(u.on("contextmenu"+s.ns,s.selector,s,d.contextmenu),m&&u.on("remove"+s.ns,(function(){t(this).contextMenu("destroy")})),s.trigger){case"hover":u.on("mouseenter"+s.ns,s.selector,s,d.mouseenter).on("mouseleave"+s.ns,s.selector,s,d.mouseleave);break;case"left":u.on("click"+s.ns,s.selector,s,d.click);break;case"touchstart":u.on("touchstart"+s.ns,s.selector,s,d.click)}s.build||h.create(s);break;case"destroy":var v;if(m){var b=s.context;t.each(l,(function(e,i){if(!i)return!0;if(!t(b).is(i.selector))return!0;(v=t(".context-menu-list").filter(":visible")).length&&v.data().contextMenuRoot.$trigger.is(t(i.context).find(i.selector))&&v.trigger("contextmenu:hide",{force:!0});try{l[i.ns].$menu&&l[i.ns].$menu.remove(),delete l[i.ns]}catch(t){l[i.ns]=null}return t(i.context).off(i.ns),!0}))}else if(s.selector){if(o[s.selector]){(v=t(".context-menu-list").filter(":visible")).length&&v.data().contextMenuRoot.$trigger.is(s.selector)&&v.trigger("contextmenu:hide",{force:!0});try{l[o[s.selector]].$menu&&l[o[s.selector]].$menu.remove(),delete l[o[s.selector]]}catch(t){l[o[s.selector]]=null}r.off(o[s.selector])}}else r.off(".contextMenu .contextMenuAutoHide"),t.each(l,(function(e,i){t(i.context).off(i.ns)})),o={},l={},a=0,n=!1,t("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!t.support.htmlCommand&&!t.support.htmlMenuitem||"boolean"==typeof i&&i)&&t('menu[type="context"]').each((function(){this.id&&t.contextMenu({selector:"[contextmenu="+this.id+"]",items:t.contextMenu.fromMenu(this)})})).css("display","none");break;default:throw new Error('Unknown operation "'+e+'"')}return this},t.contextMenu.setInputValues=function(e,i){void 0===i&&(i={}),t.each(e.inputs,(function(t,e){switch(e.type){case"text":case"textarea":e.value=i[t]||"";break;case"checkbox":e.selected=!!i[t];break;case"radio":e.selected=(i[e.radio]||"")===e.value;break;case"select":e.selected=i[t]||""}}))},t.contextMenu.getInputValues=function(e,i){return void 0===i&&(i={}),t.each(e.inputs,(function(t,e){switch(e.type){case"text":case"textarea":case"select":i[t]=e.$input.val();break;case"checkbox":i[t]=e.$input.prop("checked");break;case"radio":e.$input.prop("checked")&&(i[e.radio]=e.value)}})),i},t.contextMenu.fromMenu=function(e){var i={};return p(i,t(e).children()),i},t.contextMenu.defaults=c,t.contextMenu.types=r,t.contextMenu.handle=d,t.contextMenu.op=h,t.contextMenu.menus=l}},m=function(t,e){(this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.options=Object.assign({label:"",select:!1,draggable:!0,dragstart:"dragStart",tool:{insert:!1,config:!1,reload:!1},item:[]},e),this.icons={insert:"fa-plus",delete:"fa-trash",copy:"fa-clone",rename:"fa-edit",convert:"fa-exchange-alt",setting:"fa-cog",export:"fa-file-export",info:"fa-file"},n.default.ui&&n.default.ui.position)||(new d).createPosition(n.default);n.default.contextMenu||(new h).createContextMenu(n.default);this.update(this.options)};m.prototype={clear:function(){this.options={label:"",select:!1,draggable:!0,dragstart:"dragStart",tool:{insert:!1,config:!1,reload:!1},item:[]},n.default(this.$element).find(".munitmenu-title > .munitmenu-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(this.$element).find(".munitmenu-body").removeClass("munitmenu-hidden"),n.default(this.$element).removeClass("munitmenu-collapse"),this.render()},destroy:function(){this.$element.find("div.munitmenu-header").off(),this.$element.find("div.munitmenu-body").off(),this.$element.find("div.munitmenu-header").remove(),this.$element.find("div.munitmenu-body").remove(),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({label:"",select:!1,draggable:!0,dragstart:"dragStart",tool:{insert:!1,config:!1,reload:!1},item:[]},t),this.$element.find("div.munitmenu-header").off(),this.$element.find("div.munitmenu-body").off(),this.$element.find("div.munitmenu-header").remove(),this.$element.find("div.munitmenu-body").remove(),this.render(),this.$element.find("div.munitmenu-header").on("click",".munitmenu-title > .munitmenu-icon",n.default.proxy((function(t){this.toggleUnitMenu(t.currentTarget)}),this)),this.$element.find("div.munitmenu-header").on("click",".munitmenu-btn > .munitmenu-icon",n.default.proxy((function(t){this.selectUnitMenu(t.currentTarget)}),this)),this.$element.find("div.munitmenu-body").on("click",".munitmenu-item-group > .munitmenu-item-name",n.default.proxy((function(t){this.toggleItem(t.currentTarget)}),this)),this.$element.find("div.munitmenu-body").on("click",".munitmenu-item",n.default.proxy((function(t){this.selectItem(t)}),this))},render:function(){var t=this.options,e=[];e+='<div class="munitmenu-header" data-select="'+t.select+'">',e+='  <span class="munitmenu-title">',e+='    <i class="munitmenu-icon fa fa-chevron-down"></i>'+t.label,e+="  </span>",e+='  <span class="munitmenu-btn">',null!=t.tool.insert&&!0===t.tool.insert&&(e+='    <i class="munitmenu-icon fa fa-plus" id="'+this.uiid+'-insert" data-menu="'+this.uiid+'" data-type="insert"></i>'),null!=t.tool.config&&!0===t.tool.config&&(e+='    <i class="munitmenu-icon fa fa-cog" id="'+this.uiid+'-config" data-menu="'+this.uiid+'" data-type="config"></i>'),null!=t.tool.reload&&!0===t.tool.reload&&(e+='    <i class="munitmenu-icon fa fa-sync-alt" id="'+this.uiid+'-reload"  data-menu="'+this.uiid+'" data-type="reload"></i>'),e+="  </span>",e+="</div>",e+='<div class="munitmenu-body">';for(var i=0,n=t.item.length;i<n;i++){if("branch"===t.item[i].type?e+='<li class="munitmenu-item" id="'+t.item[i].id+'" data-type="'+t.item[i].type+'" data-title="'+t.item[i].label+'">':null!=t.draggable&&1==t.draggable?e+='<li class="munitmenu-item '+this.uiid+'-munitmenu-item" id="'+t.item[i].id+'" draggable="'+t.draggable+'" ondragstart="'+t.dragstart+'(event)" data-type="'+t.item[i].type+'" data-title="'+t.item[i].label+'" data-selected="'+t.item[i].selected+'">':e+='<li class="munitmenu-item '+this.uiid+'-munitmenu-item" id="'+t.item[i].id+'" draggable="'+t.draggable+'" data-type="'+t.item[i].type+'" data-title="'+t.item[i].label+'" data-selected="'+t.item[i].selected+'">',e+='  <span class="munitmenu-item-name">',e+='    <i class="munitmenu-item-icon fa fa-chevron-down"></i>',e+='    <span class="munitmenu-item-title">'+t.item[i].label+"</span>",t.item[i].menu&&(e+='    <span class="munitmenu-item-btn munitmenu-pull-right '+this.uiid+'-list-btn" id="'+t.item[i].id+'-btn" data-item="'+t.item[i].id+'" data-title="'+t.item[i].label+'">',e+='      <i class="fa fa-ellipsis-v"></i>',e+="    </span>"),e+="  </span>",e+='  <ul class="munitmenu-content">',t.item[i].subitems)for(var s=0,a=t.item[i].subitems.length;s<a;s++)null!=t.draggable&&1==t.draggable?e+='  <li class="munitmenu-item '+this.uiid+'-munitmenu-item" id="'+t.item[i].subitems[s].id+'" draggable="'+t.draggable+'" ondragstart="'+t.dragstart+'(event)" data-type="'+t.item[i].subitems[s].type+'" data-title="'+t.item[i].subitems[s].label+'" data-selected="'+t.item[i].subitems[s].selected+'">':e+='  <li class="munitmenu-item '+this.uiid+'-munitmenu-item" id="'+t.item[i].subitems[s].id+'" draggable="'+t.draggable+'" data-type="'+t.item[i].subitems[s].type+'" data-title="'+t.item[i].subitems[s].label+'" data-selected="'+t.item[i].subitems[s].selected+'">',e+='    <span class="munitmenu-item-name">',e+='      <i class="munitmenu-item-icon fa fa-chevron-down"></i>',e+='      <span class="munitmenu-item-title">'+t.item[i].subitems[s].label+"</span>",t.item[i].subitems[s].menu&&(e+='      <span class="munitmenu-item-btn munitmenu-pull-right '+this.uiid+'-list-btn" id="'+t.item[i].subitems[s].id+'-btn" data-item="'+t.item[i].subitems[s].id+'" data-title="'+t.item[i].subitems[s].label+'">',e+='        <i class="fa fa-ellipsis-v"></i>',e+="      </span>"),e+="    </span>",e+="  </li>";e+="  </ul>",e+="</li>"}e+="</div>",this.populate(this.$element,t,e)},populate:function(t,e,i){this.$element.html(i),this.contextMenuTxt(t,e),n.default(".munitmenu-item").each((function(t){var e=n.default(this).attr("id");"item"===n.default(this).attr("data-type")&&n.default('[id="'+e+'"]').find(".munitmenu-item-icon, .munitmenu-content").remove(),"branch"===n.default(this).attr("data-type")&&n.default(this).addClass("munitmenu-item-group"),"true"===n.default(this).attr("data-selected")&&n.default('[id="'+e+'"]').addClass("active")}))},contextMenuTxt:function(t,e){for(var i=[],s=0,a=e.item.length;s<a;s++){if(e.item[s].menu){for(var o={},l=0,r=e.item[s].menu.length;l<r;l++)o[e.item[s].menu[l].mid]={name:e.item[s].menu[l].label,icon:this.icons[e.item[s].menu[l].type]};i={selector:'[id="'+e.item[s].id+'-btn"]',trigger:"left",hideOnSecondTrigger:!0,items:o,callback:this.selectContextItem.bind(this)},n.default.contextMenu&&n.default.contextMenu(i)}if(e.item[s].subitems)for(var c=0,u=e.item[s].subitems.length;c<u;c++){var d={};if(e.item[s].subitems[c].menu){for(var h=0,m=e.item[s].subitems[c].menu.length;h<m;h++)d[e.item[s].subitems[c].menu[h].mid]={name:e.item[s].subitems[c].menu[h].label,icon:this.icons[e.item[s].subitems[c].menu[h].type]};i={selector:'[id="'+e.item[s].subitems[c].id+'-btn"]',trigger:"left",hideOnSecondTrigger:!0,items:d,callback:this.selectContextItem.bind(this)},n.default.contextMenu&&n.default.contextMenu(i)}}}},toggleUnitMenu:function(t){n.default(t).hasClass("fa-chevron-down")?(n.default(t).removeClass("fa-chevron-down").addClass("fa-chevron-right"),n.default(t).parents(".munitmenu-header").next(".munitmenu-body").addClass("munitmenu-hidden"),n.default(t).parents(".munitmenu-container").addClass("munitmenu-collapse")):n.default(t).hasClass("fa-chevron-right")&&(n.default(t).removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(t).parents(".munitmenu-header").next(".munitmenu-body").removeClass("munitmenu-hidden"),n.default(t).parents(".munitmenu-container").removeClass("munitmenu-collapse"))},toggleItem:function(t){n.default(t).find(".munitmenu-item-icon").hasClass("fa-chevron-down")?(n.default(t).find(".munitmenu-item-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right"),n.default(t).next(".munitmenu-content").addClass("munitmenu-hidden")):n.default(t).find(".munitmenu-item-icon").hasClass("fa-chevron-right")&&(n.default(t).find(".munitmenu-item-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(t).next(".munitmenu-content").removeClass("munitmenu-hidden"))},selectUnitMenu:function(t){var e=n.default(t).attr("id"),i=n.default(t).attr("data-type"),s=n.default(t).attr("data-menu");if(this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectmenu",{id:e,type:i,title:s});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectmenu");else{var a=new CustomEvent("selectmenu",{detail:{id:e,type:i,title:s}});this.$element[0].dispatchEvent(a)}},selectItem:function(t){var e,i;if(n.default("#"+this.uiid).children().attr("data-select")&&n.default(t.currentTarget).hasClass("munitmenu-item")&&!n.default(t.currentTarget).hasClass("munitmenu-item-group")&&!n.default(t.target).hasClass("fa"))if(n.default("."+this.uiid+"-munitmenu-item.active").removeClass("active"),n.default(t.currentTarget).addClass("active"),e=n.default(t.currentTarget).attr("id"),i=n.default(t.currentTarget).attr("data-title"),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectitem",{id:e,type:"select",title:i});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectitem");else{var s=new CustomEvent("selectitem",{detail:{id:e,type:"select",title:i}});this.$element[0].dispatchEvent(s)}},selectContextItem:function(t,e){var i=n.default(e.$trigger).attr("data-item"),s=n.default(e.$trigger).attr("data-title");if(this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectcontext",{id:i,type:t,title:s});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectcontext");else{var a=new CustomEvent("selectcontext",{detail:{id:i,type:t,title:s}});this.$element[0].dispatchEvent(a)}}};var p=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.defaults={item:[{name:"",value:""}],length:"",replace:!1,item_min:1,item_max:3,limit:{min:1,max:100}},this.options=Object.assign({item:[{name:"",value:""}],length:"",replace:!1,item_min:1,item_max:3,limit:{min:1,max:100}},e),this.$element.on("click",".minput-btn.addbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.addItem(t.currentTarget)}),this)),this.$element.on("click",".minput-btn.delbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.deleteItem(t.currentTarget)}),this)),this.$element.on("change",".minput-input.minput-item-value",n.default.proxy((function(t){this.verifyValueRule(t.currentTarget),this.itemBannedAction()}),this)),this.populate()};p.prototype={clear:function(){this.options={item:[{name:"",value:"",len:""}],length:"",replace:!1,item_min:1,item_max:3,limit:{min:1,max:100}},this.setItem(),this.itemBannedAction()},destroy:function(){this.$element.find("table.minput").off(),this.$element.find("table.minput").remove(),this.$element.data("daai.minput"),this.$element.removeData("daai.minput"),this.$element.data("daai.minput"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({item:[{name:"",value:"",len:""}],item_min:1,item_max:3,limit:{min:1,max:100},length:"",replace:!1},t),this.setItem(),this.itemBannedAction()},populate:function(){var t=this.render();this.$element.html(t),this.setItem(),this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="minput" id="'+this.uiid+'">',e+='  <thead class="minput-header">',e+="    <tr>",e+='      <td class="minput-title minput-title-left" id="'+this.uiid+'-title-left">Name</td>',e+='      <td class="minput-title minput-title-right" id="'+this.uiid+'-title-right">Percent</td>',e+='      <td class="minput-title minput-title-len" id="'+this.uiid+'-title-len">Len</td>',e+="      <td></td>",e+="    </tr>",e+="  </thead>",e+='  <tbody class="minput-body">';for(var i=0,n=t.item_max;i<n;i++){var s=t.item[i]?' data-min="'+t.limit.min+'" data-max="'+t.limit.max+'" ':' style="display: none;" ';e+='<tr class="minput-item '+this.uiid+'-item" id="'+this.uiid+"-item"+i+'" data-item="'+i+'"'+s+">",e+='  <td class="minput-td">',e+='    <input class="minput-input minput-item-name '+this.uiid+'-input" type="text" id="'+this.uiid+"-input-name"+i+'" value="" data-item="'+i+'">',e+="  </td>",e+='  <td class="minput-td">',e+='    <input class="minput-input minput-input-sm minput-item-value '+this.uiid+'-input" type="text" id="'+this.uiid+"-input-value"+i+'" value="" data-item="'+i+'" data-previous="" data-min="'+t.limit.min+'" data-max="'+t.limit.max+'" data-length="'+t.length+'">',e+="  </td>",e+='  <td class="minput-td">',e+='    <input class="minput-input minput-input-sm minput-item-len '+this.uiid+'-input" type="text" value="" data-item="'+i+'" data-length="'+t.length+'" disabled>',e+="  </td>",e+='  <td class="minput-td minput-btns">',e+='    <span class="minput-btn addbtn" data-item="'+i+'" data-curr="'+this.uiid+"-item"+i+'" data-next="'+this.uiid+"-item"+(i+1)+'"><i class="fas fa-plus"></i></span>',e+='    <span class="minput-btn delbtn" data-item="'+i+'" data-curr="'+this.uiid+"-item"+i+'" data-prev="'+this.uiid+"-item"+(i-1)+'"><i class="fas fa-minus"></i></span>',e+="  </td>",e+="</tr>"}return e+="  </tbody>",e+="</table>"},setItem:function(){for(var t=0,e=this.options.item_max;t<e;t++)n.default("#"+this.uiid+"-item"+t).removeAttr("style").hide(),n.default("#"+this.uiid+"-item"+t).find(".minput-input").val("").attr("data-previous",""),n.default("#"+this.uiid+"-item"+t).find(".minput-btn").removeAttr("style");for(var i=0,s=this.options.item.length;i<s;i++){var a=this.verifyRange();this.options.item[i].value&&(this.options.item[i].len=Math.floor(this.options.item[i].value*this.options.length/100)),n.default("#"+this.uiid+"-item"+i).find(".minput-item-name").val(this.options.item[i].name),n.default("#"+this.uiid+"-item"+i).find(".minput-item-value").val(this.options.item[i].value),n.default("#"+this.uiid+"-item"+i).find(".minput-item-len").val(this.options.item[i].len),i<s-1?(n.default("#"+this.uiid+"-item"+i).show().css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),n.default("#"+this.uiid+"-item"+i).find(".addbtn, .delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"1"})):i==s-1?(this.options.replace||n.default("#"+this.uiid+"-item"+i).find(".minput-item-value").attr("data-max",a),n.default("#"+this.uiid+"-item"+i).show().css({cursor:"auto","pointer-events":"auto",opacity:"1"}),n.default("#"+this.uiid+"-item"+i).find(".addbtn, .delbtn").removeAttr("style")):i>s-1&&n.default("#"+this.uiid+"-item"+i).hide()}var o=this.verifyRange();this.options.replace||o&&0!==o||n.default("#"+this.uiid+"-item0").find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"})},addItem:function(t){var e=n.default(t).attr("data-curr"),i=n.default(t).attr("data-next"),s=n.default("#"+e).find(".minput-item-name").val(),a=n.default("#"+e).find(".minput-item-value").val(),o=this.verifyRange();n.default("#"+i).find(".minput-item-value").attr("data-previous",""),n.default("#"+i).find(".minput-item").removeAttr("style"),n.default("#"+i).find(".minput-input").val(""),this.options.replace?s&&a&&(n.default("#"+e).css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),n.default("#"+e).find(".addbtn, .delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"1"}),n.default("#"+i).show()):s&&a&&o>0&&(n.default("#"+e).css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),n.default("#"+e).find(".addbtn, .delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"1"}),n.default("#"+i).find(".minput-item-value").attr("data-max",o),n.default("#"+i).show()),this.itemBannedAction()},deleteItem:function(t){var e=n.default(t).attr("data-curr"),i=n.default(t).attr("data-prev");n.default("#"+e).hide(),n.default("#"+e).find(".minput-input").val(""),n.default("#"+i).css({cursor:"auto","pointer-events":"auto",opacity:"1"}),n.default("#"+i).find(".addbtn, .delbtn").removeAttr("style"),this.itemBannedAction()},getCurrentItems:function(){var t=[],e=this.options;n.default("."+this.uiid+"-item").each((function(e){t.push({name:"",value:"",previous_value:"",len:""})})),t.sort((function(t,e){return t.item>e.item?1:-1})),n.default("."+this.uiid+"-input.minput-item-name").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).val();t[i].name=s}));var i=this.options.length;return n.default("."+this.uiid+"-input.minput-item-value").each((function(s){var a=parseInt(n.default(this).attr("data-item")),o=i,l=""===n.default(this).val()?"":Number(n.default(this).val()),r=n.default(this).attr("data-previous");t[a].value=l,t[a].previous_value=r,""!==l&&l>=e.limit.min&&l<=e.limit.max?t[a].len=Math.floor(o*l/100):t[a].len=""})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""===t[i].name&&""===t[i].value||0===t[i].value||e.push({name:t[i].name,value:t[i].value});return e},itemBannedAction:function(){var t=n.default("#"+this.uiid).find(".minput-item:visible").length,e=this.options;n.default("#"+this.uiid).find(".minput-item").each((function(i){if("none"!=n.default(this).css("display")){var s=n.default(this).attr("data-item");t<=e.item_min&&n.default(this).find(".delbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"}),t>=e.item_max&&s==t-1&&n.default(this).find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"})}}))},verifyValueRule:function(t){var e=n.default(t).attr("data-item"),i=n.default(t).val(),s=Number(n.default(t).attr("data-min")),a=Number(n.default(t).attr("data-max")),o=n.default(t).attr("data-previous"),l=this.options.length;!isNaN(Number(i))&&""!==i&&i>=s&&i<=a?n.default(t).val(Number(i)).attr("data-previous",i):n.default(t).val(o);var r,c=""===n.default(t).val()?"":Number(n.default(t).val());if(r=""===c?"":Math.floor(c*l/100),n.default(t).parent().next().find(".minput-item-len").val(r),!this.options.replace){var u=this.verifyRange();u&&0!==u?n.default("#"+this.uiid+"-item"+e).find(".addbtn").css({cursor:"auto","pointer-events":"auto",opacity:"1"}):n.default("#"+this.uiid+"-item"+e).find(".addbtn").css({cursor:"not-allowed","pointer-events":"none",opacity:"0.3"})}},verifyRange:function(){for(var t=[],e=0,i=this.options.item_max;e<i;e++)if("none"!=n.default("#"+this.uiid+"-item"+e).css("display")){var s=Number(n.default("#"+this.uiid+"-item"+e).find(".minput-item-value").val());t.push(s)}return this.getAvailability(t)},getAvailability:function(t){for(var e=this.options.limit.max,i=0,n=t.length;i<n;i++)t[i]>=this.options.limit.min&&t[i]<=this.options.limit.max&&(e-=t[i]);return e},verifyInputName:function(){var t=!0;return n.default("#"+this.uiid).find(".minput-item").each((function(e){"none"!=n.default(this).css("display")&&(n.default(this).find(".minput-input").val()||(t=!1,n.default(this).find(".minput-icon").show()))})),t}};var f=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.defaults={item_min:1,item_max:3,item:[{value:"",label:"-"}],columns:[{value:"",label:"-"}]},this.options=Object.assign({item_min:1,item_max:3,item:[{value:"",label:"-"}],columns:[{value:"",label:"-"}]},e),this.$element.on("click",".addbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.addItem(t.currentTarget)}),this)),this.$element.on("click",".delbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.deleteItem(t.currentTarget)}),this)),this.$element.on("change",".colselector-select",n.default.proxy((function(t){t.stopImmediatePropagation(),this.changeItem(t.currentTarget)}),this)),this.populate()};f.prototype={clear:function(){this.options={item_min:1,item_max:3,item:[{value:"",label:"-"}],columns:this.options.columns},this.populate()},destroy:function(){this.$element.find("table.colselector").off(),this.$element.find("table.colselector").remove(),this.$element.data("daai.colselector"),this.$element.removeData("daai.colselector"),this.$element.data("daai.colselector"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({item_min:1,item_max:3,item:[{value:"",label:"-"}],columns:this.options.columns},t),this.populate()},populate:function(){if(0!=this.options.item.length){for(var t=[],e=0,i=this.options.item.length;e<i;e++)this.options.item[e].hasOwnProperty("value")&&this.options.item[e].hasOwnProperty("label")&&t.push(this.options.item[e]);this.options.item=t}0==this.options.item.length&&(this.options.item=[{value:"",label:"-"}]);var n=this.render();this.$element.html(n),this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="colselector" id="'+this.uiid+'-table">',e+='  <tbody class="colselector-body">';for(var i=[],n=0,s=t.item.length>t.item_max?t.item_max:t.item.length;n<s;n++){var a=this.genList(t.item[n].value,i,t.columns);e+='    <tr class="colselector-item '+this.uiid+'-item" data-item="'+n+'">',e+='      <td class="colselector-td">',e+='        <select class="colselector-select '+this.uiid+'-select" data-item="'+n+'">',e+='          <option value="">-</option>',e+=a,e+="        </select>",e+="      </td>",e+='      <td class="colselector-td colselector-btns">',e+='        <span class="colselector-btn addbtn" data-item="'+n+'"><i class="fas fa-plus"></i></span>',e+='        <span class="colselector-btn delbtn" data-item="'+n+'"><i class="fas fa-minus"></i></span>',e+="      </td>",e+="    </tr>",i.push(t.item[n].value)}return e+="  </tbody>",e+="</table>"},genList:function(t,e,i){for(var n="",s=0,a="",o="",l=i.length;s<l;s++,a="",o=""){o=i[s].value==t?" selected ":"";for(var r=0,c=e.length;r<c;r++)if(i[s].value==e[r]){a=" hidden ";break}""==i[s].value&&"-"==i[s].label||(n+='<option value="'+i[s].value+'"'+o+a+">"+i[s].label+"</option>")}return n},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();i.length<this.options.item_max&&i[e].value&&i.splice(e+1,0,{value:"",label:"-"}),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"add",i)},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();i.length>this.options.item_min&&i.splice(e,1),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"delete",i)},changeItem:function(t){var e=this.getCurrentItems();this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"change",e)},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({value:"",label:""})})),n.default("."+this.uiid+"-select.colselector-select").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).find("option:selected").val(),a=n.default(this).find("option:selected").text();t[i].value=s,t[i].label=a})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""===t[i].value&&"-"===t[i].label||e.push({value:t[i].value,label:t[i].label});return e},itemBannedAction:function(){(!this.options.item||this.options.item.length<1)&&(this.options.item=[]);var t="#"+this.uiid;n.default(t).find(".colselector-select").each((function(e,i){var s=n.default(this).attr("data-item"),a=!n.default(this).val();n.default(t).find(".colselector-btn.addbtn").each((function(t,e){var i=n.default(this).attr("data-item");return s==i&&(n.default(this).removeClass("colselector-banned-action"),a&&n.default(this).addClass("colselector-banned-action")),!1}))})),this.options.item.length<=this.options.item_min&&n.default(t).find(".colselector-btn.delbtn").addClass("colselector-banned-action"),(this.options.item.length>=this.options.item_max||this.options.item_max<=1)&&n.default(t).find(".colselector-btn.addbtn").addClass("colselector-banned-action"),n.default("."+this.uiid+"-item:not(:last-child)").each((function(t,e){n.default(this).find(".colselector-select").addClass("colselector-banned-action"),n.default(this).find(".colselector-btn.addbtn").addClass("colselector-banned-action")}))}};var g=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.defaults={item_min:1,item_max:3,exclusive:!1,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],columns:[{value:"",label:"-"}],match:{undefined:[{value:"",label:"-"}]}},this.options=Object.assign({item_min:1,item_max:3,exclusive:!1,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],columns:[{value:"",label:"-"}],match:{undefined:[{value:"",label:"-"}]}},e),this.$element.on("click",".addbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.addItem(t.currentTarget)}),this)),this.$element.on("click",".delbtn",n.default.proxy((function(t){t.stopImmediatePropagation(),this.deleteItem(t.currentTarget)}),this)),this.$element.on("change",".pairselector-left",n.default.proxy((function(t){this.updateLeftSelector()}),this)),this.$element.on("change",".pairselector-right",n.default.proxy((function(t){this.updateRightSelector()}),this)),this.populate()};g.prototype={clear:function(){this.options={item_min:1,item_max:3,exclusive:!1,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],columns:this.options.columns,match:this.options.match},this.populate()},destroy:function(){this.$element.find("table.pairselector").off(),this.$element.find("table.pairselector").remove(),this.$element.data("daai.pairselector"),this.$element.removeData("daai.pairselector"),this.$element.data("daai.pairselector"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({item_min:1,item_max:3,exclusive:!1,item:[{left_value:"",left_label:"-",right_value:"-",right_label:"-"}],columns:this.options.columns,match:this.options.match},t),this.populate()},populate:function(){if(0!=this.options.item.length){for(var t=[],e=0,i=this.options.item.length;e<i;e++)this.options.item[e].hasOwnProperty("left_value")&&this.options.item[e].hasOwnProperty("left_label")&&this.options.item[e].hasOwnProperty("right_value")&&this.options.item[e].hasOwnProperty("right_label")&&t.push(this.options.item[e]);this.options.item=t}0==this.options.item.length&&(this.options.item=[{left_value:"",left_label:"-",right_value:"",right_label:"-"}]);var n=this.render();this.$element.html(n),this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="pairselector" id="'+this.uiid+'-table">',e+='  <tbody class="pairselector-body">';for(var i=[],n=[],s=0,a=t.item.length>t.item_max?t.item_max:t.item.length;s<a;s++){var o=this.genList(t.item[s].left_value,i,t.columns),l=this.genMatchList(t.item[s].right_value,n,t.match[t.item[s].left_value]);e+='    <tr class="pairselector-item '+this.uiid+'-item" data-item="'+s+'">',e+='      <td class="pairselector-td">',e+='        <select class="pairselector-select-left pairselector-left '+this.uiid+'-select" data-item="'+s+'">',e+='          <option value="">-</option>',e+=o,e+="        </select>",e+="      </td>",e+='      <td class="pairselector-td">',e+='        <select class="pairselector-select-right pairselector-right '+this.uiid+'-select" data-item="'+s+'">',e+='          <option value="">-</option>',e+=l,e+="        </select>",e+="      </td>",e+='      <td class="pairselector-td pairselector-btns">',e+='        <span class="pairselector-btn addbtn" data-item="'+s+'"><i class="fas fa-plus"></i></span>',e+='        <span class="pairselector-btn delbtn" data-item="'+s+'"><i class="fas fa-minus"></i></span>',e+="      </td>",e+="    </tr>",this.options.exclusive&&i.push(t.item[s].left_value)}return e+="  </tbody>",e+="</table>"},genList:function(t,e,i){for(var n="",s=0,a="",o="",l=i.length;s<l;s++,a="",o=""){o=i[s].value==t?" selected ":"";for(var r=0,c=e.length;r<c;r++)if(i[s].value==e[r]){a=" hidden ";break}""==i[s].value&&"-"==i[s].label||(n+='<option value="'+i[s].value+'"'+o+a+">"+i[s].label+"</option>")}return n},genMatchList:function(t,e,i){i||(i=[{value:"",label:"-"}]);for(var n="",s=0,a="",o="",l=i.length;s<l;s++,a="",o=""){o=i[s].value==t?" selected ":"";for(var r=0,c=e.length;r<c;r++)if(i[s].value==e[r]){a=" hidden ";break}""==i[s].value&&"-"==i[s].label||(n+='<option value="'+i[s].value+'"'+o+a+">"+i[s].label+"</option>")}return n},updateLeftSelector:function(t){parseInt(n.default(t).attr("data-item")),this.options.item=this.getCurrentItems();var e=this.render();this.$element.html(e),this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"change",this.options.item,"left")},updateRightSelector:function(t){parseInt(n.default(t).attr("data-item")),this.options.item=this.getCurrentItems();var e=this.render();this.$element.html(e),this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"change",this.options.item,"right")},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();i.length<this.options.item_max&&""!==i[e].left_value&&""!==i[e].right_value&&i.splice(e+1,0,{left_value:"",left_label:"-",right_value:"",right_label:"-"}),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"add",i)},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();i.length>this.options.item_min&&i.splice(e,1),this.options.item=i;var s=this.render();this.$element.html(s),this.itemBannedAction(),this.options.onItems&&"function"==typeof this.options.onItems&&this.options.onItems(this.uiid,"delete",i)},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({left_value:"",left_label:"",right_value:"",right_label:""})})),n.default("."+this.uiid+"-select.pairselector-left").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).find("option:selected").val(),a=n.default(this).find("option:selected").text();t[i].left_value=s,t[i].left_label=a})),n.default("."+this.uiid+"-select.pairselector-right").each((function(e){var i=parseInt(n.default(this).attr("data-item")),s=n.default(this).find("option:selected").val(),a=n.default(this).find("option:selected").text();t[i].right_value=s,t[i].right_label=a})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""===t[i].left_value&&"-"===t[i].left_label&&""===t[i].right_value&&"-"===t[i].right_label||e.push({left_value:t[i].left_value,left_label:t[i].left_label,right_value:t[i].right_value,right_label:t[i].right_label});return e},itemBannedAction:function(){(!this.options.item||this.options.item.length<1)&&(this.options.item=[]);var t="#"+this.uiid;n.default(t).find(".pairselector-select-left").each((function(e,i){var s=n.default(this).attr("data-item"),a=!n.default(this).val(),o=!0;n.default(t).find(".pairselector-select-right").each((function(t,e){var i=n.default(this).attr("data-item");if(s==i)return o=!n.default(this).val(),!1}));var l=a||o;n.default(t).find(".pairselector-btn.addbtn").each((function(t,e){var i=n.default(this).attr("data-item");if(s==i)return n.default(this).removeClass("pairselector-banned-action"),l&&n.default(this).addClass("pairselector-banned-action"),!1}))})),(this.options.item.length<=this.options.item_min||this.options.item_min<=1&&this.options.item_max<=1)&&n.default(t).find(".pairselector-btn.delbtn").addClass("pairselector-banned-action"),(this.options.item.length>=this.options.item_max||this.options.item_max<=1)&&n.default(t).find(".pairselector-btn.addbtn").addClass("pairselector-banned-action"),n.default("."+this.uiid+"-item:not(:last-child)").each((function(t,e){n.default(this).find(".pairselector-select-left").addClass("pairselector-banned-action"),n.default(this).find(".pairselector-select-right").addClass("pairselector-banned-action"),n.default(this).find(".pairselector-btn.addbtn").addClass("pairselector-banned-action")}))}};var v=function(t,e){(this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.default={label:"",collapse:null,select:!1,draggable:!0,dragstart:"dragStart",tool:[],activeType:"disabled",item:[],srcpath:""},this.options=JSON.parse(JSON.stringify(e)),this.options=Object.assign({},this.default,this.options,e.onAction?{onAction:e.onAction}:""),n.default.ui&&n.default.ui.position)||(new d).createPosition(n.default);n.default.contextMenu||(new h).createContextMenu(n.default);this.$element.on("click",".miconmenu-title > .miconmenu-icon",n.default.proxy((function(t){this.toggleIconMenu(t.currentTarget)}),this)),this.$element.on("click",".miconmenu-btn > .miconmenu-icon, .miconmenu-btn > .miconmenu-img",n.default.proxy((function(t){this.selectIconMenu(t.currentTarget)}),this)),this.$element.on("click",".miconmenu-item-group > .miconmenu-item-name",n.default.proxy((function(t){n.default(t.target).hasClass("fa-ellipsis-v")||n.default(t.target).hasClass("miconmenu-item-btn")||this.toggleItemGroup(t.currentTarget)}),this)),this.$element.on("click",".miconmenu-title > .miconmenu-icon",n.default.proxy((function(t){n.default(t.target).hasClass("fa-ellipsis-v")||n.default(t.target).hasClass("miconmenu-item-btn")||this.toggleTitleItemGroup(t.currentTarget)}),this)),this.$element.on("click",".miconmenu-item",n.default.proxy((function(t){n.default(t.currentTarget).hasClass("miconmenu-item-group")||this.selectItem(t)}),this)),this.$element.on("input",".miconmenu-filter-input",n.default.proxy((function(t){this.filterItem(t)}),this)),this.$element.on("click",".miconmenu-filter-clear-btn",n.default.proxy((function(t){n.default(t.target).siblings(".miconmenu-filter-input").val("").trigger("input")}),this)),this.update(this.options)};v.prototype={clear:function(t){null==t&&(t=!0,this.$element.find("div.miconmenu-header > .miconmenu-title > .miconmenu-icon").hasClass("fa-chevron-down")&&(t=!1));t?(n.default(this.$element).find(".miconmenu-title > .miconmenu-icon").addClass("fa-chevron-right").removeClass("fa-chevron-down"),n.default(this.$element).find(".miconmenu-body").addClass("miconmenu-hidden"),n.default(this.$element).addClass("miconmenu-collapse")):(n.default(this.$element).find(".miconmenu-title > .miconmenu-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(this.$element).find(".miconmenu-body").removeClass("miconmenu-hidden"),n.default(this.$element).removeClass("miconmenu-collapse")),this.options=JSON.parse(JSON.stringify(this.default)),this.render(t)},destroy:function(){this.$element.find("div.miconmenu-header").off(),this.$element.find("div.miconmenu-body").off(),this.$element.find("div.miconmenu-header").remove(),this.$element.find("div.miconmenu-body").remove(),this.$element[0].outerHTML=""},collapse:function(){return!this.$element.find("div.miconmenu-header > .miconmenu-title > .miconmenu-icon").hasClass("fa-chevron-down")},update:function(t){this.options=JSON.parse(JSON.stringify(t)),this.options=Object.assign({},this.default,this.options,t.onAction?{onAction:t.onAction}:"");var e=!1;null!=this.options.collapse?e=this.options.collapse:this.$element.find("div.miconmenu-header > .miconmenu-title > .miconmenu-icon").hasClass("fa-chevron-right")&&(e=!0);this.render(e)},render:function(t){var e=this.options,i="";t?(i+='<div class="miconmenu-header" data-select="'+e.select+'">',i+='  <span class="miconmenu-title">',i+='    <i class="miconmenu-icon fa fa-chevron-right"></i>',i+="    <span>"+e.label+"</span>",i+="  </span>"):(i+='<div class="miconmenu-header" data-select="'+e.select+'">',i+='  <span class="miconmenu-title">',i+='    <i class="miconmenu-icon fa fa-chevron-down"></i>',i+="    <span>"+e.label+"</span>",i+="  </span>"),i+='  <span class="miconmenu-btn">';for(var n={active:!1,title:!1,placeholder:""},s=0,a=e.tool.length;s<a;s++)if("filter"===e.tool[s].name&&(n.active=e.tool[s].active,n.title=e.tool[s].title,n.placeholder=e.tool[s].placeholder),e.tool[s].active){var o="sort"===e.tool[s].name?'data-orderby="'.concat(e.tool[s].orderBy,'"'):"";if("img"===e.tool[s].iconType){var l=e.tool[s].className?e.tool[s].className:"miconmenu-".concat(e.tool[s].name,"-img");i+='<span class="miconmenu-img '.concat(l,'" id="').concat(this.uiid,"-").concat(e.tool[s].name,'"\n            data-menu="').concat(this.uiid,'" data-type="').concat(e.tool[s].name,'" ').concat(o,"></span>")}else"icon"===e.tool[s].iconType&&(i+='<i class="miconmenu-icon '.concat(e.tool[s].icon,'" id="').concat(this.uiid,"-").concat(e.tool[s].name,'"\n            data-menu="').concat(this.uiid,'" data-type="').concat(e.tool[s].name,'" ').concat(o,"></i>"))}i+="  </span>",i+="</div>",i+='<div class="miconmenu-body">',n.active&&(i+='<span class="miconmenu-filter" style="display: none;">',i+='  <input type="text" class="miconmenu-filter-input" id="'+this.uiid+'-filter-input" data-menu="'+this.uiid+'"',i+='   data-filter_title="'+n.title+'"',i+='   placeholder="'+(n.placeholder?n.placeholder.replace(/"/g,"&quot;"):"Search ...")+'">',i+='  <i class="miconmenu-filter-clear-btn">&times;</i>',i+="</span>"),i+='  <ul style="margin: 0; padding: 0;">';for(var r=0,c=e.item.length;r<c;r++)i+=this.menuItemTxt(e.item[r],{draggable:e.draggable,dragstart:e.dragstart,srcpath:e.srcpath});i+="  </ul>",i+="</div>",this.populate(i)},menuItemTxt:function(t,e){var i='<div class="tooltip tooltip-outer" role="tooltip"><div class="arrow"></div><div class="tooltip-miconmenu tooltip-inner"></div></div>',n="";if("branch"===t.type?(n+='<li class="miconmenu-item-group" id="'+t.id+'" data-type="'+t.type+'" data-title="'+t.label+'">',n+='  <span class="miconmenu-item-name">',n+='    <i class="miconmenu-item-icon fa fa-chevron-down"></i>'):"item"===t.type&&(null!=e.draggable&&1==e.draggable?n+='<li class="miconmenu-item '+this.uiid+'-miconmenu-item" id="'+t.id+'" draggable="'+e.draggable+'" ondragstart="'+e.dragstart+'(event)" data-type="'+t.type+'" data-title="'+t.label+'" data-selected="'+t.selected+'">':n+='<li class="miconmenu-item '+this.uiid+'-miconmenu-item" id="'+t.id+'" draggable="'+e.draggable+'" data-type="'+t.type+'" data-title="'+t.label+'" data-selected="'+t.selected+'">',n+='  <span class="miconmenu-item-name">',n+='    <span class="miconmenu-item-img"><img src="'+e.srcpath+(t.icon||"default.png")+'"></span>'),n+='    <span class="miconmenu-item-title">'+t.label+"</span>",t.tooltip&&(n+='      <span class="miconmenu-item-info">',n+=t.tooltip?'<a class="miconmenu-tooltip" data-toggle="tooltip" data-template="'.concat(i.replace(/"/g,"&quot;"),'" data-container="body" data-placement="bottom" data-html="true" title="').concat(t.tooltip.replace(/"/g,"&quot;"),'"><i class="fas fa-info-circle"></i></a>'):"",n+="      </span>"),t.rtooltip&&(n+='      <span class="miconmenu-item-info miconmenu-pull-right">',n+=t.rtooltip?'<a class="miconmenu-tooltip" data-toggle="tooltip" data-template="'.concat(i.replace(/"/g,"&quot;"),'" data-container="body" data-placement="bottom" data-html="true" title="').concat(t.rtooltip.replace(/"/g,"&quot;"),'"><i class="fas fa-info-circle"></i></a>'):"",n+="      </span>"),t.menu){var s=[];t.menu.forEach((function(t){s.push("data-".concat(t.type,'="').concat(t.active,'"'))})),n+='    <span class="miconmenu-item-btn '+this.uiid+'-list-btn" id="'+t.id+'-btn" data-item="'+t.id+'" data-title="'+t.label+'" '+s.join(" ")+">",n+='      <i class="fa fa-ellipsis-v"></i>',n+="    </span>"}if(n+="  </span>",t.subitems){n+='  <ul class="miconmenu-content">';for(var a=0,o=t.subitems.length;a<o;a++){n+=this.menuItemTxt(t.subitems[a],{draggable:e.draggable,dragstart:e.dragstart,srcpath:e.srcpath})}n+="  </ul>"}return n+="</li>"},populate:function(t){this.$element.html(t);var e=n.default("#"+this.uiid).find(".miconmenu-header .miconmenu-btn").width(),i=n.default("#"+this.uiid).find(".miconmenu-header"),s=n.default("#"+this.uiid).find(".miconmenu-title").find("span"),a=i.width()-e;e>0&&(n.default("#"+this.uiid).find(".miconmenu-header .miconmenu-title").css("max-width",a),s[0].offsetWidth>a&&!s.attr("title")&&s.attr("title",s.text().trim()));var o=this.options;o.item instanceof Array&&!(o.item.length<1)||(o.item=[]);for(var l=0,r=o.item.length;l<r;l++)this.generateContextMenu(o.item[l],o.activeType);n.default("#"+this.uiid+" .miconmenu-item").each((function(t){var e=n.default(this).attr("id"),i=n.default(this).find(".miconmenu-item-img").width()||0,s=n.default(this).find(".miconmenu-item-info").width()||0,a=n.default(this).find(".miconmenu-item-btn").width()||0,o=n.default(this).width()-(i+s+a+4),l=n.default(this).find(".miconmenu-item-title");l&&(l.prop("scrollWidth")>l.prop("offsetWidth")&&l.attr("title",l.html()),l.css("max-width",o)),"true"===n.default(this).attr("data-selected")&&n.default('[id="'+e+'"]').addClass("active"),n.default('[data-toggle="tooltip"]').tooltip()})),n.default("#"+this.uiid+" .miconmenu-item-group").each((function(t){var e=n.default(this).find(".miconmenu-item-img").width()||0,i=n.default(this).find(".miconmenu-item-info").width()||0,s=n.default(this).find(".miconmenu-item-btn").width()||0,a=n.default(this).width()-(e+i+s+4),o=n.default(this).find(".miconmenu-item-title");o&&(o.prop("scrollWidth")>o.prop("offsetWidth")&&o.attr("title",o.html()),o.css("max-width",a))}))},generateContextMenu:function(t,e){if("item"===t.type){if(t.menu&&t.menu instanceof Array&&t.menu.length>0){var i=this.groupContextMenuData(t.menu,e);this.buildContextMenu(t.id,i,e)}}else if("branch"===t.type){if(t.menu&&t.menu instanceof Array&&t.menu.length>0){var n=this.groupContextMenuData(t.menu,e);this.buildContextMenu(t.id,n,e)}if(t.subitems&&t.subitems instanceof Array&&t.subitems.length>0)for(var s=0,a=t.subitems.length;s<a;s++)this.generateContextMenu(t.subitems[s],e)}},groupContextMenuData:function(t,e){for(var i={},n=0,s=t.length;n<s;n++)if(null==i[t[n].mid]&&("visible"===e?i[t[n].mid]={name:'<span class="context-menu-icon context-menu-'.concat(t[n].type,'-icon"></span>').concat(t[n].label),isHtmlName:!0,visible:t[n].active}:"disabled"===e&&(i[t[n].mid]={name:'<span class="context-menu-icon context-menu-'.concat(t[n].type,'-icon"></span>').concat(t[n].label),isHtmlName:!0,disabled:!t[n].active})),t[n].menu&&t[n].menu instanceof Array&&t[n].menu.length>0&&null==i[t[n].mid].items){i[t[n].mid].items={};var a=this.groupContextMenuData(t[n].menu,e);i[t[n].mid].items=a}return i},updateContextMenu:function(t,e){for(var i=0,n=this.options.item.length;i<n;i++)this.activeContextMenu(this.options.item[i],t,e)},activeContextMenu:function(t,e,i){if(t){if(t.menu)for(var n=0,s=t.menu.length;n<s;n++)t.menu[n].mid==e&&(t.menu[n].active=i),t.menu[n].menu&&this.activeContextSubMenu(menu[n].menu,e,i);if(t.subitems)for(var a=0,o=t.subitems.length;a<o;a++)this.activeContextMenu(t.subitems[a],e,i)}},activeContextSubMenu:function(t,e,i){if(t)for(var n=0,s=t.length;n<s;n++)t[n].mid==e&&(t[n].active=i),t[n].menu&&this.activeContextSubMenu(t[n].menu,e,i)},getItem:function(t,e){if(!e)return null;if(e.id==t)return e;if("branch"==e.type&&e.subitems&&e.subitems instanceof Array)for(var i=0,n=e.subitems.length;i<n;i++){var s=this.getItem(t,e.subitems[i]);if(null!=s)return s}return null},menubuild:function(t){for(var e=t.attr("data-item"),i={},n=null,s=0,a=this.options.item.length;s<a&&!(n=this.getItem(e,this.options.item[s]));s++);if(!n)return{items:{}};if("item"===n.type)n.menu&&n.menu instanceof Array&&n.menu.length>0&&(i=this.groupContextMenuData(n.menu,this.options.activeType),this.buildContextMenu(n.id,i,this.options.activeType));else if("branch"===n.type&&(n.menu&&n.menu instanceof Array&&n.menu.length>0&&(i=this.groupContextMenuData(n.menu,this.options.activeType),this.buildContextMenu(n.id,i,this.options.activeType)),n.subitems&&n.subitems instanceof Array&&n.subitems.length>0))for(var o=0,l=n.subitems.length;o<l;o++)this.generateContextMenu(n.subitems[o],this.options.activeType);return{items:i}},buildContextMenu:function(t,e,i){var s={selector:'[id="'.concat(t,'-btn"]'),build:this.menubuild.bind(this),trigger:"left",hideOnSecondTrigger:!0,callback:this.selectContextItem.bind(this),zIndex:10};n.default.contextMenu&&n.default.contextMenu(s)},collapseMenu:function(){var t=this.$element.find("div.miconmenu-header > .miconmenu-title > .miconmenu-icon");t.removeClass("fa-chevron-down").addClass("fa-chevron-right"),t.parents(".miconmenu-header").next(".miconmenu-body").addClass("miconmenu-hidden"),t.parents(".miconmenu-container").addClass("miconmenu-collapse")},expandeMenu:function(){var t=this.$element.find("div.miconmenu-header > .miconmenu-title > .miconmenu-icon");t.removeClass("fa-chevron-right").addClass("fa-chevron-down"),t.parents(".miconmenu-header").next(".miconmenu-body").removeClass("miconmenu-hidden"),t.parents(".miconmenu-container").removeClass("miconmenu-collapse")},isMenuCollapse:function(){return!this.$element.find("div.miconmenu-header > .miconmenu-title > .miconmenu-icon").hasClass("fa-chevron-down")},toggleIconMenu:function(t){n.default(t).hasClass("fa-chevron-down")?(n.default(t).removeClass("fa-chevron-down").addClass("fa-chevron-right"),n.default(t).parents(".miconmenu-header").next(".miconmenu-body").addClass("miconmenu-hidden"),n.default(t).parents(".miconmenu-container").addClass("miconmenu-collapse")):n.default(t).hasClass("fa-chevron-right")&&(n.default(t).removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(t).parents(".miconmenu-header").next(".miconmenu-body").removeClass("miconmenu-hidden"),n.default(t).parents(".miconmenu-container").removeClass("miconmenu-collapse"))},toggleItemGroup:function(t){n.default(t).find(".miconmenu-item-icon").hasClass("fa-chevron-down")?(n.default(t).find(".miconmenu-item-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right"),n.default(t).next(".miconmenu-content").addClass("miconmenu-hidden")):n.default(t).find(".miconmenu-item-icon").hasClass("fa-chevron-right")&&(n.default(t).find(".miconmenu-item-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(t).next(".miconmenu-content").removeClass("miconmenu-hidden"))},selectIconMenu:function(t){var e=n.default(t).attr("id"),i=n.default(t).attr("data-type"),s=n.default(t).attr("data-menu");if("filter"===i&&("none"===n.default("#"+e+"-input").parent().css("display")?(n.default("#"+e+"-input").parent().css("display",""),n.default("#"+e+"-input").trigger("focus")):(n.default("#"+e+"-input").parent().css("display","none"),n.default("#"+e+"-input").val("").trigger("input"))),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectmenu",Object.assign({id:e,type:i,title:s},"sort"===i?{orderBy:n.default(t).attr("data-orderby")}:""));else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectmenu");else{var a=new CustomEvent("selectmenu",{detail:Object.assign({id:e,type:i,title:s},"sort"===i?{orderBy:n.default(t).attr("data-orderby")}:"")});this.$element[0].dispatchEvent(a)}},selectItem:function(t){var e="true"===n.default("#"+this.uiid).children().attr("data-select"),i="",s="";if(!n.default(t.target).hasClass("fa")&&!n.default(t.target).hasClass("miconmenu-item-btn")&&e&&n.default(t.currentTarget).hasClass("miconmenu-item"))if(n.default("."+this.uiid+"-miconmenu-item.active").removeClass("active"),n.default(t.currentTarget).addClass("active"),i=n.default(t.currentTarget).attr("id"),s=n.default(t.currentTarget).attr("data-title"),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectitem",{id:i,type:"select",title:s});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectitem");else{var a=new CustomEvent("selectitem",{detail:{id:i,type:"select",title:s}});this.$element[0].dispatchEvent(a)}},toggleTitleItemGroup:function(t){n.default(t).hasClass("fa-chevron-down")?n.default(t).attr("data-expand","true"):n.default(t).hasClass("fa-chevron-right")&&n.default(t).attr("data-expand","false"),this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction("collapseTitleGroupItem",{expand:"true"===n.default(t).attr("data-expand")})},selectContextItem:function(t,e){var i=n.default(e.$trigger).attr("data-item"),s=n.default(e.$trigger).attr("data-title");if(this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectcontext",{id:i,type:t,title:s});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectcontext");else{var a=new CustomEvent("selectcontext",{detail:{id:i,type:t,title:s}});this.$element[0].dispatchEvent(a)}},filterItem:function(t){var e=t.target.id,i=n.default("#".concat(e)).val(),s=n.default("#".concat(e)).attr("data-menu"),a="true"===n.default("#".concat(e)).attr("data-filter_title");n.default(t.target).siblings(".miconmenu-filter-clear-btn").toggle(!!i),n.default("#".concat(s," .miconmenu-item")).each((function(t){var e=n.default(this).find(".miconmenu-item-title").html()||"";a?n.default(this).parents(".miconmenu-item-group").css("display",""):(n.default(this).parents().find(".miconmenu-item-group > .miconmenu-item-name").css("display","none"),n.default(".miconmenu-content").css("margin-left","0")),e.toLowerCase().indexOf(i.toLowerCase())>=0?n.default(this).css("display",""):n.default(this).css("display","none")})),a?i?n.default("#".concat(s," .miconmenu-item-group")).each((function(t){var e=n.default(this).find(".miconmenu-item").length;n.default(this).find(".miconmenu-item:hidden").length===e?n.default(this).css("display","none"):n.default(this).css("display","")})):(n.default(t.target).trigger("focus"),n.default("#".concat(s," .miconmenu-item-group")).each((function(t){n.default(this).css("display","")}))):i||(n.default(t.target).trigger("focus"),n.default(t.target).parent().siblings("ul").find(".miconmenu-item-group .miconmenu-item-name").css("display",""),n.default(".miconmenu-content").css("margin-left",""))}};var b=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.default={item:[{left_value:"",right_value:""}],item_min:1,item_max:3,title:{left:"",right:""},columnClass:{left:"",right:"",btn:""},expand:{active:!1,icon:""}},this.options=Object.assign({},this.default,e),this.clearmode=!0,void 0!==e.clearmode&&"boolean"==typeof e.clearmode&&(this.clearmode=e.clearmode),this.$element.on("click",".mtextinput-btn.addbtn",n.default.proxy((function(t){this.addItem(t.currentTarget)}),this)),this.$element.on("click",".mtextinput-btn.delbtn",n.default.proxy((function(t){this.deleteItem(t.currentTarget)}),this)),this.$element.on("click",".mtextinput-btn.expandbtn",n.default.proxy((function(t){this.expandItem(t.currentTarget)}),this)),this.populate()};b.prototype={clear:function(){this.options=this.default,this.populate()},destroy:function(){this.$element.find("table.mtextinput").off(),this.$element.find("table.mtextinput").remove(),this.$element.data("daai.textinputtable"),this.$element.removeData("daai.textinputtable"),this.$element.data("daai.textinputtable"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({},this.default,t),this.populate()},reset:function(){this.options.item=[{left_value:"",right_value:""}],this.populate()},populate:function(){var t=this.render();this.$element.html(t),n.default("#"+this.uiid).find(".mtextinput-btns").each((function(){n.default(this).css("width",20*n.default(this).find(".mtextinput-btn").length+12)})),this.clearmode||this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="mtextinput" id="'+this.uiid+'">',t.title&&(e+='  <thead class="mtextinput-header">',e+="    <tr>",e+='      <td class="mtextinput-title mtextinput-title-left" id="'+this.uiid+'-title-left">'+t.title.left+"</td>",e+='      <td class="mtextinput-title mtextinput-title-right" id="'+this.uiid+'-title-right">'+t.title.right+"</td>",e+='      <td class="mtextinput-title mtextinput-title-btn" id="'+this.uiid+'-title-btn"></td>',e+="    </tr>",e+="  </thead>"),e+='  <tbody class="mtextinput-body">';for(var i=0,n=t.item.length>t.item_max?t.item_max:t.item.length;i<n;i++)e+='<tr class="mtextinput-item '+this.uiid+'-item" data-item="'+i+'">',e+='  <td class="mtextinput-td'+(t.columnClass.left?" "+t.columnClass.left:"")+'">',e+='    <input class="mtextinput-input '+this.uiid+'-input-left" type="text" data-item="'+i+'"',e+='      id="'+this.uiid+"-input-left-"+i+'" value="'+t.item[i].left_value.replace(/"/g,"&quot;")+'">',e+="  </td>",e+='  <td class="mtextinput-td'+(t.columnClass.right?" "+t.columnClass.right:"")+'">',e+='    <input class="mtextinput-input '+this.uiid+'-input-right" type="text" data-item="'+i+'"',e+='      id="'+this.uiid+"-input-right-"+i+'" value="'+t.item[i].right_value.replace(/"/g,"&quot;")+'">',e+="  </td>",e+='  <td class="mtextinput-td mtextinput-btns'+(t.columnClass.btn?" "+t.columnClass.btn:"")+'">',t.expand.active&&(e+='    <span class="mtextinput-btn expandbtn" data-item="'+i+'"><i class="fas '+t.expand.icon+'"></i></span>'),e+='    <span class="mtextinput-btn addbtn" data-item="'+i+'"><i class="fas fa-plus"></i></span>',e+='    <span class="mtextinput-btn delbtn" data-item="'+i+'"><i class="fas fa-minus"></i></span>',e+="  </td>",e+="</tr>";return e+="  </tbody>",e+="</table>"},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();n.default(t).hasClass("addbtn")&&i.length<this.options.item_max&&i.splice(e+1,0,{left_value:"",right_value:""}),this.options.item=i,this.populate()},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();n.default(t).hasClass("delbtn")&&(i.length>this.options.item_min?i.splice(e,1):1==i.length&&(i=[{left_value:"",right_value:""}])),this.options.item=i,this.populate()},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({left_value:"",right_value:""})})),t.sort((function(t,e){return t.item>e.item?1:-1})),n.default("."+this.uiid+"-input-left").each((function(e){var i=parseInt(n.default(this).attr("data-item"));t[i].left_value=n.default(this).val().replace(/"/g,"&quot;")})),n.default("."+this.uiid+"-input-right").each((function(e){var i=parseInt(n.default(this).attr("data-item"));t[i].right_value=n.default(this).val().replace(/"/g,"&quot;")})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""==t[i].left_value&&""==t[i].right_value||e.push({left_value:t[i].left_value.replace(/&quot;/g,'"'),right_value:t[i].right_value.replace(/&quot;/g,'"')});return e},getAllItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)e.push({left_value:t[i].left_value.replace(/&quot;/g,'"'),right_value:t[i].right_value.replace(/&quot;/g,'"')});return e},getItem:function(t){var e=this.getCurrentItems();return e.length>0&&t>=0&&t<e.length?{left_value:e[t].left_value.replace(/&quot;/g,'"'),right_value:e[t].right_value.replace(/&quot;/g,'"')}:{left_value:"",right_value:""}},itemBannedAction:function(){this.options.item&&this.options.item instanceof Array||(this.options.item=[]),this.options.item.length<=this.options.item_min?n.default("#"+this.uiid).find(".mtextinput-btn.delbtn").addClass("banned-action"):this.options.item.length>=this.options.item_max&&n.default("#"+this.uiid).find(".mtextinput-btn.addbtn").addClass("banned-action")},expandItem:function(t){for(var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems(),s={left_value:"",right_value:""},a=document.getElementsByClassName(this.uiid+"-item"),o=0,l=a.length;o<l;o++)if(e==n.default(a[o]).attr("data-item")){s.left_value=n.default(a[o]).find("."+this.uiid+"-input-left").val(),s.right_value=n.default(a[o]).find("."+this.uiid+"-input-right").val();break}this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction(this.uiid,"expand",e,s,i)}};var _=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.default={item:[{left_value:"",right_value:""}],item_min:1,item_max:3,title:{left:"",right:""},columnClass:{left:"",right:"",btn:""},rows:{left:2,right:2},placeholder:{left:"",right:""},spellcheck:!1,clearmode:!0,resize:!0,saveInputHeight:!1,expand:{active:!1,icon:""},buttonAlign:"center"},this.options=Object.assign({},this.default,e),this.clearmode=!0,void 0!==e.clearmode&&"boolean"==typeof e.clearmode&&(this.clearmode=e.clearmode),this.$element.on("click",".mtextarea-btn.addbtn",n.default.proxy((function(t){this.addItem(t.currentTarget)}),this)),this.$element.on("click",".mtextarea-btn.delbtn",n.default.proxy((function(t){this.deleteItem(t.currentTarget)}),this)),this.$element.on("click",".mtextarea-btn.expandbtn",n.default.proxy((function(t){this.expandItem(t.currentTarget)}),this)),this.populate()};_.prototype={clear:function(){this.options=this.default,this.populate()},destroy:function(){this.$element.find("table.mtextarea").off(),this.$element.find("table.mtextarea").remove(),this.$element.data("daai.textareatable"),this.$element.removeData("daai.textareatable"),this.$element.data("daai.textareatable"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({},this.default,t),this.populate()},reset:function(){this.options.item=[{left_value:"",right_value:""}],this.populate()},populate:function(){var t=this.render();this.$element.html(t),n.default(".mtextarea-input").each((function(){var t=n.default(this).attr("data-prev-height");n.default(this).css("min-height",n.default(this).outerHeight()),t&&n.default(this).css("height",t)})),n.default("#"+this.uiid).find(".mtextarea-btns").each((function(){n.default(this).css("width",20*n.default(this).find(".mtextarea-btn").length+12)})),this.clearmode||this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="mtextarea" id="'.concat(this.uiid,'">'),t.title&&(e+='\n      <thead class="mtextarea-header">\n        <tr>\n          <td class="mtextarea-title mtextarea-title-left" id="'.concat(this.uiid,'-title-left">').concat(t.title.left,'</td>\n          <td class="mtextarea-title mtextarea-title-right" id="').concat(this.uiid,'-title-right">').concat(t.title.right,'</td>\n          <td class="mtextarea-title mtextarea-title-btn" id="').concat(this.uiid,'-title-btn"></td>\n        </tr>\n      </thead>')),e+='<tbody class="mtextarea-body">';for(var i=0,n=t.item.length>t.item_max?t.item_max:t.item.length;i<n;i++){var s=t.saveInputHeight&&t.item[i].left_height?t.item[i].left_height:"",a=t.saveInputHeight&&t.item[i].right_height?t.item[i].right_height:"";e+='\n      <tr class="mtextarea-item '.concat(this.uiid,'-item" data-item="').concat(i,'">\n        <td class="mtextarea-td ').concat(t.columnClass.left,'">\n          <textarea class="mtextarea-input ').concat(this.uiid,"-input-left ").concat(t.resize?"":"noresize",'"\n            id="').concat(this.uiid,"-input-left-").concat(i,'" data-item="').concat(i,'" rows="').concat(t.rows.left,'"\n              placeholder="').concat(t.placeholder.left,'" spellcheck="').concat(t.spellcheck,'"\n            data-prev-height="').concat(s,'">').concat(t.item[i].left_value.replace(/"/g,"&quot;"),'</textarea>\n        </td>\n        <td class="mtextarea-td ').concat(t.columnClass.right,'">\n          <textarea class="mtextarea-input ').concat(this.uiid,"-input-right ").concat(t.resize?"":"noresize",'"\n            id="').concat(this.uiid,"-input-right-").concat(i,'" data-item="').concat(i,'" rows="').concat(t.rows.right,'"\n            placeholder="').concat(t.placeholder.right,'" spellcheck="').concat(t.spellcheck,'"\n            data-prev-height="').concat(a,'">').concat(t.item[i].right_value.replace(/"/g,"&quot;"),'</textarea>\n        </td>\n        <td class="mtextarea-td mtextarea-btns ').concat(t.columnClass.btn,'" style="align-items: ').concat(t.buttonAlign,';">\n          ').concat(t.expand.active?'<span class="mtextarea-btn expandbtn" data-item="'.concat(i,'"><i class="fas ').concat(t.expand.icon,'"></i></span>'):"",'\n          <span class="mtextarea-btn addbtn" data-item="').concat(i,'"><i class="fas fa-plus"></i></span>\n          <span class="mtextarea-btn delbtn" data-item="').concat(i,'"><i class="fas fa-minus"></i></span>\n          <span></span>\n        </td>\n      </tr>')}return e+="</tbody>\n    </table>"},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();n.default(t).hasClass("addbtn")&&i.length<this.options.item_max&&i.splice(e+1,0,{left_value:"",right_value:"",left_height:"",right_height:""}),this.options.item=i,this.populate()},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();n.default(t).hasClass("delbtn")&&(i.length>this.options.item_min?i.splice(e,1):1==i.length&&(i=[{left_value:"",right_value:"",left_height:"",right_height:""}])),this.options.item=i,this.populate()},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({left_value:"",right_value:"",left_height:"",right_height:""})})),n.default("."+this.uiid+"-input-left").each((function(e){var i=parseInt(n.default(this).attr("data-item"));t[i].left_value=n.default(this).val().replace(/"/g,"&quot;"),t[i].left_height=n.default(this).outerHeight()})),n.default("."+this.uiid+"-input-right").each((function(e){var i=parseInt(n.default(this).attr("data-item"));t[i].right_value=n.default(this).val().replace(/"/g,"&quot;"),t[i].right_height=n.default(this).outerHeight()})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""==t[i].left_value&&""==t[i].right_value||e.push({left_value:t[i].left_value.replace(/&quot;/g,'"'),right_value:t[i].right_value.replace(/&quot;/g,'"')});return e},getAllItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)e.push({left_value:t[i].left_value.replace(/&quot;/g,'"'),right_value:t[i].right_value.replace(/&quot;/g,'"')});return e},getItem:function(t){var e=this.getCurrentItems();return e.length>0&&t>=0&&t<e.length?{left_value:e[t].left_value.replace(/&quot;/g,'"'),right_value:e[t].right_value.replace(/&quot;/g,'"')}:{left_value:"",right_value:""}},itemBannedAction:function(){this.options.item&&this.options.item instanceof Array||(this.options.item=[]),this.options.item.length<=this.options.item_min?n.default("#"+this.uiid).find(".mtextarea-btn.delbtn").addClass("banned-action"):this.options.item.length>=this.options.item_max&&n.default("#"+this.uiid).find(".mtextarea-btn.addbtn").addClass("banned-action")},expandItem:function(t){for(var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems(),s={left_value:"",right_value:""},a=[],o=document.getElementsByClassName(this.uiid+"-item"),l=0,r=o.length;l<r;l++)if(e==n.default(o[l]).attr("data-item")){s.left_value=n.default(o[l]).find("."+this.uiid+"-input-left").val(),s.right_value=n.default(o[l]).find("."+this.uiid+"-input-right").val();break}for(var c=0,u=i.length;c<u;c++)a.push({left_value:i[c].left_value,right_value:i[c].right_value});this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction(this.uiid,"expand",e,s,a)}};var x=function(t,e){(this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.default={label:"",collapse:null,select:!1,draggable:!0,dragstart:"dragStart",tool:[],activeType:"",item:[],srcpath:""},this.options=JSON.parse(JSON.stringify(e)),this.options=Object.assign({},this.default,this.options,e.onAction?{onAction:e.onAction}:""),n.default.ui&&n.default.ui.position)||(new d).createPosition(n.default);n.default.contextMenu||(new h).createContextMenu(n.default);this.$element.on("click",".mexplorermenu-btn > .mexplorermenu-icon, .mexplorermenu-btn > .mexplorermenu-img",n.default.proxy((function(t){this.selectIconMenu(t.currentTarget)}),this)),this.$element.on("click",".mexplorermenu-item-group > .mexplorermenu-item-name",n.default.proxy((function(t){n.default(t.target).hasClass("fa-ellipsis-v")||n.default(t.target).hasClass("mexplorermenu-item-btn")||this.toggleItemGroup(t.currentTarget)}),this)),this.$element.on("click",".mexplorermenu-item",n.default.proxy((function(t){n.default(t.currentTarget).hasClass("mexplorermenu-item-group")||this.selectItem(t)}),this)),this.$element.on("input",".mexplorermenu-filter-input",n.default.proxy((function(t){this.filterItem(t)}),this)),this.$element.on("click",".mexplorermenu-filter-clear-btn",n.default.proxy((function(t){n.default(t.target).siblings(".mexplorermenu-filter-input").val("").trigger("input")}),this)),this.render()};x.prototype={clear:function(){this.options=JSON.parse(JSON.stringify(this.default)),this.render()},destroy:function(){this.$element.find("div.mexplorermenu-header").off(),this.$element.find("div.mexplorermenu-body").off(),this.$element.find("div.mexplorermenu-header").remove(),this.$element.find("div.mexplorermenu-body").remove(),this.$element[0].outerHTML=""},update:function(t){this.options=JSON.parse(JSON.stringify(t)),this.options=Object.assign({},this.default,this.options,t.onAction?{onAction:t.onAction}:""),this.render()},render:function(){var t=this.options,e="";e+='<div class="mexplorermenu-header" data-select="'+t.select+'">',e+='  <span class="mexplorermenu-title">'+t.label+"</span>",e+='  <span class="mexplorermenu-btn">';for(var i={active:!1,title:!1,placeholder:""},n=0,s=t.tool.length;n<s;n++)if("filter"===t.tool[n].name&&(i.active=t.tool[n].active,i.title=t.tool[n].title,i.placeholder=t.tool[n].placeholder),t.tool[n].active){var a="sort"===t.tool[n].name?'data-orderby="'.concat(t.tool[n].orderBy,'"'):"";if("img"===t.tool[n].iconType){var o=t.tool[n].className?t.tool[n].className:"mexplorermenu-".concat(t.tool[n].name,"-img");e+='<span class="mexplorermenu-img '.concat(o,'" id="').concat(this.uiid,"-").concat(t.tool[n].name,'"\n            data-menu="').concat(this.uiid,'" data-type="').concat(t.tool[n].name,'" ').concat(a,"></span>")}else"icon"===t.tool[n].iconType&&(e+='<i class="mexplorermenu-icon '.concat(t.tool[n].icon,'" id="').concat(this.uiid,"-").concat(t.tool[n].name,'"\n            data-menu="').concat(this.uiid,'" data-type="').concat(t.tool[n].name,'" ').concat(a,"></i>"))}e+="  </span>",e+="</div>",e+='<div class="mexplorermenu-body">',i.active&&(e+='<span class="mexplorermenu-filter" style="display: none;">',e+='  <input type="text" class="mexplorermenu-filter-input" id="'+this.uiid+'-filter-input" data-menu="'+this.uiid+'"',e+='   data-filter_title="'+i.title+'"',e+='   placeholder="'+(i.placeholder?i.placeholder.replace(/"/g,"&quot;"):"Search ...")+'">',e+='  <i class="mexplorermenu-filter-clear-btn">&times;</i>',e+="</span>"),e+='  <ul style="margin: 0; padding: 0;">';for(var l=0,r=t.item.length;l<r;l++)e+=this.menuItemTxt(t.item[l],{draggable:t.draggable,dragstart:t.dragstart,srcpath:t.srcpath});e+="  </ul>",e+="</div>",this.populate(e)},menuItemTxt:function(t,e){var i='<div class="tooltip tooltip-outer" role="tooltip"><div class="arrow"></div><div class="tooltip-mexplorermenu tooltip-inner"></div></div>',n="";if("branch"===t.type?(null==t.expandItems&&(t.expandItems=!0),n+='<li class="mexplorermenu-item-group" id="'+t.id+'" data-type="'+t.type+'" data-title="'+t.label+'">',n+='  <span class="mexplorermenu-item-name" data-expand="'+t.expandItems+'">',n+='    <i class="mexplorermenu-item-icon fa '+(t.expandItems?"fa-chevron-down":"fa-chevron-right")+'"></i>'):"item"===t.type&&(null!=e.draggable&&1==e.draggable?n+='<li class="mexplorermenu-item '+this.uiid+'-mexplorermenu-item" id="'+t.id+'" draggable="'+e.draggable+'" ondragstart="'+e.dragstart+'(event)" data-type="'+t.type+'" data-title="'+t.label+'" data-selected="'+t.selected+'">':n+='<li class="mexplorermenu-item '+this.uiid+'-mexplorermenu-item" id="'+t.id+'" draggable="'+e.draggable+'" data-type="'+t.type+'" data-title="'+t.label+'" data-selected="'+t.selected+'">',n+='  <span class="mexplorermenu-item-name">',t.icon&&(n+='    <span class="mexplorermenu-item-img"><img src="'+e.srcpath+t.icon+'"></span>')),n+='    <span class="mexplorermenu-item-title">'+t.label+"</span>",t.tooltip&&(n+='      <span class="mexplorermenu-item-info">',n+=t.tooltip?'<a class="mexplorermenu-tooltip" data-toggle="tooltip" data-template="'.concat(i.replace(/"/g,"&quot;"),'" data-container="body" data-placement="bottom" data-html="true" title="').concat(t.tooltip.replace(/"/g,"&quot;"),'"><i class="fas fa-info-circle"></i></a>'):"",n+="      </span>"),t.rtooltip&&(n+='      <span class="mexplorermenu-item-info mexplorermenu-pull-right">',n+=t.rtooltip?'<a class="mexplorermenu-tooltip" data-toggle="tooltip" data-template="'.concat(i.replace(/"/g,"&quot;"),'" data-container="body" data-placement="bottom" data-html="true" title="').concat(t.rtooltip.replace(/"/g,"&quot;"),'"><i class="fas fa-info-circle"></i></a>'):"",n+="      </span>"),t.menu){var s=[];t.menu.forEach((function(t){s.push("data-".concat(t.type,'="').concat(t.active,'"'))})),n+='    <span class="mexplorermenu-item-btn '+this.uiid+'-list-btn" id="'+t.id+'-btn" data-item="'+t.id+'" data-title="'+t.label+'" '+s.join(" ")+">",n+='      <i class="fa fa-ellipsis-v"></i>',n+="    </span>"}if(n+="  </span>","branch"===t.type&&t.subitems){n+='  <ul class="mexplorermenu-content">';for(var a=0,o=t.subitems.length;a<o;a++){n+=this.menuItemTxt(t.subitems[a],{draggable:e.draggable,dragstart:e.dragstart,srcpath:e.srcpath})}n+="  </ul>"}return n+="</li>"},populate:function(t){this.$element.html(t);var e=n.default("#"+this.uiid).find(".mexplorermenu-header .mexplorermenu-btn").width(),i=n.default("#"+this.uiid).find(".mexplorermenu-header"),s=n.default("#"+this.uiid).find(".mexplorermenu-title"),a=i.width()-e;e>0&&(n.default(s).css("max-width",a),s[0].offsetWidth>a&&!s.attr("title")&&s.attr("title",s.text().trim()));var o=this.options;o.item instanceof Array&&!(o.item.length<1)||(o.item=[]);for(var l=0,r=o.item.length;l<r;l++)this.generateContextMenu(o.item[l],o.activeType);n.default("#"+this.uiid+" .mexplorermenu-item").each((function(t){var e=n.default(this).attr("id"),i=n.default(this).find(".mexplorermenu-item-img").width()||0,s=n.default(this).find(".mexplorermenu-item-info").width()||0,a=n.default(this).find(".mexplorermenu-item-btn").width()||0,o=n.default(this).width()-(i+s+a+4),l=n.default(this).find(".mexplorermenu-item-title");l&&(l.prop("scrollWidth")>l.prop("offsetWidth")&&l.attr("title",l.html()),l.css("max-width",o)),"true"===n.default(this).attr("data-selected")&&n.default('[id="'+e+'"]').addClass("active"),n.default('[data-toggle="tooltip"]').tooltip()})),n.default("#"+this.uiid+" .mexplorermenu-item-group").each((function(t){var e=n.default(this).find(".mexplorermenu-item-img").width()||0,i=n.default(this).find(".mexplorermenu-item-info").width()||0,s=n.default(this).find(".mexplorermenu-item-btn").width()||0,a=n.default(this).width()-(e+i+s+4),o=n.default(this).find(".mexplorermenu-item-title");o[0]&&(o[0].scrollWidth>o[0].offsetWidth&&(o[0].title=o[0].innerText),o[0].style.maxWidth=a),"false"===n.default(this).children(".mexplorermenu-item-name").attr("data-expand")&&n.default(this).children(".mexplorermenu-content").addClass("mexplorermenu-hidden")}))},generateContextMenu:function(t,e){if("item"===t.type){if(t.menu&&t.menu instanceof Array&&t.menu.length>0){var i=this.groupContextMenuData(t.menu,e);this.buildContextMenu(t.id,i,e)}}else if("branch"===t.type){if(t.menu&&t.menu instanceof Array&&t.menu.length>0){var n=this.groupContextMenuData(t.menu,e);this.buildContextMenu(t.id,n,e)}if(t.subitems&&t.subitems instanceof Array&&t.subitems.length>0)for(var s=0,a=t.subitems.length;s<a;s++)this.generateContextMenu(t.subitems[s],e)}},groupContextMenuData:function(t,e){for(var i={},n=0,s=t.length;n<s;n++)if(null==i[t[n].mid]&&("visible"===e?i[t[n].mid]={name:'<span class="context-menu-icon context-menu-'.concat(t[n].type,'-icon"></span>').concat(t[n].label),isHtmlName:!0,visible:t[n].active}:"disabled"===e&&(i[t[n].mid]={name:'<span class="context-menu-icon context-menu-'.concat(t[n].type,'-icon"></span>').concat(t[n].label),isHtmlName:!0,disabled:!t[n].active})),t[n].menu&&t[n].menu instanceof Array&&t[n].menu.length>0&&null==i[t[n].mid].items){i[t[n].mid].items={};var a=this.groupContextMenuData(t[n].menu,e);i[t[n].mid].items=a}return i},updateContextMenu:function(t,e){for(var i=0,n=this.options.item.length;i<n;i++)this.activeContextMenu(this.options.item[i],t,e)},activeContextMenu:function(t,e,i){if(t){if(t.menu)for(var n=0,s=t.menu.length;n<s;n++)t.menu[n].mid==e&&(t.menu[n].active=i),t.menu[n].menu&&this.activeContextSubMenu(menu[n].menu,e,i);if(t.subitems)for(var a=0,o=t.subitems.length;a<o;a++)this.activeContextMenu(t.subitems[a],e,i)}},activeContextSubMenu:function(t,e,i){if(t)for(var n=0,s=t.length;n<s;n++)t[n].mid==e&&(t[n].active=i),t[n].menu&&this.activeContextSubMenu(t[n].menu,e,i)},getItem:function(t,e){if(!e)return null;if(e.id==t)return e;if("branch"==e.type&&e.subitems&&e.subitems instanceof Array)for(var i=0,n=e.subitems.length;i<n;i++){var s=this.getItem(t,e.subitems[i]);if(null!=s)return s}return null},menubuild:function(t){for(var e=t.attr("data-item"),i={},n=null,s=0,a=this.options.item.length;s<a&&!(n=this.getItem(e,this.options.item[s]));s++);if(!n)return{items:{}};if("item"===n.type)n.menu&&n.menu instanceof Array&&n.menu.length>0&&(i=this.groupContextMenuData(n.menu,this.options.activeType),this.buildContextMenu(n.id,i,this.options.activeType));else if("branch"===n.type&&(n.menu&&n.menu instanceof Array&&n.menu.length>0&&(i=this.groupContextMenuData(n.menu,this.options.activeType),this.buildContextMenu(n.id,i,this.options.activeType)),n.subitems&&n.subitems instanceof Array&&n.subitems.length>0))for(var o=0,l=n.subitems.length;o<l;o++)this.generateContextMenu(n.subitems[o],this.options.activeType);return{items:i}},buildContextMenu:function(t,e,i){var s={selector:'[id="'.concat(t,'-btn"]'),build:this.menubuild.bind(this),trigger:"left",hideOnSecondTrigger:!0,callback:this.selectContextItem.bind(this),zIndex:10};n.default.contextMenu&&n.default.contextMenu(s)},toggleItemGroup:function(t){n.default(t).find(".mexplorermenu-item-icon").hasClass("fa-chevron-down")?(n.default(t).find(".mexplorermenu-item-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right"),n.default(t).siblings(".mexplorermenu-content").addClass("mexplorermenu-hidden"),n.default(t).attr("data-expand",!1)):n.default(t).find(".mexplorermenu-item-icon").hasClass("fa-chevron-right")&&(n.default(t).find(".mexplorermenu-item-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(t).siblings(".mexplorermenu-content").removeClass("mexplorermenu-hidden"),n.default(t).attr("data-expand",!0)),this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction("collapseGroupItem",{id:n.default(t).parent(".mexplorermenu-item-group").attr("id"),type:n.default(t).parent(".mexplorermenu-item-group").attr("data-type"),title:n.default(t).parent(".mexplorermenu-item-group").attr("data-title"),expand:"true"===n.default(t).attr("data-expand")})},selectIconMenu:function(t){var e=n.default(t).attr("id"),i=n.default(t).attr("data-type"),s=n.default(t).attr("data-menu");if("filter"===i&&("none"===n.default("#"+e+"-input").parent().css("display")?(n.default("#"+e+"-input").parent().css("display",""),n.default("#"+e+"-input").trigger("focus")):(n.default("#"+e+"-input").parent().css("display","none"),n.default("#"+e+"-input").val("").trigger("input"))),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectmenu",Object.assign({id:e,type:i,title:s},"sort"===i?{orderBy:n.default(t).attr("data-orderby")}:""));else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectmenu");else{var a=new CustomEvent("selectmenu",{detail:Object.assign({id:e,type:i,title:s},"sort"===i?{orderBy:n.default(t).attr("data-orderby")}:"")});this.$element[0].dispatchEvent(a)}},selectItem:function(t){var e="true"===n.default("#"+this.uiid).children().attr("data-select"),i="",s="";if(!n.default(t.target).hasClass("fa")&&!n.default(t.target).hasClass("mexplorermenu-item-btn")&&e&&n.default(t.currentTarget).hasClass("mexplorermenu-item"))if(n.default("."+this.uiid+"-mexplorermenu-item.active").removeClass("active"),n.default(t.currentTarget).addClass("active"),i=n.default(t.currentTarget).attr("id"),s=n.default(t.currentTarget).attr("data-title"),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectitem",{id:i,type:"select",title:s});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectitem");else{var a=new CustomEvent("selectitem",{detail:{id:i,type:"select",title:s}});this.$element[0].dispatchEvent(a)}},selectContextItem:function(t,e){var i=n.default(e.$trigger).attr("data-item"),s=n.default(e.$trigger).attr("data-title");if(this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectcontext",{id:i,type:t,title:s});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectcontext");else{var a=new CustomEvent("selectcontext",{detail:{id:i,type:t,title:s}});this.$element[0].dispatchEvent(a)}},filterItem:function(t){var e=t.target.id,i=n.default("#".concat(e)).val(),s=n.default("#".concat(e)).attr("data-menu"),a="true"===n.default("#".concat(e)).attr("data-filter_title");n.default(t.target).siblings(".mexplorermenu-filter-clear-btn").toggle(!!i),n.default("#".concat(s," .mexplorermenu-item")).each((function(t){var e=n.default(this).find(".mexplorermenu-item-title").html()||"";a?n.default(this).parents(".mexplorermenu-item-group").css("display",""):(n.default(this).parents().find(".mexplorermenu-item-group > .mexplorermenu-item-name").css("display","none"),n.default(".mexplorermenu-content").css("margin-left","0")),e.toLowerCase().indexOf(i.toLowerCase())>=0?n.default(this).css("display",""):n.default(this).css("display","none")})),a?(i||n.default(t.target).trigger("focus"),n.default("#".concat(s," .mexplorermenu-item-group")).each((function(t){var e=0,i=n.default(this).find(".mexplorermenu-item");i.each((function(){"none"===n.default(this).css("display")&&(e+=1)})),n.default(this).css("display",i.length===e?"none":"")}))):i||(n.default(t.target).trigger("focus"),n.default(t.target).parent().siblings("ul").find(".mexplorermenu-item-group .mexplorermenu-item-name").css("display",""),n.default(".mexplorermenu-content").css("margin-left",""))},renameItem:function(t,e){if(!(n.default("#".concat(t)).length<1)){n.default("#".concat(t)).attr("data-title",e),n.default("#".concat(t)).find(".mexplorermenu-item-title").html(e),n.default("#".concat(t)).find(".mexplorermenu-item-btn").attr("data-title",e);for(var i=0,s=this.options.item.length;i<s&&!this.updateItemLabel(this.options.item[i],t,e);i++);}},updateItemLabel:function(t,e,i){if(t&&t.id===e)return t.label=i,!0;if(t&&t.subitems&&t.subitems instanceof Array)for(var n=0,s=t.subitems.length;n<s;n++)this.updateItemLabel(t.subitems[n],e,i);return!1},deleteItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(n.default("#".concat(t)).length<1)){var i=n.default("#".concat(t)).attr("data-type");if("item"===i)n.default("#".concat(t)).remove();else if("branch"===i){var s=n.default("#".concat(t)).find(".mexplorermenu-content");s.length>0&&n.default(s[0]).remove(),e||n.default("#".concat(t)).remove()}for(var a=0,o=this.options.item.length;a<o;a++)if(this.options.item[a].id===t)return"item"===this.options.item[a].type||"branch"===this.options.item[a].type&&!e?(this.options.item.splice(a,1),!0):(this.options.item[a].subitems.length=0,!0);for(var l=0,r=this.options.item.length;l<r;l++)if("branch"===this.options.item[l].type&&this.removeSubitem(this.options.item[l],t,e))return!0;return!1}},removeSubitem:function(t,e,i){if(t&&t.subitems&&t.subitems instanceof Array){for(var n=0,s=t.subitems.length;n<s;n++)if(t.subitems[n].id==e)return"item"===t.subitems[n].type||"branch"===t.subitems[n].type&&!i?(t.subitems.splice(n,1),!0):(t.subitems[n].subitems&&(t.subitems[n].subitems.length=0),!0);for(var a=0,o=t.subitems.length;a<o;a++)if("branch"===t.subitems[a].type&&this.removeSubitem(t.subitems[a],e,i))return!0}return!1},appendItem:function(t,e){if(e&&e instanceof Array){for(var i={draggable:this.options.draggable,dragstart:this.options.dragstart,srcpath:this.options.srcpath},s="",a=0,o=e.length;a<o;a++)s+=this.menuItemTxt(e[a],i);if(!s)return!1;n.default("#".concat(t)).children(".mexplorermenu-content").length<1?n.default("#".concat(t)).append('<ul class="mexplorermenu-content">'+s+"</ul>"):n.default("#".concat(t)).children(".mexplorermenu-content").append(s);for(var l=0,r=this.options.item.length;l<r;l++)if("branch"===this.options.item[l].type&&this.options.item[l].subitems){if(this.options.item[l].id===t){for(var c=0,u=e.length;c<u;c++)this.options.item[l].subitems.push(e[c]);break}if(this.appendSubitem(this.options.item[l],t,e))break}for(var d=0,h=e.length;d<h;d++)this.generateContextMenu(e[d],this.options.activeType);return!0}},appendSubitem:function(t,e,i){t&&t.subitems&&t.subitems;for(var n=0,s=t.subitems.length;n<s;n++)if("branch"===t.subitems[n].type&&t.subitems[n].subitems){if(t.subitems[n].id===e){for(var a=0,o=i.length;a<o;a++)t.subitems[n].subitems.push(i[a]);return!0}if(this.appendSubitem(t.subitems[n],e,i))return!0}return!1}};var y=function(t,e){this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.default={item:[{left_value:"",right_value:""}],item_min:1,item_max:3,title:{left:"",right:""},columnClass:{left:"",right:"",btn:""},rows:{left:2,right:2},placeholder:{left:"",right:""},spellcheck:!1,clearmode:!0,resize:!0,saveInputHeight:!1,expand:{active:!1,icon:""},buttonAlign:"center"},this.options=Object.assign({},this.default,e),this.clearmode=!0,void 0!==e.clearmode&&"boolean"==typeof e.clearmode&&(this.clearmode=e.clearmode),this.$element.on("click",".minputtextarea-btn.addbtn",n.default.proxy((function(t){this.addItem(t.currentTarget)}),this)),this.$element.on("click",".minputtextarea-btn.delbtn",n.default.proxy((function(t){this.deleteItem(t.currentTarget)}),this)),this.$element.on("click",".minputtextarea-btn.expandbtn",n.default.proxy((function(t){this.expandItem(t.currentTarget)}),this)),this.$element.on("click",".minputtextarea-btn.expandbtn",n.default.proxy((function(t){this.expandItem(t.currentTarget)}),this)),this.$element.on("change",".minputtextarea-input",n.default.proxy((function(t){this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction(this.uiid,"change",parseInt(n.default(t.currentTarget).attr("data-item")),{},[])}),this)),this.populate()};y.prototype={clear:function(){this.options=this.default,this.populate()},destroy:function(){this.$element.find("table.minputtextarea").off(),this.$element.find("table.minputtextarea").remove(),this.$element.data("daai.inputtextareatable"),this.$element.removeData("daai.inputtextareatable"),this.$element.data("daai.inputtextareatable"),this.$element[0].outerHTML=""},update:function(t){this.options=Object.assign({},this.default,t),this.populate()},reset:function(){this.options.item=[{left_value:"",right_value:""}],this.populate()},populate:function(){var t=this.render();this.$element.html(t),n.default(".minputtextarea-input").each((function(){var t=n.default(this).attr("data-prev-height");n.default(this).css("min-height",n.default(this).outerHeight()),t&&n.default(this).css("height",t)})),n.default("#"+this.uiid).find(".minputtextarea-btns").each((function(){n.default(this).css("width",20*n.default(this).find(".minputtextarea-btn").length+12)})),this.clearmode||this.itemBannedAction()},render:function(){var t=this.options,e="";e+='<table class="minputtextarea" id="'.concat(this.uiid,'">'),t.title&&(e+='\n      <thead class="minputtextarea-header">\n        <tr>\n          <td class="minputtextarea-title minputtextarea-title-left" id="'.concat(this.uiid,'-title-left">').concat(t.title.left,'</td>\n          <td class="minputtextarea-title minputtextarea-title-right" id="').concat(this.uiid,'-title-right">').concat(t.title.right,'</td>\n          <td class="minputtextarea-title minputtextarea-title-btn" id="').concat(this.uiid,'-title-btn"></td>\n        </tr>\n      </thead>')),e+='<tbody class="minputtextarea-body">';for(var i=0,n=t.item.length>t.item_max?t.item_max:t.item.length;i<n;i++){var s=t.saveInputHeight&&t.item[i].left_height?t.item[i].left_height:"",a=t.saveInputHeight&&t.item[i].right_height?t.item[i].right_height:"";e+='\n      <tr class="minputtextarea-item '.concat(this.uiid,'-item" data-item="').concat(i,'">\n        <td class="minputtextarea-td ').concat(t.columnClass.left,'">\n          <input class="minputtextarea-input ').concat(this.uiid,'-input-left" data-item="').concat(i,'"\n            placeholder="').concat(t.placeholder.left,'" spellcheck="').concat(t.spellcheck,'"\n            data-prev-height="').concat(s,'" value="').concat(t.item[i].left_value.replace(/"/g,"&quot;"),'">\n        </td>\n        <td class="minputtextarea-td ').concat(t.columnClass.right,'">\n          <textarea class="minputtextarea-input ').concat(this.uiid,"-input-right ").concat(t.resize?"":"noresize",'"\n            data-item="').concat(i,'" rows="').concat(t.rows.right,'"\n            placeholder="').concat(t.placeholder.right,'" spellcheck="').concat(t.spellcheck,'"\n            data-prev-height="').concat(a,'">').concat(t.item[i].right_value.replace(/"/g,"&quot;"),'</textarea>\n        </td>\n        <td class="minputtextarea-td minputtextarea-btns ').concat(t.columnClass.btn,'" style="align-items: ').concat(t.buttonAlign,';">\n          ').concat(t.expand.active?'<span class="minputtextarea-btn expandbtn" data-item="'.concat(i,'"><i class="fas ').concat(t.expand.icon,'"></i></span>'):"",'\n          <span class="minputtextarea-btn addbtn" data-item="').concat(i,'"><i class="fas fa-plus"></i></span>\n          <span class="minputtextarea-btn delbtn" data-item="').concat(i,'"><i class="fas fa-minus"></i></span>\n          <span></span>\n        </td>\n      </tr>')}return e+="</tbody>\n    </table>"},addItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();if(n.default(t).hasClass("addbtn")&&!(i.length>=this.options.item_max)){var s=this.$element.find('tr[data-item="'.concat(e,'"]'));if(s){for(var a=this.options.item_max-1;a>e;a--)this.$element.find('tr [data-item="'.concat(a,'"]')).attr("data-item",a+1),this.$element.find('tr[data-item="'.concat(a,'"]')).attr("data-item",a+1);i.splice(e+1,0,{left_value:"",right_value:"",left_height:"",right_height:""}),s.after('<tr class="minputtextarea-item '.concat(this.uiid,'-item" data-item="').concat(e+1,'">\n        <td class="minputtextarea-td ').concat(this.options.columnClass.left,'">\n          <input class="minputtextarea-input ').concat(this.uiid,'-input-left" data-item="').concat(e+1,'"\n            placeholder="').concat(this.options.placeholder.left,'" spellcheck="').concat(this.optionsspellcheck,'"\n            data-prev-height="" value="">\n        </td>\n        <td class="minputtextarea-td ').concat(this.options.columnClass.right,'">\n          <textarea class="minputtextarea-input ').concat(this.uiid,"-input-right ").concat(this.options.resize?"":"noresize",'"\n            data-item="').concat(e+1,'" rows="').concat(this.options.rows.right,'"\n            placeholder="').concat(this.options.placeholder.right,'" spellcheck="').concat(this.options.pellcheck,'"\n            data-prev-height=""></textarea>\n        </td>\n        <td class="minputtextarea-td minputtextarea-btns ').concat(this.options.columnClass.btn,'" style="align-items: ').concat(this.options.buttonAlign,';">\n          ').concat(this.options.expand.active?'<span class="minputtextarea-btn expandbtn" data-item="'.concat(e+1,'"><i class="fas ').concat(this.options.expand.icon,'"></i></span>'):"",'\n          <span class="minputtextarea-btn addbtn" data-item="').concat(e+1,'"><i class="fas fa-plus"></i></span>\n          <span class="minputtextarea-btn delbtn" data-item="').concat(e+1,'"><i class="fas fa-minus"></i></span>\n          <span></span>\n        </td>\n      </tr>')),this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction(this.uiid,"additem",e,{left_value:"",right_value:""},i),this.options.item=i}}},deleteItem:function(t){var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems();if(n.default(t).hasClass("delbtn"))if(i.length>this.options.item_min){var s=this.$element.find('tr[data-item="'.concat(e,'"]'));s&&s.remove();for(var a=e+1;a<this.options.item_max;a++)this.$element.find('tr [data-item="'.concat(a,'"]')).attr("data-item",a-1),this.$element.find('tr[data-item="'.concat(a,'"]')).attr("data-item",a-1);i.splice(e,1),this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction(this.uiid,"deleteitem",e,{},[])}else 1==i.length&&(i=[{left_value:"",right_value:"",left_height:"",right_height:""}]);this.options.item=i},getCurrentItems:function(){var t=[];return n.default("."+this.uiid+"-item").each((function(e){t.push({left_value:"",right_value:"",left_height:"",right_height:""})})),n.default("."+this.uiid+"-input-left").each((function(e){var i=parseInt(n.default(this).attr("data-item"));t[i].left_value=n.default(this).val().replace(/"/g,"&quot;"),t[i].left_height=n.default(this).outerHeight()})),n.default("."+this.uiid+"-input-right").each((function(e){var i=parseInt(n.default(this).attr("data-item"));t[i].right_value=n.default(this).val().replace(/"/g,"&quot;"),t[i].right_height=n.default(this).outerHeight()})),t},getItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)""==t[i].left_value&&""==t[i].right_value||e.push({left_value:t[i].left_value.replace(/&quot;/g,'"'),right_value:t[i].right_value.replace(/&quot;/g,'"')});return e},getAllItems:function(){for(var t=this.getCurrentItems(),e=[],i=0,n=t.length;i<n;i++)e.push({left_value:t[i].left_value.replace(/&quot;/g,'"'),right_value:t[i].right_value.replace(/&quot;/g,'"')});return e},getItem:function(t){var e=this.getCurrentItems();return e.length>0&&t>=0&&t<e.length?{left_value:e[t].left_value.replace(/&quot;/g,'"'),right_value:e[t].right_value.replace(/&quot;/g,'"')}:{left_value:"",right_value:""}},setItem:function(t,e){t>=0&&t<this.options.item.length&&(this.options.item[t].left_value=e.left_value,this.options.item[t].right_value=e.right_value,this.$element.find('tr[data-item="'.concat(t,'"] input')).val(e.left_value),this.$element.find('tr[data-item="'.concat(t,'"] textarea')).val(e.right_value))},itemBannedAction:function(){this.options.item&&this.options.item instanceof Array||(this.options.item=[]),this.options.item.length<=this.options.item_min?n.default("#"+this.uiid).find(".minputtextarea-btn.delbtn").addClass("banned-action"):this.options.item.length>=this.options.item_max&&n.default("#"+this.uiid).find(".minputtextarea-btn.addbtn").addClass("banned-action")},expandItem:function(t){for(var e=parseInt(n.default(t).attr("data-item")),i=this.getCurrentItems(),s={left_value:"",right_value:""},a=[],o=document.getElementsByClassName(this.uiid+"-item"),l=0,r=o.length;l<r;l++)if(e==n.default(o[l]).attr("data-item")){s.left_value=n.default(o[l]).find("."+this.uiid+"-input-left").val(),s.right_value=n.default(o[l]).find("."+this.uiid+"-input-right").val();break}for(var c=0,u=i.length;c<u;c++)a.push({left_value:i[c].left_value,right_value:i[c].right_value});this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction(this.uiid,"expand",e,s,a)}};var $=function(t,e){(this.$element=n.default(t),this.uiid=this.$element.attr("id"),this.default={label:"",collapse:null,select:!1,draggable:!0,dragstart:"dragStart",showheader:!0,tool:[],activeType:"",item:[],srcpath:""},this.options=JSON.parse(JSON.stringify(e)),this.options=Object.assign({},this.default,this.options,e.onAction?{onAction:e.onAction}:""),n.default.ui&&n.default.ui.position)||(new d).createPosition(n.default);n.default.contextMenu||(new h).createContextMenu(n.default);this.$element.on("click",".mtreemenu-btn > .mtreemenu-icon, .mtreemenu-btn > .mtreemenu-img",n.default.proxy((function(t){this.selectIconMenu(t.currentTarget)}),this)),this.$element.on("click",".mtreemenu-item-group > .mtreemenu-item-name",n.default.proxy((function(t){n.default(t.target).hasClass("fa-ellipsis-v")||n.default(t.target).hasClass("mtreemenu-item-btn")||this.toggleItemGroup(t.currentTarget)}),this)),this.$element.on("click",".mtreemenu-item",n.default.proxy((function(t){n.default(t.currentTarget).hasClass("mtreemenu-item-group")||this.selectItem(t)}),this)),this.$element.on("input",".mtreemenu-filter-input",n.default.proxy((function(t){this.filterItem(t)}),this)),this.$element.on("click",".mtreemenu-filter-clear-btn",n.default.proxy((function(t){n.default(t.target).siblings(".mtreemenu-filter-input").val("").trigger("input")}),this)),this.render()};$.prototype={clear:function(){this.options=JSON.parse(JSON.stringify(this.default)),this.render()},destroy:function(){this.$element.find("div.mtreemenu-header").off(),this.$element.find("div.mtreemenu-body").off(),this.$element.find("div.mtreemenu-header").remove(),this.$element.find("div.mtreemenu-body").remove(),this.$element[0].outerHTML=""},update:function(t){this.options=JSON.parse(JSON.stringify(t)),this.options=Object.assign({},this.default,this.options,t.onAction?{onAction:t.onAction}:""),this.render()},render:function(){var t=this.options,e='<div id="'.concat(this.uiid,'-spin" class=""></div>'),i={active:!1,title:!1,placeholder:""};if(this.options.showheader){e+='<div class="mtreemenu-header" data-select="'+t.select+'">',e+='  <span class="mtreemenu-title">'+t.label+"</span>",e+='  <span class="mtreemenu-btn">';for(var n=0,s=t.tool.length;n<s;n++)if("filter"===t.tool[n].name&&(i.active=t.tool[n].active,i.title=t.tool[n].title,i.placeholder=t.tool[n].placeholder),t.tool[n].active){var a="sort"===t.tool[n].name?'data-orderby="'.concat(t.tool[n].orderBy,'"'):"";if("img"===t.tool[n].iconType){var o=t.tool[n].className?t.tool[n].className:"mtreemenu-".concat(t.tool[n].name,"-img");e+='<span class="mtreemenu-img '.concat(o,'" id="').concat(this.uiid,"-").concat(t.tool[n].name,'"\n              data-menu="').concat(this.uiid,'" data-type="').concat(t.tool[n].name,'" ').concat(a,"></span>")}else"icon"===t.tool[n].iconType&&(e+='<i class="mtreemenu-icon '.concat(t.tool[n].icon,'" id="').concat(this.uiid,"-").concat(t.tool[n].name,'"\n              data-menu="').concat(this.uiid,'" data-type="').concat(t.tool[n].name,'" ').concat(a,"></i>"))}e+="  </span>",e+="</div>"}else for(var l=0,r=t.tool.length;l<r;l++)"filter"===t.tool[l].name&&(i.active=t.tool[l].active,i.title=t.tool[l].title,i.placeholder=t.tool[l].placeholder);this.options.showheader?e+='<div class="mtreemenu-body">':e+='<div class="mtreemenu-noheader-body">',i.active&&(e+='<span class="mtreemenu-filter" style="display: none;">',e+='  <input type="text" class="mtreemenu-filter-input" id="'+this.uiid+'-filter-input" data-menu="'+this.uiid+'"',e+='   data-filter_title="'+i.title+'"',e+='   placeholder="'+(i.placeholder?i.placeholder.replace(/"/g,"&quot;"):"Search ...")+'">',e+='  <i class="mtreemenu-filter-clear-btn">&times;</i>',e+="</span>"),e+='    <ul style="margin: 0; padding: 0;">';for(var c=0,u=t.item.length;c<u;c++)e+=this.menuItemTxt(t.item[c],{draggable:t.draggable,dragstart:t.dragstart,srcpath:t.srcpath});e+="  </ul>",e+="</div>",this.populate(e)},menuItemTxt:function(t,e){var i='<div class="tooltip tooltip-outer" role="tooltip"><div class="arrow"></div><div class="tooltip-mtreemenu tooltip-inner"></div></div>',n="";if("branch"===t.type?(null==t.expandItems&&(t.expandItems=!0),n+='<li class="mtreemenu-item-group" id="'+t.id+'" data-type="'+t.type+'" data-title="'+t.label+'" data-userinfo="'+(t.userinfo||"")+'">',n+='  <span class="mtreemenu-item-name" data-expand="'+t.expandItems+'">',n+='    <i class="mtreemenu-item-icon fa '+(t.expandItems?"fa-chevron-down":"fa-chevron-right")+'"></i>'):"item"===t.type&&(null!=e.draggable&&1==e.draggable?n+='<li class="mtreemenu-item '+this.uiid+'-mtreemenu-item" id="'+t.id+'" draggable="'+e.draggable+'" ondragstart="'+e.dragstart+'(event)" data-type="'+t.type+'" data-title="'+t.label+'" data-select="'+t.select+'" data-selected="'+t.selected+'" data-userinfo="'+(t.userinfo||"")+'">':n+='<li class="mtreemenu-item '+this.uiid+'-mtreemenu-item" id="'+t.id+'" draggable="'+e.draggable+'" data-type="'+t.type+'" data-title="'+t.label+'" data-select="'+t.select+'" data-selected="'+t.selected+'" data-userinfo="'+(t.userinfo||"")+'">',n+='  <span class="mtreemenu-item-name">',t.icon&&(n+='    <span class="mtreemenu-item-img"><img src="'+e.srcpath+t.icon+'"></span>')),n+='    <span class="mtreemenu-item-title">'+t.label+"</span>",t.tooltip&&(n+='      <span class="mtreemenu-item-info">',n+=t.tooltip?'<a class="mtreemenu-tooltip" data-toggle="tooltip" data-template="'.concat(i.replace(/"/g,"&quot;"),'" data-container="body" data-placement="bottom" data-html="true" title="').concat(t.tooltip.replace(/"/g,"&quot;"),'"><i class="fas fa-info-circle"></i></a>'):"",n+="      </span>"),t.rtooltip&&(n+='      <span class="mtreemenu-item-info mtreemenu-pull-right">',n+=t.rtooltip?'<a class="mtreemenu-tooltip" data-toggle="tooltip" data-template="'.concat(i.replace(/"/g,"&quot;"),'" data-container="body" data-placement="bottom" data-html="true" title="').concat(t.rtooltip.replace(/"/g,"&quot;"),'"><i class="fas fa-info-circle"></i></a>'):"",n+="      </span>"),t.menu){var s=[];t.menu.forEach((function(t){s.push("data-".concat(t.type,'="').concat(t.active,'"'))})),n+='    <span class="mtreemenu-item-btn '+this.uiid+'-list-btn" id="'+t.id+'-btn" data-item="'+t.id+'" data-title="'+t.label+'" '+s.join(" ")+">",n+='      <i class="fa fa-ellipsis-v"></i>',n+="    </span>"}if(n+="  </span>","branch"===t.type&&t.subitems){n+='  <ul class="mtreemenu-content">';for(var a=0,o=t.subitems.length;a<o;a++){n+=this.menuItemTxt(t.subitems[a],{draggable:e.draggable,dragstart:e.dragstart,srcpath:e.srcpath})}n+="  </ul>"}return n+="</li>"},populate:function(t){this.$element.html(t);var e=n.default("#"+this.uiid).find(".mtreemenu-header .mtreemenu-btn").width(),i=n.default("#"+this.uiid).find(".mtreemenu-header"),s=n.default("#"+this.uiid).find(".mtreemenu-title"),a=i.width()-e;e>0&&(n.default(s).css("max-width",a),s[0].offsetWidth>a&&!s.attr("title")&&s.attr("title",s.text().trim()));var o=this.options;o.item instanceof Array&&!(o.item.length<1)||(o.item=[]);for(var l=0,r=o.item.length;l<r;l++)this.generateContextMenu(o.item[l],o.activeType);n.default("#"+this.uiid+" .mtreemenu-item").each((function(t){var e=n.default(this).attr("id"),i=n.default(this).find(".mtreemenu-item-img").width()||0,s=n.default(this).find(".mtreemenu-item-info").width()||0,a=n.default(this).find(".mtreemenu-item-btn").width()||0,o=n.default(this).width()-(i+s+a+4),l=n.default(this).find(".mtreemenu-item-title");l&&(l.prop("scrollWidth")>l.prop("offsetWidth")&&l.attr("title",l.html()),l.css("max-width",o)),"true"===n.default(this).attr("data-selected")&&n.default('[id="'+e+'"]').addClass("active"),n.default('[data-toggle="tooltip"]').tooltip()})),n.default("#"+this.uiid+" .mtreemenu-item-group").each((function(t){var e=n.default(this).find(".mtreemenu-item-img").width()||0,i=n.default(this).find(".mtreemenu-item-info").width()||0,s=n.default(this).find(".mtreemenu-item-btn").width()||0,a=n.default(this).width()-(e+i+s+4),o=n.default(this).find(".mtreemenu-item-title");o[0]&&(o[0].scrollWidth>o[0].offsetWidth&&(o[0].title=o[0].innerText),o[0].style.maxWidth=a),"false"===n.default(this).children(".mtreemenu-item-name").attr("data-expand")&&n.default(this).children(".mtreemenu-content").addClass("mtreemenu-hidden")}))},generateContextMenu:function(t,e){if("item"===t.type){if(t.menu&&t.menu instanceof Array&&t.menu.length>0){var i=this.groupContextMenuData(t.menu,e);this.buildContextMenu(t.id,i,e)}}else if("branch"===t.type){if(t.menu&&t.menu instanceof Array&&t.menu.length>0){var n=this.groupContextMenuData(t.menu,e);this.buildContextMenu(t.id,n,e)}if(t.subitems&&t.subitems instanceof Array&&t.subitems.length>0)for(var s=0,a=t.subitems.length;s<a;s++)this.generateContextMenu(t.subitems[s],e)}},groupContextMenuData:function(t,e){for(var i={},n=0,s=t.length;n<s;n++)if(null==i[t[n].mid]&&("visible"===e?i[t[n].mid]={name:'<span class="context-menu-icon context-menu-'.concat(t[n].type,'-icon"></span>').concat(t[n].label),isHtmlName:!0,visible:t[n].active}:"disabled"===e&&(i[t[n].mid]={name:'<span class="context-menu-icon context-menu-'.concat(t[n].type,'-icon"></span>').concat(t[n].label),isHtmlName:!0,disabled:!t[n].active})),t[n].menu&&t[n].menu instanceof Array&&t[n].menu.length>0&&null==i[t[n].mid].items){i[t[n].mid].items={};var a=this.groupContextMenuData(t[n].menu,e);i[t[n].mid].items=a}return i},updateContextMenu:function(t,e){for(var i=0,n=this.options.item.length;i<n;i++)this.activeContextMenu(this.options.item[i],t,e)},activeContextMenu:function(t,e,i){if(t){if(t.menu)for(var n=0,s=t.menu.length;n<s;n++)t.menu[n].mid==e&&(t.menu[n].active=i),t.menu[n].menu&&this.activeContextSubMenu(menu[n].menu,e,i);if(t.subitems)for(var a=0,o=t.subitems.length;a<o;a++)this.activeContextMenu(t.subitems[a],e,i)}},activeContextSubMenu:function(t,e,i){if(t)for(var n=0,s=t.length;n<s;n++)t[n].mid==e&&(t[n].active=i),t[n].menu&&this.activeContextSubMenu(t[n].menu,e,i)},getItem:function(t,e){if(!e)return null;if(e.id==t)return e;if("branch"==e.type&&e.subitems&&e.subitems instanceof Array)for(var i=0,n=e.subitems.length;i<n;i++){var s=this.getItem(t,e.subitems[i]);if(null!=s)return s}return null},menubuild:function(t){for(var e=t.attr("data-item"),i={},n=null,s=0,a=this.options.item.length;s<a&&!(n=this.getItem(e,this.options.item[s]));s++);if(!n)return{items:{}};if("item"===n.type)n.menu&&n.menu instanceof Array&&n.menu.length>0&&(i=this.groupContextMenuData(n.menu,this.options.activeType),this.buildContextMenu(n.id,i,this.options.activeType));else if("branch"===n.type&&(n.menu&&n.menu instanceof Array&&n.menu.length>0&&(i=this.groupContextMenuData(n.menu,this.options.activeType),this.buildContextMenu(n.id,i,this.options.activeType)),n.subitems&&n.subitems instanceof Array&&n.subitems.length>0))for(var o=0,l=n.subitems.length;o<l;o++)this.generateContextMenu(n.subitems[o],this.options.activeType);return{items:i}},buildContextMenu:function(t,e,i){var s={selector:'[id="'.concat(t,'-btn"]'),build:this.menubuild.bind(this),trigger:"left",hideOnSecondTrigger:!0,callback:this.selectContextItem.bind(this),zIndex:10};n.default.contextMenu&&n.default.contextMenu(s)},toggleItemGroup:function(t){n.default(t).find(".mtreemenu-item-icon").hasClass("fa-chevron-down")?(n.default(t).find(".mtreemenu-item-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right"),n.default(t).siblings(".mtreemenu-content").addClass("mtreemenu-hidden"),n.default(t).attr("data-expand",!1)):n.default(t).find(".mtreemenu-item-icon").hasClass("fa-chevron-right")&&(n.default(t).find(".mtreemenu-item-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down"),n.default(t).siblings(".mtreemenu-content").removeClass("mtreemenu-hidden"),n.default(t).attr("data-expand",!0)),this.options.onAction&&"function"==typeof this.options.onAction&&this.options.onAction("collapseGroupItem",{id:n.default(t).parent(".mtreemenu-item-group").attr("id"),type:n.default(t).parent(".mtreemenu-item-group").attr("data-type"),title:n.default(t).parent(".mtreemenu-item-group").attr("data-title"),userinfo:n.default(t).parent(".mtreemenu-item-group").attr("data-userinfo"),expand:"true"===n.default(t).attr("data-expand")})},selectIconMenu:function(t){var e=n.default(t).attr("id"),i=n.default(t).attr("data-type"),s=n.default(t).attr("data-menu");if("filter"===i&&("none"===n.default("#"+e+"-input").parent().css("display")?(n.default("#"+e+"-input").parent().css("display",""),n.default("#"+e+"-input").trigger("focus")):(n.default("#"+e+"-input").parent().css("display","none"),n.default("#"+e+"-input").val("").trigger("input"))),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectmenu",Object.assign({id:e,type:i,title:s},"sort"===i?{orderBy:n.default(t).attr("data-orderby")}:""));else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectmenu");else{var a=new CustomEvent("selectmenu",{detail:Object.assign({id:e,type:i,title:s},"sort"===i?{orderBy:n.default(t).attr("data-orderby")}:"")});this.$element[0].dispatchEvent(a)}},selectItem:function(t){var e="true"===n.default(t.currentTarget).attr("data-select"),i="",s="",a="";if(!n.default(t.target).hasClass("fa")&&!n.default(t.target).hasClass("mtreemenu-item-btn")&&e&&n.default(t.currentTarget).hasClass("mtreemenu-item"))if(n.default("."+this.uiid+"-mtreemenu-item.active").removeClass("active"),n.default(t.currentTarget).addClass("active"),i=n.default(t.currentTarget).attr("id"),s=n.default(t.currentTarget).attr("data-title"),a=n.default(t.currentTarget).attr("data-userinfo"),this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectitem",{id:i,type:"select",title:s,userinfo:a});else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectitem");else{var o=new CustomEvent("selectitem",{detail:{id:i,type:"select",title:s,userinfo:a}});this.$element[0].dispatchEvent(o)}},selectContextItem:function(t,e){var i=n.default(e.$trigger).attr("data-item"),s=n.default(e.$trigger).attr("data-title"),a=n.default("#".concat(i)).attr("data-userinfo");if(this.options.onAction&&"function"==typeof this.options.onAction)this.options.onAction("selectcontext",r({id:i,type:t,title:s,userinfo:a},"userinfo",a));else if(this.$element[0].fireEvent)this.$element[0].fireEvent("selectcontext");else{var o=new CustomEvent("selectcontext",{detail:r({id:i,type:t,title:s,userinfo:a},"userinfo",a)});this.$element[0].dispatchEvent(o)}},toggleFilterItem:function(){var t="".concat(this.$element.attr("id"),"-filter");"none"===n.default("#"+t+"-input").parent().css("display")?(n.default("#"+t+"-input").parent().css("display",""),n.default("#"+t+"-input").val("").trigger("focus")):(n.default("#"+t+"-input").parent().css("display","none"),n.default("#"+t+"-input").val("").trigger("input"))},filterItem:function(t){var e=t.target.id,i=n.default("#".concat(e)).val(),s=n.default("#".concat(e)).attr("data-menu"),a="true"===n.default("#".concat(e)).attr("data-filter_title");n.default(t.target).siblings(".mtreemenu-filter-clear-btn").toggle(!!i),n.default("#".concat(s," .mtreemenu-item")).each((function(t){var e=n.default(this).find(".mtreemenu-item-title").html()||"";a?n.default(this).parents(".mtreemenu-item-group").css("display",""):(n.default(this).parents().find(".mtreemenu-item-group > .mtreemenu-item-name").css("display","none"),n.default(".mtreemenu-content").css("margin-left","0")),e.toLowerCase().indexOf(i.toLowerCase())>=0?n.default(this).css("display",""):n.default(this).css("display","none")})),a?i?n.default("#".concat(s," .mtreemenu-item-group")).each((function(t){if((n.default(this).find(".mtreemenu-item-title").html()||"").toLowerCase().indexOf(i.toLowerCase())>=0)n.default(this).css("display","");else{var e=0,s=n.default(this).find(".mtreemenu-item");s.each((function(){"none"===n.default(this).css("display")&&(e+=1)})),n.default(this).css("display",s.length===e?"none":"")}})):(n.default(t.target).trigger("focus"),n.default("#".concat(s," .mtreemenu-item-group")).each((function(t){n.default(this).css("display","")}))):i||(n.default(t.target).trigger("focus"),n.default(t.target).parent().siblings("ul").find(".mtreemenu-item-group .mtreemenu-item-name").css("display",""),n.default(".mtreemenu-content").css("margin-left",""))},renameItem:function(t,e,i){if(!(n.default("#".concat(t)).length<1)){if(n.default("#".concat(t)).attr("data-title",e),n.default("#".concat(t)).find(".mtreemenu-item-title:first").html(e),n.default("#".concat(t)).find(".mtreemenu-item-btn:first").attr("data-title",e),i){for(var s=n.default("#".concat(t)).attr("data-userinfo"),a=0,o=this.options.item.length;a<o&&!this.updateItemUserInfo(this.options.item[a],t,i);a++);if(n.default("#".concat(t)).attr("data-userinfo",i),"branch"==n.default("#".concat(t)).attr("data-type"))for(var l=n.default("#".concat(t)).find("li"),r=0,c=l.length;r<c;r++){var u=n.default(l[r]).attr("data-userinfo");u=u.replace(s,i),n.default(l[r]).attr("data-userinfo",u);for(var d=n.default(l[r]).attr("id"),h=0,m=this.options.item.length;h<m&&!this.updateItemUserInfo(this.options.item[h],d,u);h++);}}for(var p=0,f=this.options.item.length;p<f&&!this.updateItemLabel(this.options.item[p],t,e);p++);}},updateItemLabel:function(t,e,i){if(t&&t.id===e)return t.label=i,!0;if(t&&t.subitems&&t.subitems instanceof Array)for(var n=0,s=t.subitems.length;n<s;n++)this.updateItemLabel(t.subitems[n],e,i);return!1},updateItemUserInfo:function(t,e,i){if(t&&t.id===e)return t.userinfo=i,!0;if(t&&t.subitems&&t.subitems instanceof Array)for(var n=0,s=t.subitems.length;n<s;n++)this.updateItemUserInfo(t.subitems[n],e,i);return!1},deleteItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(n.default("#".concat(t)).length<1)){var i=n.default("#".concat(t)).attr("data-type");if("item"===i)n.default("#".concat(t)).remove();else if("branch"===i){var s=n.default("#".concat(t)).find(".mtreemenu-content");s.length>0&&n.default(s[0]).remove(),e||n.default("#".concat(t)).remove()}for(var a=0,o=this.options.item.length;a<o;a++)if(this.options.item[a].id===t)return"item"===this.options.item[a].type||"branch"===this.options.item[a].type&&!e?(this.options.item.splice(a,1),!0):(this.options.item[a].subitems.length=0,!0);for(var l=0,r=this.options.item.length;l<r;l++)if("branch"===this.options.item[l].type&&this.removeSubitem(this.options.item[l],t,e))return!0;return!1}},removeSubitem:function(t,e,i){if(t&&t.subitems&&t.subitems instanceof Array){for(var n=0,s=t.subitems.length;n<s;n++)if(t.subitems[n].id==e)return"item"===t.subitems[n].type||"branch"===t.subitems[n].type&&!i?(t.subitems.splice(n,1),!0):(t.subitems[n].subitems&&(t.subitems[n].subitems.length=0),!0);for(var a=0,o=t.subitems.length;a<o;a++)if("branch"===t.subitems[a].type&&this.removeSubitem(t.subitems[a],e,i))return!0}return!1},appendItem:function(t,e){if(e&&e instanceof Array){for(var i={draggable:this.options.draggable,dragstart:this.options.dragstart,srcpath:this.options.srcpath},s="",a=0,o=e.length;a<o;a++)s+=this.menuItemTxt(e[a],i);if(!s)return!1;n.default("#".concat(t)).children(".mtreemenu-content").length<1?n.default("#".concat(t)).append('<ul class="mtreemenu-content">'+s+"</ul>"):n.default("#".concat(t)).children(".mtreemenu-content").append(s);for(var l=0,r=this.options.item.length;l<r;l++)if("branch"===this.options.item[l].type&&this.options.item[l].subitems){if(this.options.item[l].id===t){for(var c=0,u=e.length;c<u;c++)this.options.item[l].subitems.push(e[c]);break}if(this.appendSubitem(this.options.item[l],t,e))break}for(var d=0,h=e.length;d<h;d++)this.generateContextMenu(e[d],this.options.activeType);return!0}},appendSubitem:function(t,e,i){t&&t.subitems&&t.subitems;for(var n=0,s=t.subitems.length;n<s;n++)if("branch"===t.subitems[n].type&&t.subitems[n].subitems){if(t.subitems[n].id===e){for(var a=0,o=i.length;a<o;a++)t.subitems[n].subitems.push(i[a]);return!0}if(this.appendSubitem(t.subitems[n],e,i))return!0}return!1},getSubitemCount:function(t){return n.default("#".concat(t," li")).length},spin:function(t){n.default("#".concat(this.uiid,"-spin")).removeClass("mtreemenu-loader").addClass(t?"mtreemenu-loader":"")}},t.colSelector=f,t.mExploreMenu=x,t.mIconMenu=v,t.mInput=p,t.mInputTextArea=y,t.mOperator=a,t.mSelector=o,t.mSlider=s,t.mSliders=u,t.mTextInput=b,t.mTextarea=_,t.mTreeMenu=$,t.mUnitMenu=m,t.pairSelector=g,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=wx.min.js.map
